(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function OA(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Jg={exports:{}},Tc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h0;function TC(){if(h0)return Tc;h0=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var f in a)f!=="key"&&(l[f]=a[f])}else l=a;return a=l.ref,{$$typeof:i,type:n,key:c,ref:a!==void 0?a:null,props:l}}return Tc.Fragment=e,Tc.jsx=t,Tc.jsxs=t,Tc}var d0;function wC(){return d0||(d0=1,Jg.exports=TC()),Jg.exports}var w=wC(),Zg={exports:{}},De={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f0;function bC(){if(f0)return De;f0=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.iterator;function A(D){return D===null||typeof D!="object"?null:(D=T&&D[T]||D["@@iterator"],typeof D=="function"?D:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},K=Object.assign,G={};function W(D,ee,ce){this.props=D,this.context=ee,this.refs=G,this.updater=ce||k}W.prototype.isReactComponent={},W.prototype.setState=function(D,ee){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,ee,"setState")},W.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function re(){}re.prototype=W.prototype;function de(D,ee,ce){this.props=D,this.context=ee,this.refs=G,this.updater=ce||k}var le=de.prototype=new re;le.constructor=de,K(le,W.prototype),le.isPureReactComponent=!0;var we=Array.isArray,pe={H:null,A:null,T:null,S:null,V:null},Ie=Object.prototype.hasOwnProperty;function R(D,ee,ce,ie,ae,be){return ce=be.ref,{$$typeof:i,type:D,key:ee,ref:ce!==void 0?ce:null,props:be}}function S(D,ee){return R(D.type,ee,void 0,void 0,void 0,D.props)}function C(D){return typeof D=="object"&&D!==null&&D.$$typeof===i}function V(D){var ee={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(ce){return ee[ce]})}var O=/\/+/g;function L(D,ee){return typeof D=="object"&&D!==null&&D.key!=null?V(""+D.key):ee.toString(36)}function N(){}function Bt(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(N,N):(D.status="pending",D.then(function(ee){D.status==="pending"&&(D.status="fulfilled",D.value=ee)},function(ee){D.status==="pending"&&(D.status="rejected",D.reason=ee)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function ct(D,ee,ce,ie,ae){var be=typeof D;(be==="undefined"||be==="boolean")&&(D=null);var ye=!1;if(D===null)ye=!0;else switch(be){case"bigint":case"string":case"number":ye=!0;break;case"object":switch(D.$$typeof){case i:case e:ye=!0;break;case _:return ye=D._init,ct(ye(D._payload),ee,ce,ie,ae)}}if(ye)return ae=ae(D),ye=ie===""?"."+L(D,0):ie,we(ae)?(ce="",ye!=null&&(ce=ye.replace(O,"$&/")+"/"),ct(ae,ee,ce,"",function(st){return st})):ae!=null&&(C(ae)&&(ae=S(ae,ce+(ae.key==null||D&&D.key===ae.key?"":(""+ae.key).replace(O,"$&/")+"/")+ye)),ee.push(ae)),1;ye=0;var yt=ie===""?".":ie+":";if(we(D))for(var We=0;We<D.length;We++)ie=D[We],be=yt+L(ie,We),ye+=ct(ie,ee,ce,be,ae);else if(We=A(D),typeof We=="function")for(D=We.call(D),We=0;!(ie=D.next()).done;)ie=ie.value,be=yt+L(ie,We++),ye+=ct(ie,ee,ce,be,ae);else if(be==="object"){if(typeof D.then=="function")return ct(Bt(D),ee,ce,ie,ae);throw ee=String(D),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return ye}function Y(D,ee,ce){if(D==null)return D;var ie=[],ae=0;return ct(D,ie,"","",function(be){return ee.call(ce,be,ae++)}),ie}function ue(D){if(D._status===-1){var ee=D._result;ee=ee(),ee.then(function(ce){(D._status===0||D._status===-1)&&(D._status=1,D._result=ce)},function(ce){(D._status===0||D._status===-1)&&(D._status=2,D._result=ce)}),D._status===-1&&(D._status=0,D._result=ee)}if(D._status===1)return D._result.default;throw D._result}var Ee=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function qe(){}return De.Children={map:Y,forEach:function(D,ee,ce){Y(D,function(){ee.apply(this,arguments)},ce)},count:function(D){var ee=0;return Y(D,function(){ee++}),ee},toArray:function(D){return Y(D,function(ee){return ee})||[]},only:function(D){if(!C(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},De.Component=W,De.Fragment=t,De.Profiler=a,De.PureComponent=de,De.StrictMode=n,De.Suspense=m,De.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=pe,De.__COMPILER_RUNTIME={__proto__:null,c:function(D){return pe.H.useMemoCache(D)}},De.cache=function(D){return function(){return D.apply(null,arguments)}},De.cloneElement=function(D,ee,ce){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var ie=K({},D.props),ae=D.key,be=void 0;if(ee!=null)for(ye in ee.ref!==void 0&&(be=void 0),ee.key!==void 0&&(ae=""+ee.key),ee)!Ie.call(ee,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&ee.ref===void 0||(ie[ye]=ee[ye]);var ye=arguments.length-2;if(ye===1)ie.children=ce;else if(1<ye){for(var yt=Array(ye),We=0;We<ye;We++)yt[We]=arguments[We+2];ie.children=yt}return R(D.type,ae,void 0,void 0,be,ie)},De.createContext=function(D){return D={$$typeof:c,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:l,_context:D},D},De.createElement=function(D,ee,ce){var ie,ae={},be=null;if(ee!=null)for(ie in ee.key!==void 0&&(be=""+ee.key),ee)Ie.call(ee,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(ae[ie]=ee[ie]);var ye=arguments.length-2;if(ye===1)ae.children=ce;else if(1<ye){for(var yt=Array(ye),We=0;We<ye;We++)yt[We]=arguments[We+2];ae.children=yt}if(D&&D.defaultProps)for(ie in ye=D.defaultProps,ye)ae[ie]===void 0&&(ae[ie]=ye[ie]);return R(D,be,void 0,void 0,null,ae)},De.createRef=function(){return{current:null}},De.forwardRef=function(D){return{$$typeof:f,render:D}},De.isValidElement=C,De.lazy=function(D){return{$$typeof:_,_payload:{_status:-1,_result:D},_init:ue}},De.memo=function(D,ee){return{$$typeof:g,type:D,compare:ee===void 0?null:ee}},De.startTransition=function(D){var ee=pe.T,ce={};pe.T=ce;try{var ie=D(),ae=pe.S;ae!==null&&ae(ce,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(qe,Ee)}catch(be){Ee(be)}finally{pe.T=ee}},De.unstable_useCacheRefresh=function(){return pe.H.useCacheRefresh()},De.use=function(D){return pe.H.use(D)},De.useActionState=function(D,ee,ce){return pe.H.useActionState(D,ee,ce)},De.useCallback=function(D,ee){return pe.H.useCallback(D,ee)},De.useContext=function(D){return pe.H.useContext(D)},De.useDebugValue=function(){},De.useDeferredValue=function(D,ee){return pe.H.useDeferredValue(D,ee)},De.useEffect=function(D,ee,ce){var ie=pe.H;if(typeof ce=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ie.useEffect(D,ee)},De.useId=function(){return pe.H.useId()},De.useImperativeHandle=function(D,ee,ce){return pe.H.useImperativeHandle(D,ee,ce)},De.useInsertionEffect=function(D,ee){return pe.H.useInsertionEffect(D,ee)},De.useLayoutEffect=function(D,ee){return pe.H.useLayoutEffect(D,ee)},De.useMemo=function(D,ee){return pe.H.useMemo(D,ee)},De.useOptimistic=function(D,ee){return pe.H.useOptimistic(D,ee)},De.useReducer=function(D,ee,ce){return pe.H.useReducer(D,ee,ce)},De.useRef=function(D){return pe.H.useRef(D)},De.useState=function(D){return pe.H.useState(D)},De.useSyncExternalStore=function(D,ee,ce){return pe.H.useSyncExternalStore(D,ee,ce)},De.useTransition=function(){return pe.H.useTransition()},De.version="19.1.1",De}var m0;function p_(){return m0||(m0=1,Zg.exports=bC()),Zg.exports}var fe=p_();const AC=OA(fe);var ey={exports:{}},wc={},ty={exports:{}},ny={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p0;function IC(){return p0||(p0=1,function(i){function e(Y,ue){var Ee=Y.length;Y.push(ue);e:for(;0<Ee;){var qe=Ee-1>>>1,D=Y[qe];if(0<a(D,ue))Y[qe]=ue,Y[Ee]=D,Ee=qe;else break e}}function t(Y){return Y.length===0?null:Y[0]}function n(Y){if(Y.length===0)return null;var ue=Y[0],Ee=Y.pop();if(Ee!==ue){Y[0]=Ee;e:for(var qe=0,D=Y.length,ee=D>>>1;qe<ee;){var ce=2*(qe+1)-1,ie=Y[ce],ae=ce+1,be=Y[ae];if(0>a(ie,Ee))ae<D&&0>a(be,ie)?(Y[qe]=be,Y[ae]=Ee,qe=ae):(Y[qe]=ie,Y[ce]=Ee,qe=ce);else if(ae<D&&0>a(be,Ee))Y[qe]=be,Y[ae]=Ee,qe=ae;else break e}}return ue}function a(Y,ue){var Ee=Y.sortIndex-ue.sortIndex;return Ee!==0?Ee:Y.id-ue.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();i.unstable_now=function(){return c.now()-f}}var m=[],g=[],_=1,T=null,A=3,k=!1,K=!1,G=!1,W=!1,re=typeof setTimeout=="function"?setTimeout:null,de=typeof clearTimeout=="function"?clearTimeout:null,le=typeof setImmediate<"u"?setImmediate:null;function we(Y){for(var ue=t(g);ue!==null;){if(ue.callback===null)n(g);else if(ue.startTime<=Y)n(g),ue.sortIndex=ue.expirationTime,e(m,ue);else break;ue=t(g)}}function pe(Y){if(G=!1,we(Y),!K)if(t(m)!==null)K=!0,Ie||(Ie=!0,L());else{var ue=t(g);ue!==null&&ct(pe,ue.startTime-Y)}}var Ie=!1,R=-1,S=5,C=-1;function V(){return W?!0:!(i.unstable_now()-C<S)}function O(){if(W=!1,Ie){var Y=i.unstable_now();C=Y;var ue=!0;try{e:{K=!1,G&&(G=!1,de(R),R=-1),k=!0;var Ee=A;try{t:{for(we(Y),T=t(m);T!==null&&!(T.expirationTime>Y&&V());){var qe=T.callback;if(typeof qe=="function"){T.callback=null,A=T.priorityLevel;var D=qe(T.expirationTime<=Y);if(Y=i.unstable_now(),typeof D=="function"){T.callback=D,we(Y),ue=!0;break t}T===t(m)&&n(m),we(Y)}else n(m);T=t(m)}if(T!==null)ue=!0;else{var ee=t(g);ee!==null&&ct(pe,ee.startTime-Y),ue=!1}}break e}finally{T=null,A=Ee,k=!1}ue=void 0}}finally{ue?L():Ie=!1}}}var L;if(typeof le=="function")L=function(){le(O)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,Bt=N.port2;N.port1.onmessage=O,L=function(){Bt.postMessage(null)}}else L=function(){re(O,0)};function ct(Y,ue){R=re(function(){Y(i.unstable_now())},ue)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Y){Y.callback=null},i.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<Y?Math.floor(1e3/Y):5},i.unstable_getCurrentPriorityLevel=function(){return A},i.unstable_next=function(Y){switch(A){case 1:case 2:case 3:var ue=3;break;default:ue=A}var Ee=A;A=ue;try{return Y()}finally{A=Ee}},i.unstable_requestPaint=function(){W=!0},i.unstable_runWithPriority=function(Y,ue){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var Ee=A;A=Y;try{return ue()}finally{A=Ee}},i.unstable_scheduleCallback=function(Y,ue,Ee){var qe=i.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?qe+Ee:qe):Ee=qe,Y){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=Ee+D,Y={id:_++,callback:ue,priorityLevel:Y,startTime:Ee,expirationTime:D,sortIndex:-1},Ee>qe?(Y.sortIndex=Ee,e(g,Y),t(m)===null&&Y===t(g)&&(G?(de(R),R=-1):G=!0,ct(pe,Ee-qe))):(Y.sortIndex=D,e(m,Y),K||k||(K=!0,Ie||(Ie=!0,L()))),Y},i.unstable_shouldYield=V,i.unstable_wrapCallback=function(Y){var ue=A;return function(){var Ee=A;A=ue;try{return Y.apply(this,arguments)}finally{A=Ee}}}}(ny)),ny}var g0;function SC(){return g0||(g0=1,ty.exports=IC()),ty.exports}var ry={exports:{}},_n={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y0;function RC(){if(y0)return _n;y0=1;var i=p_();function e(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,g,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:T==null?null:""+T,children:m,containerInfo:g,implementation:_}}var c=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return _n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,_n.createPortal=function(m,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(m,g,null,_)},_n.flushSync=function(m){var g=c.T,_=n.p;try{if(c.T=null,n.p=2,m)return m()}finally{c.T=g,n.p=_,n.d.f()}},_n.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,n.d.C(m,g))},_n.prefetchDNS=function(m){typeof m=="string"&&n.d.D(m)},_n.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var _=g.as,T=f(_,g.crossOrigin),A=typeof g.integrity=="string"?g.integrity:void 0,k=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?n.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:T,integrity:A,fetchPriority:k}):_==="script"&&n.d.X(m,{crossOrigin:T,integrity:A,fetchPriority:k,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},_n.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=f(g.as,g.crossOrigin);n.d.M(m,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&n.d.M(m)},_n.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,T=f(_,g.crossOrigin);n.d.L(m,_,{crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},_n.preloadModule=function(m,g){if(typeof m=="string")if(g){var _=f(g.as,g.crossOrigin);n.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else n.d.m(m)},_n.requestFormReset=function(m){n.d.r(m)},_n.unstable_batchedUpdates=function(m,g){return m(g)},_n.useFormState=function(m,g,_){return c.H.useFormState(m,g,_)},_n.useFormStatus=function(){return c.H.useHostTransitionStatus()},_n.version="19.1.1",_n}var _0;function xC(){if(_0)return ry.exports;_0=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),ry.exports=RC(),ry.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v0;function CC(){if(v0)return wc;v0=1;var i=SC(),e=p_(),t=xC();function n(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var s=r,o=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(o=s.return),r=s.return;while(r)}return s.tag===3?o:null}function c(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function f(r){if(l(r)!==r)throw Error(n(188))}function m(r){var s=r.alternate;if(!s){if(s=l(r),s===null)throw Error(n(188));return s!==r?null:r}for(var o=r,u=s;;){var d=o.return;if(d===null)break;var p=d.alternate;if(p===null){if(u=d.return,u!==null){o=u;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===o)return f(d),r;if(p===u)return f(d),s;p=p.sibling}throw Error(n(188))}if(o.return!==u.return)o=d,u=p;else{for(var E=!1,b=d.child;b;){if(b===o){E=!0,o=d,u=p;break}if(b===u){E=!0,u=d,o=p;break}b=b.sibling}if(!E){for(b=p.child;b;){if(b===o){E=!0,o=p,u=d;break}if(b===u){E=!0,u=p,o=d;break}b=b.sibling}if(!E)throw Error(n(189))}}if(o.alternate!==u)throw Error(n(190))}if(o.tag!==3)throw Error(n(188));return o.stateNode.current===o?r:s}function g(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=g(r),s!==null)return s;r=r.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),K=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),re=Symbol.for("react.provider"),de=Symbol.for("react.consumer"),le=Symbol.for("react.context"),we=Symbol.for("react.forward_ref"),pe=Symbol.for("react.suspense"),Ie=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function L(r){return r===null||typeof r!="object"?null:(r=O&&r[O]||r["@@iterator"],typeof r=="function"?r:null)}var N=Symbol.for("react.client.reference");function Bt(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===N?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case K:return"Fragment";case W:return"Profiler";case G:return"StrictMode";case pe:return"Suspense";case Ie:return"SuspenseList";case C:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case k:return"Portal";case le:return(r.displayName||"Context")+".Provider";case de:return(r._context.displayName||"Context")+".Consumer";case we:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case R:return s=r.displayName||null,s!==null?s:Bt(r.type)||"Memo";case S:s=r._payload,r=r._init;try{return Bt(r(s))}catch{}}return null}var ct=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ee={pending:!1,data:null,method:null,action:null},qe=[],D=-1;function ee(r){return{current:r}}function ce(r){0>D||(r.current=qe[D],qe[D]=null,D--)}function ie(r,s){D++,qe[D]=r.current,r.current=s}var ae=ee(null),be=ee(null),ye=ee(null),yt=ee(null);function We(r,s){switch(ie(ye,s),ie(be,r),ie(ae,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?Fw(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=Fw(s),r=jw(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}ce(ae),ie(ae,r)}function st(){ce(ae),ce(be),ce(ye)}function qt(r){r.memoizedState!==null&&ie(yt,r);var s=ae.current,o=jw(s,r.type);s!==o&&(ie(be,r),ie(ae,o))}function an(r){be.current===r&&(ce(ae),ce(be)),yt.current===r&&(ce(yt),gc._currentValue=Ee)}var _r=Object.prototype.hasOwnProperty,vr=i.unstable_scheduleCallback,ra=i.unstable_cancelCallback,fu=i.unstable_shouldYield,Qh=i.unstable_requestPaint,tr=i.unstable_now,Jm=i.unstable_getCurrentPriorityLevel,mu=i.unstable_ImmediatePriority,Eo=i.unstable_UserBlockingPriority,ia=i.unstable_NormalPriority,Zm=i.unstable_LowPriority,To=i.unstable_IdlePriority,pu=i.log,Wh=i.unstable_setDisableYieldValue,bt=null,Ye=null;function zn(r){if(typeof pu=="function"&&Wh(r),Ye&&typeof Ye.setStrictMode=="function")try{Ye.setStrictMode(bt,r)}catch{}}var gn=Math.clz32?Math.clz32:sa,Yh=Math.log,ep=Math.LN2;function sa(r){return r>>>=0,r===0?32:31-(Yh(r)/ep|0)|0}var aa=256,oa=4194304;function Er(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function wo(r,s,o){var u=r.pendingLanes;if(u===0)return 0;var d=0,p=r.suspendedLanes,E=r.pingedLanes;r=r.warmLanes;var b=u&134217727;return b!==0?(u=b&~p,u!==0?d=Er(u):(E&=b,E!==0?d=Er(E):o||(o=b&~r,o!==0&&(d=Er(o))))):(b=u&~p,b!==0?d=Er(b):E!==0?d=Er(E):o||(o=u&~r,o!==0&&(d=Er(o)))),d===0?0:s!==0&&s!==d&&(s&p)===0&&(p=d&-d,o=s&-s,p>=o||p===32&&(o&4194048)!==0)?s:d}function la(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function gu(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yu(){var r=aa;return aa<<=1,(aa&4194048)===0&&(aa=256),r}function _u(){var r=oa;return oa<<=1,(oa&62914560)===0&&(oa=4194304),r}function ci(r){for(var s=[],o=0;31>o;o++)s.push(r);return s}function hi(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function vu(r,s,o,u,d,p){var E=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var b=r.entanglements,x=r.expirationTimes,z=r.hiddenUpdates;for(o=E&~o;0<o;){var $=31-gn(o),J=1<<$;b[$]=0,x[$]=-1;var B=z[$];if(B!==null)for(z[$]=null,$=0;$<B.length;$++){var q=B[$];q!==null&&(q.lane&=-536870913)}o&=~J}u!==0&&Pr(r,u,0),p!==0&&d===0&&r.tag!==0&&(r.suspendedLanes|=p&~(E&~s))}function Pr(r,s,o){r.pendingLanes|=s,r.suspendedLanes&=~s;var u=31-gn(s);r.entangledLanes|=s,r.entanglements[u]=r.entanglements[u]|1073741824|o&4194090}function Eu(r,s){var o=r.entangledLanes|=s;for(r=r.entanglements;o;){var u=31-gn(o),d=1<<u;d&s|r[u]&s&&(r[u]|=s),o&=~d}}function Yi(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function bo(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function $i(){var r=ue.p;return r!==0?r:(r=window.event,r===void 0?32:s0(r.type))}function $h(r,s){var o=ue.p;try{return ue.p=r,s()}finally{ue.p=o}}var ht=Math.random().toString(36).slice(2),Gt="__reactFiber$"+ht,Ot="__reactProps$"+ht,nr="__reactContainer$"+ht,Tu="__reactEvents$"+ht,tp="__reactListeners$"+ht,Xi="__reactHandles$"+ht,Xh="__reactResources$"+ht,ua="__reactMarker$"+ht;function Ji(r){delete r[Gt],delete r[Ot],delete r[Tu],delete r[tp],delete r[Xi]}function di(r){var s=r[Gt];if(s)return s;for(var o=r.parentNode;o;){if(s=o[nr]||o[Gt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(r=Gw(r);r!==null;){if(o=r[Gt])return o;r=Gw(r)}return s}r=o,o=r.parentNode}return null}function kr(r){if(r=r[Gt]||r[nr]){var s=r.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return r}return null}function Vr(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(n(33))}function An(r){var s=r[Xh];return s||(s=r[Xh]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Ct(r){r[ua]=!0}var wu=new Set,Ao={};function Tr(r,s){fi(r,s),fi(r+"Capture",s)}function fi(r,s){for(Ao[r]=s,r=0;r<s.length;r++)wu.add(s[r])}var Jh=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Zh={},ca={};function ed(r){return _r.call(ca,r)?!0:_r.call(Zh,r)?!1:Jh.test(r)?ca[r]=!0:(Zh[r]=!0,!1)}function Zi(r,s,o){if(ed(s))if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+o)}}function Or(r,s,o){if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+o)}}function on(r,s,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(s,o,""+u)}}var ha,td;function mi(r){if(ha===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);ha=s&&s[1]||"",td=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ha+r+td}var Io=!1;function So(r,s){if(!r||Io)return"";Io=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(q){var B=q}Reflect.construct(r,[],J)}else{try{J.call()}catch(q){B=q}r.call(J.prototype)}}else{try{throw Error()}catch(q){B=q}(J=r())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(q){if(q&&B&&typeof q.stack=="string")return[q.stack,B.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),E=p[0],b=p[1];if(E&&b){var x=E.split(`
`),z=b.split(`
`);for(d=u=0;u<x.length&&!x[u].includes("DetermineComponentFrameRoot");)u++;for(;d<z.length&&!z[d].includes("DetermineComponentFrameRoot");)d++;if(u===x.length||d===z.length)for(u=x.length-1,d=z.length-1;1<=u&&0<=d&&x[u]!==z[d];)d--;for(;1<=u&&0<=d;u--,d--)if(x[u]!==z[d]){if(u!==1||d!==1)do if(u--,d--,0>d||x[u]!==z[d]){var $=`
`+x[u].replace(" at new "," at ");return r.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",r.displayName)),$}while(1<=u&&0<=d);break}}}finally{Io=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?mi(o):""}function bu(r){switch(r.tag){case 26:case 27:case 5:return mi(r.type);case 16:return mi("Lazy");case 13:return mi("Suspense");case 19:return mi("SuspenseList");case 0:case 15:return So(r.type,!1);case 11:return So(r.type.render,!1);case 1:return So(r.type,!0);case 31:return mi("Activity");default:return""}}function Ro(r){try{var s="";do s+=bu(r),r=r.return;while(r);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function In(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Au(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function np(r){var s=Au(r)?"checked":"value",o=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),u=""+r[s];if(!r.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var d=o.get,p=o.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return d.call(this)},set:function(E){u=""+E,p.call(this,E)}}),Object.defineProperty(r,s,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(E){u=""+E},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function xo(r){r._valueTracker||(r._valueTracker=np(r))}function Iu(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return r&&(u=Au(r)?r.checked?"true":"false":r.value),r=u,r!==o?(s.setValue(r),!0):!1}function da(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var rp=/[\n"\\]/g;function Mt(r){return r.replace(rp,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Bn(r,s,o,u,d,p,E,b){r.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?r.type=E:r.removeAttribute("type"),s!=null?E==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+In(s)):r.value!==""+In(s)&&(r.value=""+In(s)):E!=="submit"&&E!=="reset"||r.removeAttribute("value"),s!=null?es(r,E,In(s)):o!=null?es(r,E,In(o)):u!=null&&r.removeAttribute("value"),d==null&&p!=null&&(r.defaultChecked=!!p),d!=null&&(r.checked=d&&typeof d!="function"&&typeof d!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?r.name=""+In(b):r.removeAttribute("name")}function fa(r,s,o,u,d,p,E,b){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(r.type=p),s!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||s!=null))return;o=o!=null?""+In(o):"",s=s!=null?""+In(s):o,b||s===r.value||(r.value=s),r.defaultValue=s}u=u??d,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=b?r.checked:!!u,r.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(r.name=E)}function es(r,s,o){s==="number"&&da(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function pi(r,s,o,u){if(r=r.options,s){s={};for(var d=0;d<o.length;d++)s["$"+o[d]]=!0;for(o=0;o<r.length;o++)d=s.hasOwnProperty("$"+r[o].value),r[o].selected!==d&&(r[o].selected=d),d&&u&&(r[o].defaultSelected=!0)}else{for(o=""+In(o),s=null,d=0;d<r.length;d++){if(r[d].value===o){r[d].selected=!0,u&&(r[d].defaultSelected=!0);return}s!==null||r[d].disabled||(s=r[d])}s!==null&&(s.selected=!0)}}function et(r,s,o){if(s!=null&&(s=""+In(s),s!==r.value&&(r.value=s),o==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=o!=null?""+In(o):""}function ma(r,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(n(92));if(ct(u)){if(1<u.length)throw Error(n(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=In(s),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u)}function rr(r,s){if(s){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=s;return}}r.textContent=s}var pa=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function nd(r,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":u?r.setProperty(s,o):typeof o!="number"||o===0||pa.has(s)?s==="float"?r.cssFloat=o:r[s]=(""+o).trim():r[s]=o+"px"}function Su(r,s,o){if(s!=null&&typeof s!="object")throw Error(n(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var d in s)u=s[d],s.hasOwnProperty(d)&&o[d]!==u&&nd(r,d,u)}else for(var p in s)s.hasOwnProperty(p)&&nd(r,p,s[p])}function Ru(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ip=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),sp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Co(r){return sp.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var gi=null;function ir(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var yi=null,_i=null;function xu(r){var s=kr(r);if(s&&(r=s.stateNode)){var o=r[Ot]||null;e:switch(r=s.stateNode,s.type){case"input":if(Bn(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Mt(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==r&&u.form===r.form){var d=u[Ot]||null;if(!d)throw Error(n(90));Bn(u,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===r.form&&Iu(u)}break e;case"textarea":et(r,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&pi(r,!!o.multiple,s,!1)}}}var Mr=!1;function rd(r,s,o){if(Mr)return r(s,o);Mr=!0;try{var u=r(s);return u}finally{if(Mr=!1,(yi!==null||_i!==null)&&($d(),yi&&(s=yi,r=_i,_i=yi=null,xu(s),r)))for(s=0;s<r.length;s++)xu(r[s])}}function ga(r,s){var o=r.stateNode;if(o===null)return null;var u=o[Ot]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(n(231,s,typeof o));return o}var wr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sr=!1;if(wr)try{var ya={};Object.defineProperty(ya,"passive",{get:function(){sr=!0}}),window.addEventListener("test",ya,ya),window.removeEventListener("test",ya,ya)}catch{sr=!1}var Lr=null,ts=null,vi=null;function Cu(){if(vi)return vi;var r,s=ts,o=s.length,u,d="value"in Lr?Lr.value:Lr.textContent,p=d.length;for(r=0;r<o&&s[r]===d[r];r++);var E=o-r;for(u=1;u<=E&&s[o-u]===d[p-u];u++);return vi=d.slice(r,1<u?1-u:void 0)}function Ur(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Fr(){return!0}function Nu(){return!1}function Xt(r){function s(o,u,d,p,E){this._reactName=o,this._targetInst=d,this.type=u,this.nativeEvent=p,this.target=E,this.currentTarget=null;for(var b in r)r.hasOwnProperty(b)&&(o=r[b],this[b]=o?o(p):p[b]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Fr:Nu,this.isPropagationStopped=Nu,this}return _(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Fr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Fr)},persist:function(){},isPersistent:Fr}),s}var Qe={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},No=Xt(Qe),_a=_({},Qe,{view:0,detail:0}),id=Xt(_a),Do,Po,jr,va=_({},_a,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wa,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==jr&&(jr&&r.type==="mousemove"?(Do=r.screenX-jr.screenX,Po=r.screenY-jr.screenY):Po=Do=0,jr=r),Do)},movementY:function(r){return"movementY"in r?r.movementY:Po}}),ar=Xt(va),sd=_({},va,{dataTransfer:0}),ap=Xt(sd),Ea=_({},_a,{relatedTarget:0}),ko=Xt(Ea),Du=_({},Qe,{animationName:0,elapsedTime:0,pseudoElement:0}),Vo=Xt(Du),ad=_({},Qe,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Oo=Xt(ad),op=_({},Qe,{data:0}),Pu=Xt(op),Ta={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},od={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ld={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ku(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=ld[r])?!!s[r]:!1}function wa(){return ku}var ud=_({},_a,{key:function(r){if(r.key){var s=Ta[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Ur(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?od[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wa,charCode:function(r){return r.type==="keypress"?Ur(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ur(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Mo=Xt(ud),cd=_({},va,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vu=Xt(cd),Ei=_({},_a,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wa}),hd=Xt(Ei),dd=_({},Qe,{propertyName:0,elapsedTime:0,pseudoElement:0}),fd=Xt(dd),md=_({},va,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Lo=Xt(md),Sn=_({},Qe,{newState:0,oldState:0}),pd=Xt(Sn),gd=[9,13,27,32],zr=wr&&"CompositionEvent"in window,h=null;wr&&"documentMode"in document&&(h=document.documentMode);var y=wr&&"TextEvent"in window&&!h,v=wr&&(!zr||h&&8<h&&11>=h),I=" ",U=!1;function Q(r,s){switch(r){case"keyup":return gd.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function se(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Fe=!1;function Ht(r,s){switch(r){case"compositionend":return se(s);case"keypress":return s.which!==32?null:(U=!0,I);case"textInput":return r=s.data,r===I&&U?null:r;default:return null}}function je(r,s){if(Fe)return r==="compositionend"||!zr&&Q(r,s)?(r=Cu(),vi=ts=Lr=null,Fe=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return v&&s.locale!=="ko"?null:s.data;default:return null}}var Jt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kt(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!Jt[r.type]:s==="textarea"}function Ti(r,s,o,u){yi?_i?_i.push(u):_i=[u]:yi=u,s=nf(s,"onChange"),0<s.length&&(o=new No("onChange","change",null,o,u),r.push({event:o,listeners:s}))}var ln=null,Br=null;function Ou(r){Vw(r,0)}function yd(r){var s=Vr(r);if(Iu(s))return r}function tE(r,s){if(r==="change")return s}var nE=!1;if(wr){var lp;if(wr){var up="oninput"in document;if(!up){var rE=document.createElement("div");rE.setAttribute("oninput","return;"),up=typeof rE.oninput=="function"}lp=up}else lp=!1;nE=lp&&(!document.documentMode||9<document.documentMode)}function iE(){ln&&(ln.detachEvent("onpropertychange",sE),Br=ln=null)}function sE(r){if(r.propertyName==="value"&&yd(Br)){var s=[];Ti(s,Br,r,ir(r)),rd(Ou,s)}}function X1(r,s,o){r==="focusin"?(iE(),ln=s,Br=o,ln.attachEvent("onpropertychange",sE)):r==="focusout"&&iE()}function J1(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return yd(Br)}function Z1(r,s){if(r==="click")return yd(s)}function ex(r,s){if(r==="input"||r==="change")return yd(s)}function tx(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var qn=typeof Object.is=="function"?Object.is:tx;function Mu(r,s){if(qn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var o=Object.keys(r),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var d=o[u];if(!_r.call(s,d)||!qn(r[d],s[d]))return!1}return!0}function aE(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function oE(r,s){var o=aE(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=s&&u>=s)return{node:o,offset:s-r};r=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=aE(o)}}function lE(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?lE(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function uE(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=da(r.document);s instanceof r.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)r=s.contentWindow;else break;s=da(r.document)}return s}function cp(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var nx=wr&&"documentMode"in document&&11>=document.documentMode,Uo=null,hp=null,Lu=null,dp=!1;function cE(r,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;dp||Uo==null||Uo!==da(u)||(u=Uo,"selectionStart"in u&&cp(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Lu&&Mu(Lu,u)||(Lu=u,u=nf(hp,"onSelect"),0<u.length&&(s=new No("onSelect","select",null,s,o),r.push({event:s,listeners:u}),s.target=Uo)))}function ba(r,s){var o={};return o[r.toLowerCase()]=s.toLowerCase(),o["Webkit"+r]="webkit"+s,o["Moz"+r]="moz"+s,o}var Fo={animationend:ba("Animation","AnimationEnd"),animationiteration:ba("Animation","AnimationIteration"),animationstart:ba("Animation","AnimationStart"),transitionrun:ba("Transition","TransitionRun"),transitionstart:ba("Transition","TransitionStart"),transitioncancel:ba("Transition","TransitionCancel"),transitionend:ba("Transition","TransitionEnd")},fp={},hE={};wr&&(hE=document.createElement("div").style,"AnimationEvent"in window||(delete Fo.animationend.animation,delete Fo.animationiteration.animation,delete Fo.animationstart.animation),"TransitionEvent"in window||delete Fo.transitionend.transition);function Aa(r){if(fp[r])return fp[r];if(!Fo[r])return r;var s=Fo[r],o;for(o in s)if(s.hasOwnProperty(o)&&o in hE)return fp[r]=s[o];return r}var dE=Aa("animationend"),fE=Aa("animationiteration"),mE=Aa("animationstart"),rx=Aa("transitionrun"),ix=Aa("transitionstart"),sx=Aa("transitioncancel"),pE=Aa("transitionend"),gE=new Map,mp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");mp.push("scrollEnd");function br(r,s){gE.set(r,s),Tr(s,[r])}var yE=new WeakMap;function or(r,s){if(typeof r=="object"&&r!==null){var o=yE.get(r);return o!==void 0?o:(s={value:r,source:s,stack:Ro(s)},yE.set(r,s),s)}return{value:r,source:s,stack:Ro(s)}}var lr=[],jo=0,pp=0;function _d(){for(var r=jo,s=pp=jo=0;s<r;){var o=lr[s];lr[s++]=null;var u=lr[s];lr[s++]=null;var d=lr[s];lr[s++]=null;var p=lr[s];if(lr[s++]=null,u!==null&&d!==null){var E=u.pending;E===null?d.next=d:(d.next=E.next,E.next=d),u.pending=d}p!==0&&_E(o,d,p)}}function vd(r,s,o,u){lr[jo++]=r,lr[jo++]=s,lr[jo++]=o,lr[jo++]=u,pp|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function gp(r,s,o,u){return vd(r,s,o,u),Ed(r)}function zo(r,s){return vd(r,null,null,s),Ed(r)}function _E(r,s,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var d=!1,p=r.return;p!==null;)p.childLanes|=o,u=p.alternate,u!==null&&(u.childLanes|=o),p.tag===22&&(r=p.stateNode,r===null||r._visibility&1||(d=!0)),r=p,p=p.return;return r.tag===3?(p=r.stateNode,d&&s!==null&&(d=31-gn(o),r=p.hiddenUpdates,u=r[d],u===null?r[d]=[s]:u.push(s),s.lane=o|536870912),p):null}function Ed(r){if(50<lc)throw lc=0,wg=null,Error(n(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var Bo={};function ax(r,s,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(r,s,o,u){return new ax(r,s,o,u)}function yp(r){return r=r.prototype,!(!r||!r.isReactComponent)}function wi(r,s){var o=r.alternate;return o===null?(o=Gn(r.tag,s,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=s,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,s=r.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function vE(r,s){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,s=o.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function Td(r,s,o,u,d,p){var E=0;if(u=r,typeof r=="function")yp(r)&&(E=1);else if(typeof r=="string")E=lC(r,o,ae.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case C:return r=Gn(31,o,s,d),r.elementType=C,r.lanes=p,r;case K:return Ia(o.children,d,p,s);case G:E=8,d|=24;break;case W:return r=Gn(12,o,s,d|2),r.elementType=W,r.lanes=p,r;case pe:return r=Gn(13,o,s,d),r.elementType=pe,r.lanes=p,r;case Ie:return r=Gn(19,o,s,d),r.elementType=Ie,r.lanes=p,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case re:case le:E=10;break e;case de:E=9;break e;case we:E=11;break e;case R:E=14;break e;case S:E=16,u=null;break e}E=29,o=Error(n(130,r===null?"null":typeof r,"")),u=null}return s=Gn(E,o,s,d),s.elementType=r,s.type=u,s.lanes=p,s}function Ia(r,s,o,u){return r=Gn(7,r,u,s),r.lanes=o,r}function _p(r,s,o){return r=Gn(6,r,null,s),r.lanes=o,r}function vp(r,s,o){return s=Gn(4,r.children!==null?r.children:[],r.key,s),s.lanes=o,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var qo=[],Go=0,wd=null,bd=0,ur=[],cr=0,Sa=null,bi=1,Ai="";function Ra(r,s){qo[Go++]=bd,qo[Go++]=wd,wd=r,bd=s}function EE(r,s,o){ur[cr++]=bi,ur[cr++]=Ai,ur[cr++]=Sa,Sa=r;var u=bi;r=Ai;var d=32-gn(u)-1;u&=~(1<<d),o+=1;var p=32-gn(s)+d;if(30<p){var E=d-d%5;p=(u&(1<<E)-1).toString(32),u>>=E,d-=E,bi=1<<32-gn(s)+d|o<<d|u,Ai=p+r}else bi=1<<p|o<<d|u,Ai=r}function Ep(r){r.return!==null&&(Ra(r,1),EE(r,1,0))}function Tp(r){for(;r===wd;)wd=qo[--Go],qo[Go]=null,bd=qo[--Go],qo[Go]=null;for(;r===Sa;)Sa=ur[--cr],ur[cr]=null,Ai=ur[--cr],ur[cr]=null,bi=ur[--cr],ur[cr]=null}var Rn=null,At=null,Ke=!1,xa=null,qr=!1,wp=Error(n(519));function Ca(r){var s=Error(n(418,""));throw ju(or(s,r)),wp}function TE(r){var s=r.stateNode,o=r.type,u=r.memoizedProps;switch(s[Gt]=r,s[Ot]=u,o){case"dialog":Oe("cancel",s),Oe("close",s);break;case"iframe":case"object":case"embed":Oe("load",s);break;case"video":case"audio":for(o=0;o<cc.length;o++)Oe(cc[o],s);break;case"source":Oe("error",s);break;case"img":case"image":case"link":Oe("error",s),Oe("load",s);break;case"details":Oe("toggle",s);break;case"input":Oe("invalid",s),fa(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),xo(s);break;case"select":Oe("invalid",s);break;case"textarea":Oe("invalid",s),ma(s,u.value,u.defaultValue,u.children),xo(s)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||Uw(s.textContent,o)?(u.popover!=null&&(Oe("beforetoggle",s),Oe("toggle",s)),u.onScroll!=null&&Oe("scroll",s),u.onScrollEnd!=null&&Oe("scrollend",s),u.onClick!=null&&(s.onclick=rf),s=!0):s=!1,s||Ca(r)}function wE(r){for(Rn=r.return;Rn;)switch(Rn.tag){case 5:case 13:qr=!1;return;case 27:case 3:qr=!0;return;default:Rn=Rn.return}}function Uu(r){if(r!==Rn)return!1;if(!Ke)return wE(r),Ke=!0,!1;var s=r.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||Ug(r.type,r.memoizedProps)),o=!o),o&&At&&Ca(r),wE(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8)if(o=r.data,o==="/$"){if(s===0){At=Ir(r.nextSibling);break e}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;r=r.nextSibling}At=null}}else s===27?(s=At,ys(r.type)?(r=Bg,Bg=null,At=r):At=s):At=Rn?Ir(r.stateNode.nextSibling):null;return!0}function Fu(){At=Rn=null,Ke=!1}function bE(){var r=xa;return r!==null&&(On===null?On=r:On.push.apply(On,r),xa=null),r}function ju(r){xa===null?xa=[r]:xa.push(r)}var bp=ee(null),Na=null,Ii=null;function ns(r,s,o){ie(bp,s._currentValue),s._currentValue=o}function Si(r){r._currentValue=bp.current,ce(bp)}function Ap(r,s,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),r===o)break;r=r.return}}function Ip(r,s,o,u){var d=r.child;for(d!==null&&(d.return=r);d!==null;){var p=d.dependencies;if(p!==null){var E=d.child;p=p.firstContext;e:for(;p!==null;){var b=p;p=d;for(var x=0;x<s.length;x++)if(b.context===s[x]){p.lanes|=o,b=p.alternate,b!==null&&(b.lanes|=o),Ap(p.return,o,r),u||(E=null);break e}p=b.next}}else if(d.tag===18){if(E=d.return,E===null)throw Error(n(341));E.lanes|=o,p=E.alternate,p!==null&&(p.lanes|=o),Ap(E,o,r),E=null}else E=d.child;if(E!==null)E.return=d;else for(E=d;E!==null;){if(E===r){E=null;break}if(d=E.sibling,d!==null){d.return=E.return,E=d;break}E=E.return}d=E}}function zu(r,s,o,u){r=null;for(var d=s,p=!1;d!==null;){if(!p){if((d.flags&524288)!==0)p=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var E=d.alternate;if(E===null)throw Error(n(387));if(E=E.memoizedProps,E!==null){var b=d.type;qn(d.pendingProps.value,E.value)||(r!==null?r.push(b):r=[b])}}else if(d===yt.current){if(E=d.alternate,E===null)throw Error(n(387));E.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(r!==null?r.push(gc):r=[gc])}d=d.return}r!==null&&Ip(s,r,o,u),s.flags|=262144}function Ad(r){for(r=r.firstContext;r!==null;){if(!qn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Da(r){Na=r,Ii=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function yn(r){return AE(Na,r)}function Id(r,s){return Na===null&&Da(r),AE(r,s)}function AE(r,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},Ii===null){if(r===null)throw Error(n(308));Ii=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else Ii=Ii.next=s;return o}var ox=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){s.aborted=!0,r.forEach(function(o){return o()})}},lx=i.unstable_scheduleCallback,ux=i.unstable_NormalPriority,Qt={$$typeof:le,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Sp(){return{controller:new ox,data:new Map,refCount:0}}function Bu(r){r.refCount--,r.refCount===0&&lx(ux,function(){r.controller.abort()})}var qu=null,Rp=0,Ho=0,Ko=null;function cx(r,s){if(qu===null){var o=qu=[];Rp=0,Ho=Cg(),Ko={status:"pending",value:void 0,then:function(u){o.push(u)}}}return Rp++,s.then(IE,IE),s}function IE(){if(--Rp===0&&qu!==null){Ko!==null&&(Ko.status="fulfilled");var r=qu;qu=null,Ho=0,Ko=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function hx(r,s){var o=[],u={status:"pending",value:null,reason:null,then:function(d){o.push(d)}};return r.then(function(){u.status="fulfilled",u.value=s;for(var d=0;d<o.length;d++)(0,o[d])(s)},function(d){for(u.status="rejected",u.reason=d,d=0;d<o.length;d++)(0,o[d])(void 0)}),u}var SE=Y.S;Y.S=function(r,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&cx(r,s),SE!==null&&SE(r,s)};var Pa=ee(null);function xp(){var r=Pa.current;return r!==null?r:at.pooledCache}function Sd(r,s){s===null?ie(Pa,Pa.current):ie(Pa,s.pool)}function RE(){var r=xp();return r===null?null:{parent:Qt._currentValue,pool:r}}var Gu=Error(n(460)),xE=Error(n(474)),Rd=Error(n(542)),Cp={then:function(){}};function CE(r){return r=r.status,r==="fulfilled"||r==="rejected"}function xd(){}function NE(r,s,o){switch(o=r[o],o===void 0?r.push(s):o!==s&&(s.then(xd,xd),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,PE(r),r;default:if(typeof s.status=="string")s.then(xd,xd);else{if(r=at,r!==null&&100<r.shellSuspendCounter)throw Error(n(482));r=s,r.status="pending",r.then(function(u){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=u}},function(u){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,PE(r),r}throw Hu=s,Gu}}var Hu=null;function DE(){if(Hu===null)throw Error(n(459));var r=Hu;return Hu=null,r}function PE(r){if(r===Gu||r===Rd)throw Error(n(483))}var rs=!1;function Np(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Dp(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function is(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function ss(r,s,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,($e&2)!==0){var d=u.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),u.pending=s,s=Ed(r),_E(r,null,o),s}return vd(r,u,s,o),Ed(r)}function Ku(r,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,Eu(r,o)}}function Pp(r,s){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var d=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var E={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?d=p=E:p=p.next=E,o=o.next}while(o!==null);p===null?d=p=s:p=p.next=s}else d=p=s;o={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=s:r.next=s,o.lastBaseUpdate=s}var kp=!1;function Qu(){if(kp){var r=Ko;if(r!==null)throw r}}function Wu(r,s,o,u){kp=!1;var d=r.updateQueue;rs=!1;var p=d.firstBaseUpdate,E=d.lastBaseUpdate,b=d.shared.pending;if(b!==null){d.shared.pending=null;var x=b,z=x.next;x.next=null,E===null?p=z:E.next=z,E=x;var $=r.alternate;$!==null&&($=$.updateQueue,b=$.lastBaseUpdate,b!==E&&(b===null?$.firstBaseUpdate=z:b.next=z,$.lastBaseUpdate=x))}if(p!==null){var J=d.baseState;E=0,$=z=x=null,b=p;do{var B=b.lane&-536870913,q=B!==b.lane;if(q?(ze&B)===B:(u&B)===B){B!==0&&B===Ho&&(kp=!0),$!==null&&($=$.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var xe=r,Se=b;B=s;var rt=o;switch(Se.tag){case 1:if(xe=Se.payload,typeof xe=="function"){J=xe.call(rt,J,B);break e}J=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=Se.payload,B=typeof xe=="function"?xe.call(rt,J,B):xe,B==null)break e;J=_({},J,B);break e;case 2:rs=!0}}B=b.callback,B!==null&&(r.flags|=64,q&&(r.flags|=8192),q=d.callbacks,q===null?d.callbacks=[B]:q.push(B))}else q={lane:B,tag:b.tag,payload:b.payload,callback:b.callback,next:null},$===null?(z=$=q,x=J):$=$.next=q,E|=B;if(b=b.next,b===null){if(b=d.shared.pending,b===null)break;q=b,b=q.next,q.next=null,d.lastBaseUpdate=q,d.shared.pending=null}}while(!0);$===null&&(x=J),d.baseState=x,d.firstBaseUpdate=z,d.lastBaseUpdate=$,p===null&&(d.shared.lanes=0),fs|=E,r.lanes=E,r.memoizedState=J}}function kE(r,s){if(typeof r!="function")throw Error(n(191,r));r.call(s)}function VE(r,s){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)kE(o[r],s)}var Qo=ee(null),Cd=ee(0);function OE(r,s){r=ki,ie(Cd,r),ie(Qo,s),ki=r|s.baseLanes}function Vp(){ie(Cd,ki),ie(Qo,Qo.current)}function Op(){ki=Cd.current,ce(Qo),ce(Cd)}var as=0,Pe=null,tt=null,Lt=null,Nd=!1,Wo=!1,ka=!1,Dd=0,Yu=0,Yo=null,dx=0;function Nt(){throw Error(n(321))}function Mp(r,s){if(s===null)return!1;for(var o=0;o<s.length&&o<r.length;o++)if(!qn(r[o],s[o]))return!1;return!0}function Lp(r,s,o,u,d,p){return as=p,Pe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Y.H=r===null||r.memoizedState===null?_T:vT,ka=!1,p=o(u,d),ka=!1,Wo&&(p=LE(s,o,u,d)),ME(r),p}function ME(r){Y.H=Ld;var s=tt!==null&&tt.next!==null;if(as=0,Lt=tt=Pe=null,Nd=!1,Yu=0,Yo=null,s)throw Error(n(300));r===null||Zt||(r=r.dependencies,r!==null&&Ad(r)&&(Zt=!0))}function LE(r,s,o,u){Pe=r;var d=0;do{if(Wo&&(Yo=null),Yu=0,Wo=!1,25<=d)throw Error(n(301));if(d+=1,Lt=tt=null,r.updateQueue!=null){var p=r.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}Y.H=vx,p=s(o,u)}while(Wo);return p}function fx(){var r=Y.H,s=r.useState()[0];return s=typeof s.then=="function"?$u(s):s,r=r.useState()[0],(tt!==null?tt.memoizedState:null)!==r&&(Pe.flags|=1024),s}function Up(){var r=Dd!==0;return Dd=0,r}function Fp(r,s,o){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~o}function jp(r){if(Nd){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Nd=!1}as=0,Lt=tt=Pe=null,Wo=!1,Yu=Dd=0,Yo=null}function kn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?Pe.memoizedState=Lt=r:Lt=Lt.next=r,Lt}function Ut(){if(tt===null){var r=Pe.alternate;r=r!==null?r.memoizedState:null}else r=tt.next;var s=Lt===null?Pe.memoizedState:Lt.next;if(s!==null)Lt=s,tt=r;else{if(r===null)throw Pe.alternate===null?Error(n(467)):Error(n(310));tt=r,r={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},Lt===null?Pe.memoizedState=Lt=r:Lt=Lt.next=r}return Lt}function zp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $u(r){var s=Yu;return Yu+=1,Yo===null&&(Yo=[]),r=NE(Yo,r,s),s=Pe,(Lt===null?s.memoizedState:Lt.next)===null&&(s=s.alternate,Y.H=s===null||s.memoizedState===null?_T:vT),r}function Pd(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return $u(r);if(r.$$typeof===le)return yn(r)}throw Error(n(438,String(r)))}function Bp(r){var s=null,o=Pe.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=Pe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=zp(),Pe.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(r),u=0;u<r;u++)o[u]=V;return s.index++,o}function Ri(r,s){return typeof s=="function"?s(r):s}function kd(r){var s=Ut();return qp(s,tt,r)}function qp(r,s,o){var u=r.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=o;var d=r.baseQueue,p=u.pending;if(p!==null){if(d!==null){var E=d.next;d.next=p.next,p.next=E}s.baseQueue=d=p,u.pending=null}if(p=r.baseState,d===null)r.memoizedState=p;else{s=d.next;var b=E=null,x=null,z=s,$=!1;do{var J=z.lane&-536870913;if(J!==z.lane?(ze&J)===J:(as&J)===J){var B=z.revertLane;if(B===0)x!==null&&(x=x.next={lane:0,revertLane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),J===Ho&&($=!0);else if((as&B)===B){z=z.next,B===Ho&&($=!0);continue}else J={lane:0,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},x===null?(b=x=J,E=p):x=x.next=J,Pe.lanes|=B,fs|=B;J=z.action,ka&&o(p,J),p=z.hasEagerState?z.eagerState:o(p,J)}else B={lane:J,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},x===null?(b=x=B,E=p):x=x.next=B,Pe.lanes|=J,fs|=J;z=z.next}while(z!==null&&z!==s);if(x===null?E=p:x.next=b,!qn(p,r.memoizedState)&&(Zt=!0,$&&(o=Ko,o!==null)))throw o;r.memoizedState=p,r.baseState=E,r.baseQueue=x,u.lastRenderedState=p}return d===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Gp(r){var s=Ut(),o=s.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=r;var u=o.dispatch,d=o.pending,p=s.memoizedState;if(d!==null){o.pending=null;var E=d=d.next;do p=r(p,E.action),E=E.next;while(E!==d);qn(p,s.memoizedState)||(Zt=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),o.lastRenderedState=p}return[p,u]}function UE(r,s,o){var u=Pe,d=Ut(),p=Ke;if(p){if(o===void 0)throw Error(n(407));o=o()}else o=s();var E=!qn((tt||d).memoizedState,o);E&&(d.memoizedState=o,Zt=!0),d=d.queue;var b=zE.bind(null,u,d,r);if(Xu(2048,8,b,[r]),d.getSnapshot!==s||E||Lt!==null&&Lt.memoizedState.tag&1){if(u.flags|=2048,$o(9,Vd(),jE.bind(null,u,d,o,s),null),at===null)throw Error(n(349));p||(as&124)!==0||FE(u,s,o)}return o}function FE(r,s,o){r.flags|=16384,r={getSnapshot:s,value:o},s=Pe.updateQueue,s===null?(s=zp(),Pe.updateQueue=s,s.stores=[r]):(o=s.stores,o===null?s.stores=[r]:o.push(r))}function jE(r,s,o,u){s.value=o,s.getSnapshot=u,BE(s)&&qE(r)}function zE(r,s,o){return o(function(){BE(s)&&qE(r)})}function BE(r){var s=r.getSnapshot;r=r.value;try{var o=s();return!qn(r,o)}catch{return!0}}function qE(r){var s=zo(r,2);s!==null&&Yn(s,r,2)}function Hp(r){var s=kn();if(typeof r=="function"){var o=r;if(r=o(),ka){zn(!0);try{o()}finally{zn(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ri,lastRenderedState:r},s}function GE(r,s,o,u){return r.baseState=o,qp(r,tt,typeof u=="function"?u:Ri)}function mx(r,s,o,u,d){if(Md(r))throw Error(n(485));if(r=s.action,r!==null){var p={payload:d,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){p.listeners.push(E)}};Y.T!==null?o(!0):p.isTransition=!1,u(p),o=s.pending,o===null?(p.next=s.pending=p,HE(s,p)):(p.next=o.next,s.pending=o.next=p)}}function HE(r,s){var o=s.action,u=s.payload,d=r.state;if(s.isTransition){var p=Y.T,E={};Y.T=E;try{var b=o(d,u),x=Y.S;x!==null&&x(E,b),KE(r,s,b)}catch(z){Kp(r,s,z)}finally{Y.T=p}}else try{p=o(d,u),KE(r,s,p)}catch(z){Kp(r,s,z)}}function KE(r,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){QE(r,s,u)},function(u){return Kp(r,s,u)}):QE(r,s,o)}function QE(r,s,o){s.status="fulfilled",s.value=o,WE(s),r.state=o,s=r.pending,s!==null&&(o=s.next,o===s?r.pending=null:(o=o.next,s.next=o,HE(r,o)))}function Kp(r,s,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,WE(s),s=s.next;while(s!==u)}r.action=null}function WE(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function YE(r,s){return s}function $E(r,s){if(Ke){var o=at.formState;if(o!==null){e:{var u=Pe;if(Ke){if(At){t:{for(var d=At,p=qr;d.nodeType!==8;){if(!p){d=null;break t}if(d=Ir(d.nextSibling),d===null){d=null;break t}}p=d.data,d=p==="F!"||p==="F"?d:null}if(d){At=Ir(d.nextSibling),u=d.data==="F!";break e}}Ca(u)}u=!1}u&&(s=o[0])}}return o=kn(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:YE,lastRenderedState:s},o.queue=u,o=pT.bind(null,Pe,u),u.dispatch=o,u=Hp(!1),p=Xp.bind(null,Pe,!1,u.queue),u=kn(),d={state:s,dispatch:null,action:r,pending:null},u.queue=d,o=mx.bind(null,Pe,d,p,o),d.dispatch=o,u.memoizedState=r,[s,o,!1]}function XE(r){var s=Ut();return JE(s,tt,r)}function JE(r,s,o){if(s=qp(r,s,YE)[0],r=kd(Ri)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=$u(s)}catch(E){throw E===Gu?Rd:E}else u=s;s=Ut();var d=s.queue,p=d.dispatch;return o!==s.memoizedState&&(Pe.flags|=2048,$o(9,Vd(),px.bind(null,d,o),null)),[u,p,r]}function px(r,s){r.action=s}function ZE(r){var s=Ut(),o=tt;if(o!==null)return JE(s,o,r);Ut(),s=s.memoizedState,o=Ut();var u=o.queue.dispatch;return o.memoizedState=r,[s,u,!1]}function $o(r,s,o,u){return r={tag:r,create:o,deps:u,inst:s,next:null},s=Pe.updateQueue,s===null&&(s=zp(),Pe.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,s.lastEffect=r),r}function Vd(){return{destroy:void 0,resource:void 0}}function eT(){return Ut().memoizedState}function Od(r,s,o,u){var d=kn();u=u===void 0?null:u,Pe.flags|=r,d.memoizedState=$o(1|s,Vd(),o,u)}function Xu(r,s,o,u){var d=Ut();u=u===void 0?null:u;var p=d.memoizedState.inst;tt!==null&&u!==null&&Mp(u,tt.memoizedState.deps)?d.memoizedState=$o(s,p,o,u):(Pe.flags|=r,d.memoizedState=$o(1|s,p,o,u))}function tT(r,s){Od(8390656,8,r,s)}function nT(r,s){Xu(2048,8,r,s)}function rT(r,s){return Xu(4,2,r,s)}function iT(r,s){return Xu(4,4,r,s)}function sT(r,s){if(typeof s=="function"){r=r();var o=s(r);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function aT(r,s,o){o=o!=null?o.concat([r]):null,Xu(4,4,sT.bind(null,s,r),o)}function Qp(){}function oT(r,s){var o=Ut();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&Mp(s,u[1])?u[0]:(o.memoizedState=[r,s],r)}function lT(r,s){var o=Ut();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&Mp(s,u[1]))return u[0];if(u=r(),ka){zn(!0);try{r()}finally{zn(!1)}}return o.memoizedState=[u,s],u}function Wp(r,s,o){return o===void 0||(as&1073741824)!==0?r.memoizedState=s:(r.memoizedState=o,r=hw(),Pe.lanes|=r,fs|=r,o)}function uT(r,s,o,u){return qn(o,s)?o:Qo.current!==null?(r=Wp(r,o,u),qn(r,s)||(Zt=!0),r):(as&42)===0?(Zt=!0,r.memoizedState=o):(r=hw(),Pe.lanes|=r,fs|=r,s)}function cT(r,s,o,u,d){var p=ue.p;ue.p=p!==0&&8>p?p:8;var E=Y.T,b={};Y.T=b,Xp(r,!1,s,o);try{var x=d(),z=Y.S;if(z!==null&&z(b,x),x!==null&&typeof x=="object"&&typeof x.then=="function"){var $=hx(x,u);Ju(r,s,$,Wn(r))}else Ju(r,s,u,Wn(r))}catch(J){Ju(r,s,{then:function(){},status:"rejected",reason:J},Wn())}finally{ue.p=p,Y.T=E}}function gx(){}function Yp(r,s,o,u){if(r.tag!==5)throw Error(n(476));var d=hT(r).queue;cT(r,d,s,Ee,o===null?gx:function(){return dT(r),o(u)})}function hT(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:Ee,baseState:Ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ri,lastRenderedState:Ee},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ri,lastRenderedState:o},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function dT(r){var s=hT(r).next.queue;Ju(r,s,{},Wn())}function $p(){return yn(gc)}function fT(){return Ut().memoizedState}function mT(){return Ut().memoizedState}function yx(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var o=Wn();r=is(o);var u=ss(s,r,o);u!==null&&(Yn(u,s,o),Ku(u,s,o)),s={cache:Sp()},r.payload=s;return}s=s.return}}function _x(r,s,o){var u=Wn();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Md(r)?gT(s,o):(o=gp(r,s,o,u),o!==null&&(Yn(o,r,u),yT(o,s,u)))}function pT(r,s,o){var u=Wn();Ju(r,s,o,u)}function Ju(r,s,o,u){var d={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Md(r))gT(s,d);else{var p=r.alternate;if(r.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var E=s.lastRenderedState,b=p(E,o);if(d.hasEagerState=!0,d.eagerState=b,qn(b,E))return vd(r,s,d,0),at===null&&_d(),!1}catch{}finally{}if(o=gp(r,s,d,u),o!==null)return Yn(o,r,u),yT(o,s,u),!0}return!1}function Xp(r,s,o,u){if(u={lane:2,revertLane:Cg(),action:u,hasEagerState:!1,eagerState:null,next:null},Md(r)){if(s)throw Error(n(479))}else s=gp(r,o,u,2),s!==null&&Yn(s,r,2)}function Md(r){var s=r.alternate;return r===Pe||s!==null&&s===Pe}function gT(r,s){Wo=Nd=!0;var o=r.pending;o===null?s.next=s:(s.next=o.next,o.next=s),r.pending=s}function yT(r,s,o){if((o&4194048)!==0){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,Eu(r,o)}}var Ld={readContext:yn,use:Pd,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useLayoutEffect:Nt,useInsertionEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useSyncExternalStore:Nt,useId:Nt,useHostTransitionStatus:Nt,useFormState:Nt,useActionState:Nt,useOptimistic:Nt,useMemoCache:Nt,useCacheRefresh:Nt},_T={readContext:yn,use:Pd,useCallback:function(r,s){return kn().memoizedState=[r,s===void 0?null:s],r},useContext:yn,useEffect:tT,useImperativeHandle:function(r,s,o){o=o!=null?o.concat([r]):null,Od(4194308,4,sT.bind(null,s,r),o)},useLayoutEffect:function(r,s){return Od(4194308,4,r,s)},useInsertionEffect:function(r,s){Od(4,2,r,s)},useMemo:function(r,s){var o=kn();s=s===void 0?null:s;var u=r();if(ka){zn(!0);try{r()}finally{zn(!1)}}return o.memoizedState=[u,s],u},useReducer:function(r,s,o){var u=kn();if(o!==void 0){var d=o(s);if(ka){zn(!0);try{o(s)}finally{zn(!1)}}}else d=s;return u.memoizedState=u.baseState=d,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:d},u.queue=r,r=r.dispatch=_x.bind(null,Pe,r),[u.memoizedState,r]},useRef:function(r){var s=kn();return r={current:r},s.memoizedState=r},useState:function(r){r=Hp(r);var s=r.queue,o=pT.bind(null,Pe,s);return s.dispatch=o,[r.memoizedState,o]},useDebugValue:Qp,useDeferredValue:function(r,s){var o=kn();return Wp(o,r,s)},useTransition:function(){var r=Hp(!1);return r=cT.bind(null,Pe,r.queue,!0,!1),kn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,o){var u=Pe,d=kn();if(Ke){if(o===void 0)throw Error(n(407));o=o()}else{if(o=s(),at===null)throw Error(n(349));(ze&124)!==0||FE(u,s,o)}d.memoizedState=o;var p={value:o,getSnapshot:s};return d.queue=p,tT(zE.bind(null,u,p,r),[r]),u.flags|=2048,$o(9,Vd(),jE.bind(null,u,p,o,s),null),o},useId:function(){var r=kn(),s=at.identifierPrefix;if(Ke){var o=Ai,u=bi;o=(u&~(1<<32-gn(u)-1)).toString(32)+o,s="«"+s+"R"+o,o=Dd++,0<o&&(s+="H"+o.toString(32)),s+="»"}else o=dx++,s="«"+s+"r"+o.toString(32)+"»";return r.memoizedState=s},useHostTransitionStatus:$p,useFormState:$E,useActionState:$E,useOptimistic:function(r){var s=kn();s.memoizedState=s.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=Xp.bind(null,Pe,!0,o),o.dispatch=s,[r,s]},useMemoCache:Bp,useCacheRefresh:function(){return kn().memoizedState=yx.bind(null,Pe)}},vT={readContext:yn,use:Pd,useCallback:oT,useContext:yn,useEffect:nT,useImperativeHandle:aT,useInsertionEffect:rT,useLayoutEffect:iT,useMemo:lT,useReducer:kd,useRef:eT,useState:function(){return kd(Ri)},useDebugValue:Qp,useDeferredValue:function(r,s){var o=Ut();return uT(o,tt.memoizedState,r,s)},useTransition:function(){var r=kd(Ri)[0],s=Ut().memoizedState;return[typeof r=="boolean"?r:$u(r),s]},useSyncExternalStore:UE,useId:fT,useHostTransitionStatus:$p,useFormState:XE,useActionState:XE,useOptimistic:function(r,s){var o=Ut();return GE(o,tt,r,s)},useMemoCache:Bp,useCacheRefresh:mT},vx={readContext:yn,use:Pd,useCallback:oT,useContext:yn,useEffect:nT,useImperativeHandle:aT,useInsertionEffect:rT,useLayoutEffect:iT,useMemo:lT,useReducer:Gp,useRef:eT,useState:function(){return Gp(Ri)},useDebugValue:Qp,useDeferredValue:function(r,s){var o=Ut();return tt===null?Wp(o,r,s):uT(o,tt.memoizedState,r,s)},useTransition:function(){var r=Gp(Ri)[0],s=Ut().memoizedState;return[typeof r=="boolean"?r:$u(r),s]},useSyncExternalStore:UE,useId:fT,useHostTransitionStatus:$p,useFormState:ZE,useActionState:ZE,useOptimistic:function(r,s){var o=Ut();return tt!==null?GE(o,tt,r,s):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:Bp,useCacheRefresh:mT},Xo=null,Zu=0;function Ud(r){var s=Zu;return Zu+=1,Xo===null&&(Xo=[]),NE(Xo,r,s)}function ec(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function Fd(r,s){throw s.$$typeof===T?Error(n(525)):(r=Object.prototype.toString.call(s),Error(n(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function ET(r){var s=r._init;return s(r._payload)}function TT(r){function s(M,P){if(r){var j=M.deletions;j===null?(M.deletions=[P],M.flags|=16):j.push(P)}}function o(M,P){if(!r)return null;for(;P!==null;)s(M,P),P=P.sibling;return null}function u(M){for(var P=new Map;M!==null;)M.key!==null?P.set(M.key,M):P.set(M.index,M),M=M.sibling;return P}function d(M,P){return M=wi(M,P),M.index=0,M.sibling=null,M}function p(M,P,j){return M.index=j,r?(j=M.alternate,j!==null?(j=j.index,j<P?(M.flags|=67108866,P):j):(M.flags|=67108866,P)):(M.flags|=1048576,P)}function E(M){return r&&M.alternate===null&&(M.flags|=67108866),M}function b(M,P,j,X){return P===null||P.tag!==6?(P=_p(j,M.mode,X),P.return=M,P):(P=d(P,j),P.return=M,P)}function x(M,P,j,X){var ge=j.type;return ge===K?$(M,P,j.props.children,X,j.key):P!==null&&(P.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===S&&ET(ge)===P.type)?(P=d(P,j.props),ec(P,j),P.return=M,P):(P=Td(j.type,j.key,j.props,null,M.mode,X),ec(P,j),P.return=M,P)}function z(M,P,j,X){return P===null||P.tag!==4||P.stateNode.containerInfo!==j.containerInfo||P.stateNode.implementation!==j.implementation?(P=vp(j,M.mode,X),P.return=M,P):(P=d(P,j.children||[]),P.return=M,P)}function $(M,P,j,X,ge){return P===null||P.tag!==7?(P=Ia(j,M.mode,X,ge),P.return=M,P):(P=d(P,j),P.return=M,P)}function J(M,P,j){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=_p(""+P,M.mode,j),P.return=M,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case A:return j=Td(P.type,P.key,P.props,null,M.mode,j),ec(j,P),j.return=M,j;case k:return P=vp(P,M.mode,j),P.return=M,P;case S:var X=P._init;return P=X(P._payload),J(M,P,j)}if(ct(P)||L(P))return P=Ia(P,M.mode,j,null),P.return=M,P;if(typeof P.then=="function")return J(M,Ud(P),j);if(P.$$typeof===le)return J(M,Id(M,P),j);Fd(M,P)}return null}function B(M,P,j,X){var ge=P!==null?P.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return ge!==null?null:b(M,P,""+j,X);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case A:return j.key===ge?x(M,P,j,X):null;case k:return j.key===ge?z(M,P,j,X):null;case S:return ge=j._init,j=ge(j._payload),B(M,P,j,X)}if(ct(j)||L(j))return ge!==null?null:$(M,P,j,X,null);if(typeof j.then=="function")return B(M,P,Ud(j),X);if(j.$$typeof===le)return B(M,P,Id(M,j),X);Fd(M,j)}return null}function q(M,P,j,X,ge){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return M=M.get(j)||null,b(P,M,""+X,ge);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case A:return M=M.get(X.key===null?j:X.key)||null,x(P,M,X,ge);case k:return M=M.get(X.key===null?j:X.key)||null,z(P,M,X,ge);case S:var ke=X._init;return X=ke(X._payload),q(M,P,j,X,ge)}if(ct(X)||L(X))return M=M.get(j)||null,$(P,M,X,ge,null);if(typeof X.then=="function")return q(M,P,j,Ud(X),ge);if(X.$$typeof===le)return q(M,P,j,Id(P,X),ge);Fd(P,X)}return null}function xe(M,P,j,X){for(var ge=null,ke=null,Te=P,Re=P=0,tn=null;Te!==null&&Re<j.length;Re++){Te.index>Re?(tn=Te,Te=null):tn=Te.sibling;var Ge=B(M,Te,j[Re],X);if(Ge===null){Te===null&&(Te=tn);break}r&&Te&&Ge.alternate===null&&s(M,Te),P=p(Ge,P,Re),ke===null?ge=Ge:ke.sibling=Ge,ke=Ge,Te=tn}if(Re===j.length)return o(M,Te),Ke&&Ra(M,Re),ge;if(Te===null){for(;Re<j.length;Re++)Te=J(M,j[Re],X),Te!==null&&(P=p(Te,P,Re),ke===null?ge=Te:ke.sibling=Te,ke=Te);return Ke&&Ra(M,Re),ge}for(Te=u(Te);Re<j.length;Re++)tn=q(Te,M,Re,j[Re],X),tn!==null&&(r&&tn.alternate!==null&&Te.delete(tn.key===null?Re:tn.key),P=p(tn,P,Re),ke===null?ge=tn:ke.sibling=tn,ke=tn);return r&&Te.forEach(function(ws){return s(M,ws)}),Ke&&Ra(M,Re),ge}function Se(M,P,j,X){if(j==null)throw Error(n(151));for(var ge=null,ke=null,Te=P,Re=P=0,tn=null,Ge=j.next();Te!==null&&!Ge.done;Re++,Ge=j.next()){Te.index>Re?(tn=Te,Te=null):tn=Te.sibling;var ws=B(M,Te,Ge.value,X);if(ws===null){Te===null&&(Te=tn);break}r&&Te&&ws.alternate===null&&s(M,Te),P=p(ws,P,Re),ke===null?ge=ws:ke.sibling=ws,ke=ws,Te=tn}if(Ge.done)return o(M,Te),Ke&&Ra(M,Re),ge;if(Te===null){for(;!Ge.done;Re++,Ge=j.next())Ge=J(M,Ge.value,X),Ge!==null&&(P=p(Ge,P,Re),ke===null?ge=Ge:ke.sibling=Ge,ke=Ge);return Ke&&Ra(M,Re),ge}for(Te=u(Te);!Ge.done;Re++,Ge=j.next())Ge=q(Te,M,Re,Ge.value,X),Ge!==null&&(r&&Ge.alternate!==null&&Te.delete(Ge.key===null?Re:Ge.key),P=p(Ge,P,Re),ke===null?ge=Ge:ke.sibling=Ge,ke=Ge);return r&&Te.forEach(function(EC){return s(M,EC)}),Ke&&Ra(M,Re),ge}function rt(M,P,j,X){if(typeof j=="object"&&j!==null&&j.type===K&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case A:e:{for(var ge=j.key;P!==null;){if(P.key===ge){if(ge=j.type,ge===K){if(P.tag===7){o(M,P.sibling),X=d(P,j.props.children),X.return=M,M=X;break e}}else if(P.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===S&&ET(ge)===P.type){o(M,P.sibling),X=d(P,j.props),ec(X,j),X.return=M,M=X;break e}o(M,P);break}else s(M,P);P=P.sibling}j.type===K?(X=Ia(j.props.children,M.mode,X,j.key),X.return=M,M=X):(X=Td(j.type,j.key,j.props,null,M.mode,X),ec(X,j),X.return=M,M=X)}return E(M);case k:e:{for(ge=j.key;P!==null;){if(P.key===ge)if(P.tag===4&&P.stateNode.containerInfo===j.containerInfo&&P.stateNode.implementation===j.implementation){o(M,P.sibling),X=d(P,j.children||[]),X.return=M,M=X;break e}else{o(M,P);break}else s(M,P);P=P.sibling}X=vp(j,M.mode,X),X.return=M,M=X}return E(M);case S:return ge=j._init,j=ge(j._payload),rt(M,P,j,X)}if(ct(j))return xe(M,P,j,X);if(L(j)){if(ge=L(j),typeof ge!="function")throw Error(n(150));return j=ge.call(j),Se(M,P,j,X)}if(typeof j.then=="function")return rt(M,P,Ud(j),X);if(j.$$typeof===le)return rt(M,P,Id(M,j),X);Fd(M,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,P!==null&&P.tag===6?(o(M,P.sibling),X=d(P,j),X.return=M,M=X):(o(M,P),X=_p(j,M.mode,X),X.return=M,M=X),E(M)):o(M,P)}return function(M,P,j,X){try{Zu=0;var ge=rt(M,P,j,X);return Xo=null,ge}catch(Te){if(Te===Gu||Te===Rd)throw Te;var ke=Gn(29,Te,null,M.mode);return ke.lanes=X,ke.return=M,ke}finally{}}}var Jo=TT(!0),wT=TT(!1),hr=ee(null),Gr=null;function os(r){var s=r.alternate;ie(Wt,Wt.current&1),ie(hr,r),Gr===null&&(s===null||Qo.current!==null||s.memoizedState!==null)&&(Gr=r)}function bT(r){if(r.tag===22){if(ie(Wt,Wt.current),ie(hr,r),Gr===null){var s=r.alternate;s!==null&&s.memoizedState!==null&&(Gr=r)}}else ls()}function ls(){ie(Wt,Wt.current),ie(hr,hr.current)}function xi(r){ce(hr),Gr===r&&(Gr=null),ce(Wt)}var Wt=ee(0);function jd(r){for(var s=r;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||zg(o)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function Jp(r,s,o,u){s=r.memoizedState,o=o(u,s),o=o==null?s:_({},s,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var Zp={enqueueSetState:function(r,s,o){r=r._reactInternals;var u=Wn(),d=is(u);d.payload=s,o!=null&&(d.callback=o),s=ss(r,d,u),s!==null&&(Yn(s,r,u),Ku(s,r,u))},enqueueReplaceState:function(r,s,o){r=r._reactInternals;var u=Wn(),d=is(u);d.tag=1,d.payload=s,o!=null&&(d.callback=o),s=ss(r,d,u),s!==null&&(Yn(s,r,u),Ku(s,r,u))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var o=Wn(),u=is(o);u.tag=2,s!=null&&(u.callback=s),s=ss(r,u,o),s!==null&&(Yn(s,r,o),Ku(s,r,o))}};function AT(r,s,o,u,d,p,E){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,p,E):s.prototype&&s.prototype.isPureReactComponent?!Mu(o,u)||!Mu(d,p):!0}function IT(r,s,o,u){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==r&&Zp.enqueueReplaceState(s,s.state,null)}function Va(r,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(r=r.defaultProps){o===s&&(o=_({},o));for(var d in r)o[d]===void 0&&(o[d]=r[d])}return o}var zd=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function ST(r){zd(r)}function RT(r){console.error(r)}function xT(r){zd(r)}function Bd(r,s){try{var o=r.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function CT(r,s,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function eg(r,s,o){return o=is(o),o.tag=3,o.payload={element:null},o.callback=function(){Bd(r,s)},o}function NT(r){return r=is(r),r.tag=3,r}function DT(r,s,o,u){var d=o.type.getDerivedStateFromError;if(typeof d=="function"){var p=u.value;r.payload=function(){return d(p)},r.callback=function(){CT(s,o,u)}}var E=o.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(r.callback=function(){CT(s,o,u),typeof d!="function"&&(ms===null?ms=new Set([this]):ms.add(this));var b=u.stack;this.componentDidCatch(u.value,{componentStack:b!==null?b:""})})}function Ex(r,s,o,u,d){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&zu(s,o,d,!0),o=hr.current,o!==null){switch(o.tag){case 13:return Gr===null?Ag():o.alternate===null&&It===0&&(It=3),o.flags&=-257,o.flags|=65536,o.lanes=d,u===Cp?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),Sg(r,u,d)),!1;case 22:return o.flags|=65536,u===Cp?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),Sg(r,u,d)),!1}throw Error(n(435,o.tag))}return Sg(r,u,d),Ag(),!1}if(Ke)return s=hr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,u!==wp&&(r=Error(n(422),{cause:u}),ju(or(r,o)))):(u!==wp&&(s=Error(n(423),{cause:u}),ju(or(s,o))),r=r.current.alternate,r.flags|=65536,d&=-d,r.lanes|=d,u=or(u,o),d=eg(r.stateNode,u,d),Pp(r,d),It!==4&&(It=2)),!1;var p=Error(n(520),{cause:u});if(p=or(p,o),oc===null?oc=[p]:oc.push(p),It!==4&&(It=2),s===null)return!0;u=or(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,r=d&-d,o.lanes|=r,r=eg(o.stateNode,u,r),Pp(o,r),!1;case 1:if(s=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(ms===null||!ms.has(p))))return o.flags|=65536,d&=-d,o.lanes|=d,d=NT(d),DT(d,r,o,u),Pp(o,d),!1}o=o.return}while(o!==null);return!1}var PT=Error(n(461)),Zt=!1;function un(r,s,o,u){s.child=r===null?wT(s,null,o,u):Jo(s,r.child,o,u)}function kT(r,s,o,u,d){o=o.render;var p=s.ref;if("ref"in u){var E={};for(var b in u)b!=="ref"&&(E[b]=u[b])}else E=u;return Da(s),u=Lp(r,s,o,E,p,d),b=Up(),r!==null&&!Zt?(Fp(r,s,d),Ci(r,s,d)):(Ke&&b&&Ep(s),s.flags|=1,un(r,s,u,d),s.child)}function VT(r,s,o,u,d){if(r===null){var p=o.type;return typeof p=="function"&&!yp(p)&&p.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=p,OT(r,s,p,u,d)):(r=Td(o.type,null,u,s,s.mode,d),r.ref=s.ref,r.return=s,s.child=r)}if(p=r.child,!lg(r,d)){var E=p.memoizedProps;if(o=o.compare,o=o!==null?o:Mu,o(E,u)&&r.ref===s.ref)return Ci(r,s,d)}return s.flags|=1,r=wi(p,u),r.ref=s.ref,r.return=s,s.child=r}function OT(r,s,o,u,d){if(r!==null){var p=r.memoizedProps;if(Mu(p,u)&&r.ref===s.ref)if(Zt=!1,s.pendingProps=u=p,lg(r,d))(r.flags&131072)!==0&&(Zt=!0);else return s.lanes=r.lanes,Ci(r,s,d)}return tg(r,s,o,u,d)}function MT(r,s,o){var u=s.pendingProps,d=u.children,p=r!==null?r.memoizedState:null;if(u.mode==="hidden"){if((s.flags&128)!==0){if(u=p!==null?p.baseLanes|o:o,r!==null){for(d=s.child=r.child,p=0;d!==null;)p=p|d.lanes|d.childLanes,d=d.sibling;s.childLanes=p&~u}else s.childLanes=0,s.child=null;return LT(r,s,u,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&Sd(s,p!==null?p.cachePool:null),p!==null?OE(s,p):Vp(),bT(s);else return s.lanes=s.childLanes=536870912,LT(r,s,p!==null?p.baseLanes|o:o,o)}else p!==null?(Sd(s,p.cachePool),OE(s,p),ls(),s.memoizedState=null):(r!==null&&Sd(s,null),Vp(),ls());return un(r,s,d,o),s.child}function LT(r,s,o,u){var d=xp();return d=d===null?null:{parent:Qt._currentValue,pool:d},s.memoizedState={baseLanes:o,cachePool:d},r!==null&&Sd(s,null),Vp(),bT(s),r!==null&&zu(r,s,u,!0),null}function qd(r,s){var o=s.ref;if(o===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(n(284));(r===null||r.ref!==o)&&(s.flags|=4194816)}}function tg(r,s,o,u,d){return Da(s),o=Lp(r,s,o,u,void 0,d),u=Up(),r!==null&&!Zt?(Fp(r,s,d),Ci(r,s,d)):(Ke&&u&&Ep(s),s.flags|=1,un(r,s,o,d),s.child)}function UT(r,s,o,u,d,p){return Da(s),s.updateQueue=null,o=LE(s,u,o,d),ME(r),u=Up(),r!==null&&!Zt?(Fp(r,s,p),Ci(r,s,p)):(Ke&&u&&Ep(s),s.flags|=1,un(r,s,o,p),s.child)}function FT(r,s,o,u,d){if(Da(s),s.stateNode===null){var p=Bo,E=o.contextType;typeof E=="object"&&E!==null&&(p=yn(E)),p=new o(u,p),s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Zp,s.stateNode=p,p._reactInternals=s,p=s.stateNode,p.props=u,p.state=s.memoizedState,p.refs={},Np(s),E=o.contextType,p.context=typeof E=="object"&&E!==null?yn(E):Bo,p.state=s.memoizedState,E=o.getDerivedStateFromProps,typeof E=="function"&&(Jp(s,o,E,u),p.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(E=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),E!==p.state&&Zp.enqueueReplaceState(p,p.state,null),Wu(s,u,p,d),Qu(),p.state=s.memoizedState),typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(r===null){p=s.stateNode;var b=s.memoizedProps,x=Va(o,b);p.props=x;var z=p.context,$=o.contextType;E=Bo,typeof $=="object"&&$!==null&&(E=yn($));var J=o.getDerivedStateFromProps;$=typeof J=="function"||typeof p.getSnapshotBeforeUpdate=="function",b=s.pendingProps!==b,$||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(b||z!==E)&&IT(s,p,u,E),rs=!1;var B=s.memoizedState;p.state=B,Wu(s,u,p,d),Qu(),z=s.memoizedState,b||B!==z||rs?(typeof J=="function"&&(Jp(s,o,J,u),z=s.memoizedState),(x=rs||AT(s,o,x,u,B,z,E))?($||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(s.flags|=4194308)):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=z),p.props=u,p.state=z,p.context=E,u=x):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{p=s.stateNode,Dp(r,s),E=s.memoizedProps,$=Va(o,E),p.props=$,J=s.pendingProps,B=p.context,z=o.contextType,x=Bo,typeof z=="object"&&z!==null&&(x=yn(z)),b=o.getDerivedStateFromProps,(z=typeof b=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(E!==J||B!==x)&&IT(s,p,u,x),rs=!1,B=s.memoizedState,p.state=B,Wu(s,u,p,d),Qu();var q=s.memoizedState;E!==J||B!==q||rs||r!==null&&r.dependencies!==null&&Ad(r.dependencies)?(typeof b=="function"&&(Jp(s,o,b,u),q=s.memoizedState),($=rs||AT(s,o,$,u,B,q,x)||r!==null&&r.dependencies!==null&&Ad(r.dependencies))?(z||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,q,x),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,q,x)),typeof p.componentDidUpdate=="function"&&(s.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof p.componentDidUpdate!="function"||E===r.memoizedProps&&B===r.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===r.memoizedProps&&B===r.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=q),p.props=u,p.state=q,p.context=x,u=$):(typeof p.componentDidUpdate!="function"||E===r.memoizedProps&&B===r.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===r.memoizedProps&&B===r.memoizedState||(s.flags|=1024),u=!1)}return p=u,qd(r,s),u=(s.flags&128)!==0,p||u?(p=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:p.render(),s.flags|=1,r!==null&&u?(s.child=Jo(s,r.child,null,d),s.child=Jo(s,null,o,d)):un(r,s,o,d),s.memoizedState=p.state,r=s.child):r=Ci(r,s,d),r}function jT(r,s,o,u){return Fu(),s.flags|=256,un(r,s,o,u),s.child}var ng={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function rg(r){return{baseLanes:r,cachePool:RE()}}function ig(r,s,o){return r=r!==null?r.childLanes&~o:0,s&&(r|=dr),r}function zT(r,s,o){var u=s.pendingProps,d=!1,p=(s.flags&128)!==0,E;if((E=p)||(E=r!==null&&r.memoizedState===null?!1:(Wt.current&2)!==0),E&&(d=!0,s.flags&=-129),E=(s.flags&32)!==0,s.flags&=-33,r===null){if(Ke){if(d?os(s):ls(),Ke){var b=At,x;if(x=b){e:{for(x=b,b=qr;x.nodeType!==8;){if(!b){b=null;break e}if(x=Ir(x.nextSibling),x===null){b=null;break e}}b=x}b!==null?(s.memoizedState={dehydrated:b,treeContext:Sa!==null?{id:bi,overflow:Ai}:null,retryLane:536870912,hydrationErrors:null},x=Gn(18,null,null,0),x.stateNode=b,x.return=s,s.child=x,Rn=s,At=null,x=!0):x=!1}x||Ca(s)}if(b=s.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return zg(b)?s.lanes=32:s.lanes=536870912,null;xi(s)}return b=u.children,u=u.fallback,d?(ls(),d=s.mode,b=Gd({mode:"hidden",children:b},d),u=Ia(u,d,o,null),b.return=s,u.return=s,b.sibling=u,s.child=b,d=s.child,d.memoizedState=rg(o),d.childLanes=ig(r,E,o),s.memoizedState=ng,u):(os(s),sg(s,b))}if(x=r.memoizedState,x!==null&&(b=x.dehydrated,b!==null)){if(p)s.flags&256?(os(s),s.flags&=-257,s=ag(r,s,o)):s.memoizedState!==null?(ls(),s.child=r.child,s.flags|=128,s=null):(ls(),d=u.fallback,b=s.mode,u=Gd({mode:"visible",children:u.children},b),d=Ia(d,b,o,null),d.flags|=2,u.return=s,d.return=s,u.sibling=d,s.child=u,Jo(s,r.child,null,o),u=s.child,u.memoizedState=rg(o),u.childLanes=ig(r,E,o),s.memoizedState=ng,s=d);else if(os(s),zg(b)){if(E=b.nextSibling&&b.nextSibling.dataset,E)var z=E.dgst;E=z,u=Error(n(419)),u.stack="",u.digest=E,ju({value:u,source:null,stack:null}),s=ag(r,s,o)}else if(Zt||zu(r,s,o,!1),E=(o&r.childLanes)!==0,Zt||E){if(E=at,E!==null&&(u=o&-o,u=(u&42)!==0?1:Yi(u),u=(u&(E.suspendedLanes|o))!==0?0:u,u!==0&&u!==x.retryLane))throw x.retryLane=u,zo(r,u),Yn(E,r,u),PT;b.data==="$?"||Ag(),s=ag(r,s,o)}else b.data==="$?"?(s.flags|=192,s.child=r.child,s=null):(r=x.treeContext,At=Ir(b.nextSibling),Rn=s,Ke=!0,xa=null,qr=!1,r!==null&&(ur[cr++]=bi,ur[cr++]=Ai,ur[cr++]=Sa,bi=r.id,Ai=r.overflow,Sa=s),s=sg(s,u.children),s.flags|=4096);return s}return d?(ls(),d=u.fallback,b=s.mode,x=r.child,z=x.sibling,u=wi(x,{mode:"hidden",children:u.children}),u.subtreeFlags=x.subtreeFlags&65011712,z!==null?d=wi(z,d):(d=Ia(d,b,o,null),d.flags|=2),d.return=s,u.return=s,u.sibling=d,s.child=u,u=d,d=s.child,b=r.child.memoizedState,b===null?b=rg(o):(x=b.cachePool,x!==null?(z=Qt._currentValue,x=x.parent!==z?{parent:z,pool:z}:x):x=RE(),b={baseLanes:b.baseLanes|o,cachePool:x}),d.memoizedState=b,d.childLanes=ig(r,E,o),s.memoizedState=ng,u):(os(s),o=r.child,r=o.sibling,o=wi(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,r!==null&&(E=s.deletions,E===null?(s.deletions=[r],s.flags|=16):E.push(r)),s.child=o,s.memoizedState=null,o)}function sg(r,s){return s=Gd({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function Gd(r,s){return r=Gn(22,r,null,s),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function ag(r,s,o){return Jo(s,r.child,null,o),r=sg(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function BT(r,s,o){r.lanes|=s;var u=r.alternate;u!==null&&(u.lanes|=s),Ap(r.return,s,o)}function og(r,s,o,u,d){var p=r.memoizedState;p===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:d}:(p.isBackwards=s,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=o,p.tailMode=d)}function qT(r,s,o){var u=s.pendingProps,d=u.revealOrder,p=u.tail;if(un(r,s,u.children,o),u=Wt.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&BT(r,o,s);else if(r.tag===19)BT(r,o,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}u&=1}switch(ie(Wt,u),d){case"forwards":for(o=s.child,d=null;o!==null;)r=o.alternate,r!==null&&jd(r)===null&&(d=o),o=o.sibling;o=d,o===null?(d=s.child,s.child=null):(d=o.sibling,o.sibling=null),og(s,!1,d,o,p);break;case"backwards":for(o=null,d=s.child,s.child=null;d!==null;){if(r=d.alternate,r!==null&&jd(r)===null){s.child=d;break}r=d.sibling,d.sibling=o,o=d,d=r}og(s,!0,o,null,p);break;case"together":og(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ci(r,s,o){if(r!==null&&(s.dependencies=r.dependencies),fs|=s.lanes,(o&s.childLanes)===0)if(r!==null){if(zu(r,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(n(153));if(s.child!==null){for(r=s.child,o=wi(r,r.pendingProps),s.child=o,o.return=s;r.sibling!==null;)r=r.sibling,o=o.sibling=wi(r,r.pendingProps),o.return=s;o.sibling=null}return s.child}function lg(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&Ad(r)))}function Tx(r,s,o){switch(s.tag){case 3:We(s,s.stateNode.containerInfo),ns(s,Qt,r.memoizedState.cache),Fu();break;case 27:case 5:qt(s);break;case 4:We(s,s.stateNode.containerInfo);break;case 10:ns(s,s.type,s.memoizedProps.value);break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(os(s),s.flags|=128,null):(o&s.child.childLanes)!==0?zT(r,s,o):(os(s),r=Ci(r,s,o),r!==null?r.sibling:null);os(s);break;case 19:var d=(r.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(zu(r,s,o,!1),u=(o&s.childLanes)!==0),d){if(u)return qT(r,s,o);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),ie(Wt,Wt.current),u)break;return null;case 22:case 23:return s.lanes=0,MT(r,s,o);case 24:ns(s,Qt,r.memoizedState.cache)}return Ci(r,s,o)}function GT(r,s,o){if(r!==null)if(r.memoizedProps!==s.pendingProps)Zt=!0;else{if(!lg(r,o)&&(s.flags&128)===0)return Zt=!1,Tx(r,s,o);Zt=(r.flags&131072)!==0}else Zt=!1,Ke&&(s.flags&1048576)!==0&&EE(s,bd,s.index);switch(s.lanes=0,s.tag){case 16:e:{r=s.pendingProps;var u=s.elementType,d=u._init;if(u=d(u._payload),s.type=u,typeof u=="function")yp(u)?(r=Va(u,r),s.tag=1,s=FT(null,s,u,r,o)):(s.tag=0,s=tg(null,s,u,r,o));else{if(u!=null){if(d=u.$$typeof,d===we){s.tag=11,s=kT(null,s,u,r,o);break e}else if(d===R){s.tag=14,s=VT(null,s,u,r,o);break e}}throw s=Bt(u)||u,Error(n(306,s,""))}}return s;case 0:return tg(r,s,s.type,s.pendingProps,o);case 1:return u=s.type,d=Va(u,s.pendingProps),FT(r,s,u,d,o);case 3:e:{if(We(s,s.stateNode.containerInfo),r===null)throw Error(n(387));u=s.pendingProps;var p=s.memoizedState;d=p.element,Dp(r,s),Wu(s,u,null,o);var E=s.memoizedState;if(u=E.cache,ns(s,Qt,u),u!==p.cache&&Ip(s,[Qt],o,!0),Qu(),u=E.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:E.cache},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){s=jT(r,s,u,o);break e}else if(u!==d){d=or(Error(n(424)),s),ju(d),s=jT(r,s,u,o);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(At=Ir(r.firstChild),Rn=s,Ke=!0,xa=null,qr=!0,o=wT(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Fu(),u===d){s=Ci(r,s,o);break e}un(r,s,u,o)}s=s.child}return s;case 26:return qd(r,s),r===null?(o=Ww(s.type,null,s.pendingProps,null))?s.memoizedState=o:Ke||(o=s.type,r=s.pendingProps,u=sf(ye.current).createElement(o),u[Gt]=s,u[Ot]=r,hn(u,o,r),Ct(u),s.stateNode=u):s.memoizedState=Ww(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return qt(s),r===null&&Ke&&(u=s.stateNode=Hw(s.type,s.pendingProps,ye.current),Rn=s,qr=!0,d=At,ys(s.type)?(Bg=d,At=Ir(u.firstChild)):At=d),un(r,s,s.pendingProps.children,o),qd(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&Ke&&((d=u=At)&&(u=Yx(u,s.type,s.pendingProps,qr),u!==null?(s.stateNode=u,Rn=s,At=Ir(u.firstChild),qr=!1,d=!0):d=!1),d||Ca(s)),qt(s),d=s.type,p=s.pendingProps,E=r!==null?r.memoizedProps:null,u=p.children,Ug(d,p)?u=null:E!==null&&Ug(d,E)&&(s.flags|=32),s.memoizedState!==null&&(d=Lp(r,s,fx,null,null,o),gc._currentValue=d),qd(r,s),un(r,s,u,o),s.child;case 6:return r===null&&Ke&&((r=o=At)&&(o=$x(o,s.pendingProps,qr),o!==null?(s.stateNode=o,Rn=s,At=null,r=!0):r=!1),r||Ca(s)),null;case 13:return zT(r,s,o);case 4:return We(s,s.stateNode.containerInfo),u=s.pendingProps,r===null?s.child=Jo(s,null,u,o):un(r,s,u,o),s.child;case 11:return kT(r,s,s.type,s.pendingProps,o);case 7:return un(r,s,s.pendingProps,o),s.child;case 8:return un(r,s,s.pendingProps.children,o),s.child;case 12:return un(r,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,ns(s,s.type,u.value),un(r,s,u.children,o),s.child;case 9:return d=s.type._context,u=s.pendingProps.children,Da(s),d=yn(d),u=u(d),s.flags|=1,un(r,s,u,o),s.child;case 14:return VT(r,s,s.type,s.pendingProps,o);case 15:return OT(r,s,s.type,s.pendingProps,o);case 19:return qT(r,s,o);case 31:return u=s.pendingProps,o=s.mode,u={mode:u.mode,children:u.children},r===null?(o=Gd(u,o),o.ref=s.ref,s.child=o,o.return=s,s=o):(o=wi(r.child,u),o.ref=s.ref,s.child=o,o.return=s,s=o),s;case 22:return MT(r,s,o);case 24:return Da(s),u=yn(Qt),r===null?(d=xp(),d===null&&(d=at,p=Sp(),d.pooledCache=p,p.refCount++,p!==null&&(d.pooledCacheLanes|=o),d=p),s.memoizedState={parent:u,cache:d},Np(s),ns(s,Qt,d)):((r.lanes&o)!==0&&(Dp(r,s),Wu(s,null,null,o),Qu()),d=r.memoizedState,p=s.memoizedState,d.parent!==u?(d={parent:u,cache:u},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),ns(s,Qt,u)):(u=p.cache,ns(s,Qt,u),u!==d.cache&&Ip(s,[Qt],o,!0))),un(r,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(n(156,s.tag))}function Ni(r){r.flags|=4}function HT(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Zw(s)){if(s=hr.current,s!==null&&((ze&4194048)===ze?Gr!==null:(ze&62914560)!==ze&&(ze&536870912)===0||s!==Gr))throw Hu=Cp,xE;r.flags|=8192}}function Hd(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?_u():536870912,r.lanes|=s,nl|=s)}function tc(r,s){if(!Ke)switch(r.tailMode){case"hidden":s=r.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function _t(r){var s=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(s)for(var d=r.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags&65011712,u|=d.flags&65011712,d.return=r,d=d.sibling;else for(d=r.child;d!==null;)o|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=r,d=d.sibling;return r.subtreeFlags|=u,r.childLanes=o,s}function wx(r,s,o){var u=s.pendingProps;switch(Tp(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(s),null;case 1:return _t(s),null;case 3:return o=s.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Si(Qt),st(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(Uu(s)?Ni(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,bE())),_t(s),null;case 26:return o=s.memoizedState,r===null?(Ni(s),o!==null?(_t(s),HT(s,o)):(_t(s),s.flags&=-16777217)):o?o!==r.memoizedState?(Ni(s),_t(s),HT(s,o)):(_t(s),s.flags&=-16777217):(r.memoizedProps!==u&&Ni(s),_t(s),s.flags&=-16777217),null;case 27:an(s),o=ye.current;var d=s.type;if(r!==null&&s.stateNode!=null)r.memoizedProps!==u&&Ni(s);else{if(!u){if(s.stateNode===null)throw Error(n(166));return _t(s),null}r=ae.current,Uu(s)?TE(s):(r=Hw(d,u,o),s.stateNode=r,Ni(s))}return _t(s),null;case 5:if(an(s),o=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==u&&Ni(s);else{if(!u){if(s.stateNode===null)throw Error(n(166));return _t(s),null}if(r=ae.current,Uu(s))TE(s);else{switch(d=sf(ye.current),r){case 1:r=d.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:r=d.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":r=d.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":r=d.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":r=d.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof u.is=="string"?d.createElement("select",{is:u.is}):d.createElement("select"),u.multiple?r.multiple=!0:u.size&&(r.size=u.size);break;default:r=typeof u.is=="string"?d.createElement(o,{is:u.is}):d.createElement(o)}}r[Gt]=s,r[Ot]=u;e:for(d=s.child;d!==null;){if(d.tag===5||d.tag===6)r.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===s)break e;for(;d.sibling===null;){if(d.return===null||d.return===s)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}s.stateNode=r;e:switch(hn(r,o,u),o){case"button":case"input":case"select":case"textarea":r=!!u.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&Ni(s)}}return _t(s),s.flags&=-16777217,null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==u&&Ni(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(n(166));if(r=ye.current,Uu(s)){if(r=s.stateNode,o=s.memoizedProps,u=null,d=Rn,d!==null)switch(d.tag){case 27:case 5:u=d.memoizedProps}r[Gt]=s,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||Uw(r.nodeValue,o)),r||Ca(s)}else r=sf(r).createTextNode(u),r[Gt]=s,s.stateNode=r}return _t(s),null;case 13:if(u=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(d=Uu(s),u!==null&&u.dehydrated!==null){if(r===null){if(!d)throw Error(n(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(n(317));d[Gt]=s}else Fu(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;_t(s),d=!1}else d=bE(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=d),d=!0;if(!d)return s.flags&256?(xi(s),s):(xi(s),null)}if(xi(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=u!==null,r=r!==null&&r.memoizedState!==null,o){u=s.child,d=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(d=u.alternate.memoizedState.cachePool.pool);var p=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==d&&(u.flags|=2048)}return o!==r&&o&&(s.child.flags|=8192),Hd(s,s.updateQueue),_t(s),null;case 4:return st(),r===null&&kg(s.stateNode.containerInfo),_t(s),null;case 10:return Si(s.type),_t(s),null;case 19:if(ce(Wt),d=s.memoizedState,d===null)return _t(s),null;if(u=(s.flags&128)!==0,p=d.rendering,p===null)if(u)tc(d,!1);else{if(It!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(p=jd(r),p!==null){for(s.flags|=128,tc(d,!1),r=p.updateQueue,s.updateQueue=r,Hd(s,r),s.subtreeFlags=0,r=o,o=s.child;o!==null;)vE(o,r),o=o.sibling;return ie(Wt,Wt.current&1|2),s.child}r=r.sibling}d.tail!==null&&tr()>Wd&&(s.flags|=128,u=!0,tc(d,!1),s.lanes=4194304)}else{if(!u)if(r=jd(p),r!==null){if(s.flags|=128,u=!0,r=r.updateQueue,s.updateQueue=r,Hd(s,r),tc(d,!0),d.tail===null&&d.tailMode==="hidden"&&!p.alternate&&!Ke)return _t(s),null}else 2*tr()-d.renderingStartTime>Wd&&o!==536870912&&(s.flags|=128,u=!0,tc(d,!1),s.lanes=4194304);d.isBackwards?(p.sibling=s.child,s.child=p):(r=d.last,r!==null?r.sibling=p:s.child=p,d.last=p)}return d.tail!==null?(s=d.tail,d.rendering=s,d.tail=s.sibling,d.renderingStartTime=tr(),s.sibling=null,r=Wt.current,ie(Wt,u?r&1|2:r&1),s):(_t(s),null);case 22:case 23:return xi(s),Op(),u=s.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(_t(s),s.subtreeFlags&6&&(s.flags|=8192)):_t(s),o=s.updateQueue,o!==null&&Hd(s,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),r!==null&&ce(Pa),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),Si(Qt),_t(s),null;case 25:return null;case 30:return null}throw Error(n(156,s.tag))}function bx(r,s){switch(Tp(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Si(Qt),st(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return an(s),null;case 13:if(xi(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(n(340));Fu()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return ce(Wt),null;case 4:return st(),null;case 10:return Si(s.type),null;case 22:case 23:return xi(s),Op(),r!==null&&ce(Pa),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return Si(Qt),null;case 25:return null;default:return null}}function KT(r,s){switch(Tp(s),s.tag){case 3:Si(Qt),st();break;case 26:case 27:case 5:an(s);break;case 4:st();break;case 13:xi(s);break;case 19:ce(Wt);break;case 10:Si(s.type);break;case 22:case 23:xi(s),Op(),r!==null&&ce(Pa);break;case 24:Si(Qt)}}function nc(r,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var d=u.next;o=d;do{if((o.tag&r)===r){u=void 0;var p=o.create,E=o.inst;u=p(),E.destroy=u}o=o.next}while(o!==d)}}catch(b){it(s,s.return,b)}}function us(r,s,o){try{var u=s.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var p=d.next;u=p;do{if((u.tag&r)===r){var E=u.inst,b=E.destroy;if(b!==void 0){E.destroy=void 0,d=s;var x=o,z=b;try{z()}catch($){it(d,x,$)}}}u=u.next}while(u!==p)}}catch($){it(s,s.return,$)}}function QT(r){var s=r.updateQueue;if(s!==null){var o=r.stateNode;try{VE(s,o)}catch(u){it(r,r.return,u)}}}function WT(r,s,o){o.props=Va(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){it(r,s,u)}}function rc(r,s){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(d){it(r,s,d)}}function Hr(r,s){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(d){it(r,s,d)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(d){it(r,s,d)}else o.current=null}function YT(r){var s=r.type,o=r.memoizedProps,u=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(d){it(r,r.return,d)}}function ug(r,s,o){try{var u=r.stateNode;Gx(u,r.type,o,s),u[Ot]=s}catch(d){it(r,r.return,d)}}function $T(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&ys(r.type)||r.tag===4}function cg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||$T(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&ys(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function hg(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(r),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=rf));else if(u!==4&&(u===27&&ys(r.type)&&(o=r.stateNode,s=null),r=r.child,r!==null))for(hg(r,s,o),r=r.sibling;r!==null;)hg(r,s,o),r=r.sibling}function Kd(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?o.insertBefore(r,s):o.appendChild(r);else if(u!==4&&(u===27&&ys(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(Kd(r,s,o),r=r.sibling;r!==null;)Kd(r,s,o),r=r.sibling}function XT(r){var s=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,d=s.attributes;d.length;)s.removeAttributeNode(d[0]);hn(s,u,o),s[Gt]=r,s[Ot]=o}catch(p){it(r,r.return,p)}}var Di=!1,Dt=!1,dg=!1,JT=typeof WeakSet=="function"?WeakSet:Set,en=null;function Ax(r,s){if(r=r.containerInfo,Mg=hf,r=uE(r),cp(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var d=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var E=0,b=-1,x=-1,z=0,$=0,J=r,B=null;t:for(;;){for(var q;J!==o||d!==0&&J.nodeType!==3||(b=E+d),J!==p||u!==0&&J.nodeType!==3||(x=E+u),J.nodeType===3&&(E+=J.nodeValue.length),(q=J.firstChild)!==null;)B=J,J=q;for(;;){if(J===r)break t;if(B===o&&++z===d&&(b=E),B===p&&++$===u&&(x=E),(q=J.nextSibling)!==null)break;J=B,B=J.parentNode}J=q}o=b===-1||x===-1?null:{start:b,end:x}}else o=null}o=o||{start:0,end:0}}else o=null;for(Lg={focusedElem:r,selectionRange:o},hf=!1,en=s;en!==null;)if(s=en,r=s.child,(s.subtreeFlags&1024)!==0&&r!==null)r.return=s,en=r;else for(;en!==null;){switch(s=en,p=s.alternate,r=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&p!==null){r=void 0,o=s,d=p.memoizedProps,p=p.memoizedState,u=o.stateNode;try{var xe=Va(o.type,d,o.elementType===o.type);r=u.getSnapshotBeforeUpdate(xe,p),u.__reactInternalSnapshotBeforeUpdate=r}catch(Se){it(o,o.return,Se)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,o=r.nodeType,o===9)jg(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":jg(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(n(163))}if(r=s.sibling,r!==null){r.return=s.return,en=r;break}en=s.return}}function ZT(r,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:cs(r,o),u&4&&nc(5,o);break;case 1:if(cs(r,o),u&4)if(r=o.stateNode,s===null)try{r.componentDidMount()}catch(E){it(o,o.return,E)}else{var d=Va(o.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(d,s,r.__reactInternalSnapshotBeforeUpdate)}catch(E){it(o,o.return,E)}}u&64&&QT(o),u&512&&rc(o,o.return);break;case 3:if(cs(r,o),u&64&&(r=o.updateQueue,r!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{VE(r,s)}catch(E){it(o,o.return,E)}}break;case 27:s===null&&u&4&&XT(o);case 26:case 5:cs(r,o),s===null&&u&4&&YT(o),u&512&&rc(o,o.return);break;case 12:cs(r,o);break;case 13:cs(r,o),u&4&&nw(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=kx.bind(null,o),Xx(r,o))));break;case 22:if(u=o.memoizedState!==null||Di,!u){s=s!==null&&s.memoizedState!==null||Dt,d=Di;var p=Dt;Di=u,(Dt=s)&&!p?hs(r,o,(o.subtreeFlags&8772)!==0):cs(r,o),Di=d,Dt=p}break;case 30:break;default:cs(r,o)}}function ew(r){var s=r.alternate;s!==null&&(r.alternate=null,ew(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&Ji(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var dt=null,Vn=!1;function Pi(r,s,o){for(o=o.child;o!==null;)tw(r,s,o),o=o.sibling}function tw(r,s,o){if(Ye&&typeof Ye.onCommitFiberUnmount=="function")try{Ye.onCommitFiberUnmount(bt,o)}catch{}switch(o.tag){case 26:Dt||Hr(o,s),Pi(r,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Dt||Hr(o,s);var u=dt,d=Vn;ys(o.type)&&(dt=o.stateNode,Vn=!1),Pi(r,s,o),dc(o.stateNode),dt=u,Vn=d;break;case 5:Dt||Hr(o,s);case 6:if(u=dt,d=Vn,dt=null,Pi(r,s,o),dt=u,Vn=d,dt!==null)if(Vn)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(o.stateNode)}catch(p){it(o,s,p)}else try{dt.removeChild(o.stateNode)}catch(p){it(o,s,p)}break;case 18:dt!==null&&(Vn?(r=dt,qw(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),Ec(r)):qw(dt,o.stateNode));break;case 4:u=dt,d=Vn,dt=o.stateNode.containerInfo,Vn=!0,Pi(r,s,o),dt=u,Vn=d;break;case 0:case 11:case 14:case 15:Dt||us(2,o,s),Dt||us(4,o,s),Pi(r,s,o);break;case 1:Dt||(Hr(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&WT(o,s,u)),Pi(r,s,o);break;case 21:Pi(r,s,o);break;case 22:Dt=(u=Dt)||o.memoizedState!==null,Pi(r,s,o),Dt=u;break;default:Pi(r,s,o)}}function nw(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Ec(r)}catch(o){it(s,s.return,o)}}function Ix(r){switch(r.tag){case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new JT),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new JT),s;default:throw Error(n(435,r.tag))}}function fg(r,s){var o=Ix(r);s.forEach(function(u){var d=Vx.bind(null,r,u);o.has(u)||(o.add(u),u.then(d,d))})}function Hn(r,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var d=o[u],p=r,E=s,b=E;e:for(;b!==null;){switch(b.tag){case 27:if(ys(b.type)){dt=b.stateNode,Vn=!1;break e}break;case 5:dt=b.stateNode,Vn=!1;break e;case 3:case 4:dt=b.stateNode.containerInfo,Vn=!0;break e}b=b.return}if(dt===null)throw Error(n(160));tw(p,E,d),dt=null,Vn=!1,p=d.alternate,p!==null&&(p.return=null),d.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)rw(s,r),s=s.sibling}var Ar=null;function rw(r,s){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Hn(s,r),Kn(r),u&4&&(us(3,r,r.return),nc(3,r),us(5,r,r.return));break;case 1:Hn(s,r),Kn(r),u&512&&(Dt||o===null||Hr(o,o.return)),u&64&&Di&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var d=Ar;if(Hn(s,r),Kn(r),u&512&&(Dt||o===null||Hr(o,o.return)),u&4){var p=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){e:{u=r.type,o=r.memoizedProps,d=d.ownerDocument||d;t:switch(u){case"title":p=d.getElementsByTagName("title")[0],(!p||p[ua]||p[Gt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=d.createElement(u),d.head.insertBefore(p,d.querySelector("head > title"))),hn(p,u,o),p[Gt]=r,Ct(p),u=p;break e;case"link":var E=Xw("link","href",d).get(u+(o.href||""));if(E){for(var b=0;b<E.length;b++)if(p=E[b],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){E.splice(b,1);break t}}p=d.createElement(u),hn(p,u,o),d.head.appendChild(p);break;case"meta":if(E=Xw("meta","content",d).get(u+(o.content||""))){for(b=0;b<E.length;b++)if(p=E[b],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){E.splice(b,1);break t}}p=d.createElement(u),hn(p,u,o),d.head.appendChild(p);break;default:throw Error(n(468,u))}p[Gt]=r,Ct(p),u=p}r.stateNode=u}else Jw(d,r.type,r.stateNode);else r.stateNode=$w(d,u,r.memoizedProps);else p!==u?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,u===null?Jw(d,r.type,r.stateNode):$w(d,u,r.memoizedProps)):u===null&&r.stateNode!==null&&ug(r,r.memoizedProps,o.memoizedProps)}break;case 27:Hn(s,r),Kn(r),u&512&&(Dt||o===null||Hr(o,o.return)),o!==null&&u&4&&ug(r,r.memoizedProps,o.memoizedProps);break;case 5:if(Hn(s,r),Kn(r),u&512&&(Dt||o===null||Hr(o,o.return)),r.flags&32){d=r.stateNode;try{rr(d,"")}catch(q){it(r,r.return,q)}}u&4&&r.stateNode!=null&&(d=r.memoizedProps,ug(r,d,o!==null?o.memoizedProps:d)),u&1024&&(dg=!0);break;case 6:if(Hn(s,r),Kn(r),u&4){if(r.stateNode===null)throw Error(n(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(q){it(r,r.return,q)}}break;case 3:if(lf=null,d=Ar,Ar=af(s.containerInfo),Hn(s,r),Ar=d,Kn(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Ec(s.containerInfo)}catch(q){it(r,r.return,q)}dg&&(dg=!1,iw(r));break;case 4:u=Ar,Ar=af(r.stateNode.containerInfo),Hn(s,r),Kn(r),Ar=u;break;case 12:Hn(s,r),Kn(r);break;case 13:Hn(s,r),Kn(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(vg=tr()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,fg(r,u)));break;case 22:d=r.memoizedState!==null;var x=o!==null&&o.memoizedState!==null,z=Di,$=Dt;if(Di=z||d,Dt=$||x,Hn(s,r),Dt=$,Di=z,Kn(r),u&8192)e:for(s=r.stateNode,s._visibility=d?s._visibility&-2:s._visibility|1,d&&(o===null||x||Di||Dt||Oa(r)),o=null,s=r;;){if(s.tag===5||s.tag===26){if(o===null){x=o=s;try{if(p=x.stateNode,d)E=p.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{b=x.stateNode;var J=x.memoizedProps.style,B=J!=null&&J.hasOwnProperty("display")?J.display:null;b.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(q){it(x,x.return,q)}}}else if(s.tag===6){if(o===null){x=s;try{x.stateNode.nodeValue=d?"":x.memoizedProps}catch(q){it(x,x.return,q)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,fg(r,o))));break;case 19:Hn(s,r),Kn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,fg(r,u)));break;case 30:break;case 21:break;default:Hn(s,r),Kn(r)}}function Kn(r){var s=r.flags;if(s&2){try{for(var o,u=r.return;u!==null;){if($T(u)){o=u;break}u=u.return}if(o==null)throw Error(n(160));switch(o.tag){case 27:var d=o.stateNode,p=cg(r);Kd(r,p,d);break;case 5:var E=o.stateNode;o.flags&32&&(rr(E,""),o.flags&=-33);var b=cg(r);Kd(r,b,E);break;case 3:case 4:var x=o.stateNode.containerInfo,z=cg(r);hg(r,z,x);break;default:throw Error(n(161))}}catch($){it(r,r.return,$)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function iw(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;iw(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function cs(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)ZT(r,s.alternate,s),s=s.sibling}function Oa(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:us(4,s,s.return),Oa(s);break;case 1:Hr(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&WT(s,s.return,o),Oa(s);break;case 27:dc(s.stateNode);case 26:case 5:Hr(s,s.return),Oa(s);break;case 22:s.memoizedState===null&&Oa(s);break;case 30:Oa(s);break;default:Oa(s)}r=r.sibling}}function hs(r,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,d=r,p=s,E=p.flags;switch(p.tag){case 0:case 11:case 15:hs(d,p,o),nc(4,p);break;case 1:if(hs(d,p,o),u=p,d=u.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(z){it(u,u.return,z)}if(u=p,d=u.updateQueue,d!==null){var b=u.stateNode;try{var x=d.shared.hiddenCallbacks;if(x!==null)for(d.shared.hiddenCallbacks=null,d=0;d<x.length;d++)kE(x[d],b)}catch(z){it(u,u.return,z)}}o&&E&64&&QT(p),rc(p,p.return);break;case 27:XT(p);case 26:case 5:hs(d,p,o),o&&u===null&&E&4&&YT(p),rc(p,p.return);break;case 12:hs(d,p,o);break;case 13:hs(d,p,o),o&&E&4&&nw(d,p);break;case 22:p.memoizedState===null&&hs(d,p,o),rc(p,p.return);break;case 30:break;default:hs(d,p,o)}s=s.sibling}}function mg(r,s){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&Bu(o))}function pg(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Bu(r))}function Kr(r,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)sw(r,s,o,u),s=s.sibling}function sw(r,s,o,u){var d=s.flags;switch(s.tag){case 0:case 11:case 15:Kr(r,s,o,u),d&2048&&nc(9,s);break;case 1:Kr(r,s,o,u);break;case 3:Kr(r,s,o,u),d&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Bu(r)));break;case 12:if(d&2048){Kr(r,s,o,u),r=s.stateNode;try{var p=s.memoizedProps,E=p.id,b=p.onPostCommit;typeof b=="function"&&b(E,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(x){it(s,s.return,x)}}else Kr(r,s,o,u);break;case 13:Kr(r,s,o,u);break;case 23:break;case 22:p=s.stateNode,E=s.alternate,s.memoizedState!==null?p._visibility&2?Kr(r,s,o,u):ic(r,s):p._visibility&2?Kr(r,s,o,u):(p._visibility|=2,Zo(r,s,o,u,(s.subtreeFlags&10256)!==0)),d&2048&&mg(E,s);break;case 24:Kr(r,s,o,u),d&2048&&pg(s.alternate,s);break;default:Kr(r,s,o,u)}}function Zo(r,s,o,u,d){for(d=d&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var p=r,E=s,b=o,x=u,z=E.flags;switch(E.tag){case 0:case 11:case 15:Zo(p,E,b,x,d),nc(8,E);break;case 23:break;case 22:var $=E.stateNode;E.memoizedState!==null?$._visibility&2?Zo(p,E,b,x,d):ic(p,E):($._visibility|=2,Zo(p,E,b,x,d)),d&&z&2048&&mg(E.alternate,E);break;case 24:Zo(p,E,b,x,d),d&&z&2048&&pg(E.alternate,E);break;default:Zo(p,E,b,x,d)}s=s.sibling}}function ic(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=r,u=s,d=u.flags;switch(u.tag){case 22:ic(o,u),d&2048&&mg(u.alternate,u);break;case 24:ic(o,u),d&2048&&pg(u.alternate,u);break;default:ic(o,u)}s=s.sibling}}var sc=8192;function el(r){if(r.subtreeFlags&sc)for(r=r.child;r!==null;)aw(r),r=r.sibling}function aw(r){switch(r.tag){case 26:el(r),r.flags&sc&&r.memoizedState!==null&&cC(Ar,r.memoizedState,r.memoizedProps);break;case 5:el(r);break;case 3:case 4:var s=Ar;Ar=af(r.stateNode.containerInfo),el(r),Ar=s;break;case 22:r.memoizedState===null&&(s=r.alternate,s!==null&&s.memoizedState!==null?(s=sc,sc=16777216,el(r),sc=s):el(r));break;default:el(r)}}function ow(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function ac(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];en=u,uw(u,r)}ow(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)lw(r),r=r.sibling}function lw(r){switch(r.tag){case 0:case 11:case 15:ac(r),r.flags&2048&&us(9,r,r.return);break;case 3:ac(r);break;case 12:ac(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,Qd(r)):ac(r);break;default:ac(r)}}function Qd(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];en=u,uw(u,r)}ow(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:us(8,s,s.return),Qd(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,Qd(s));break;default:Qd(s)}r=r.sibling}}function uw(r,s){for(;en!==null;){var o=en;switch(o.tag){case 0:case 11:case 15:us(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Bu(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,en=u;else e:for(o=r;en!==null;){u=en;var d=u.sibling,p=u.return;if(ew(u),u===o){en=null;break e}if(d!==null){d.return=p,en=d;break e}en=p}}}var Sx={getCacheForType:function(r){var s=yn(Qt),o=s.data.get(r);return o===void 0&&(o=r(),s.data.set(r,o)),o}},Rx=typeof WeakMap=="function"?WeakMap:Map,$e=0,at=null,Ve=null,ze=0,Xe=0,Qn=null,ds=!1,tl=!1,gg=!1,ki=0,It=0,fs=0,Ma=0,yg=0,dr=0,nl=0,oc=null,On=null,_g=!1,vg=0,Wd=1/0,Yd=null,ms=null,cn=0,ps=null,rl=null,il=0,Eg=0,Tg=null,cw=null,lc=0,wg=null;function Wn(){if(($e&2)!==0&&ze!==0)return ze&-ze;if(Y.T!==null){var r=Ho;return r!==0?r:Cg()}return $i()}function hw(){dr===0&&(dr=(ze&536870912)===0||Ke?yu():536870912);var r=hr.current;return r!==null&&(r.flags|=32),dr}function Yn(r,s,o){(r===at&&(Xe===2||Xe===9)||r.cancelPendingCommit!==null)&&(sl(r,0),gs(r,ze,dr,!1)),hi(r,o),(($e&2)===0||r!==at)&&(r===at&&(($e&2)===0&&(Ma|=o),It===4&&gs(r,ze,dr,!1)),Qr(r))}function dw(r,s,o){if(($e&6)!==0)throw Error(n(327));var u=!o&&(s&124)===0&&(s&r.expiredLanes)===0||la(r,s),d=u?Nx(r,s):Ig(r,s,!0),p=u;do{if(d===0){tl&&!u&&gs(r,s,0,!1);break}else{if(o=r.current.alternate,p&&!xx(o)){d=Ig(r,s,!1),p=!1;continue}if(d===2){if(p=s,r.errorRecoveryDisabledLanes&p)var E=0;else E=r.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){s=E;e:{var b=r;d=oc;var x=b.current.memoizedState.isDehydrated;if(x&&(sl(b,E).flags|=256),E=Ig(b,E,!1),E!==2){if(gg&&!x){b.errorRecoveryDisabledLanes|=p,Ma|=p,d=4;break e}p=On,On=d,p!==null&&(On===null?On=p:On.push.apply(On,p))}d=E}if(p=!1,d!==2)continue}}if(d===1){sl(r,0),gs(r,s,0,!0);break}e:{switch(u=r,p=d,p){case 0:case 1:throw Error(n(345));case 4:if((s&4194048)!==s)break;case 6:gs(u,s,dr,!ds);break e;case 2:On=null;break;case 3:case 5:break;default:throw Error(n(329))}if((s&62914560)===s&&(d=vg+300-tr(),10<d)){if(gs(u,s,dr,!ds),wo(u,0,!0)!==0)break e;u.timeoutHandle=zw(fw.bind(null,u,o,On,Yd,_g,s,dr,Ma,nl,ds,p,2,-0,0),d);break e}fw(u,o,On,Yd,_g,s,dr,Ma,nl,ds,p,0,-0,0)}}break}while(!0);Qr(r)}function fw(r,s,o,u,d,p,E,b,x,z,$,J,B,q){if(r.timeoutHandle=-1,J=s.subtreeFlags,(J&8192||(J&16785408)===16785408)&&(pc={stylesheets:null,count:0,unsuspend:uC},aw(s),J=hC(),J!==null)){r.cancelPendingCommit=J(Ew.bind(null,r,s,p,o,u,d,E,b,x,$,1,B,q)),gs(r,p,E,!z);return}Ew(r,s,p,o,u,d,E,b,x)}function xx(r){for(var s=r;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var d=o[u],p=d.getSnapshot;d=d.value;try{if(!qn(p(),d))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function gs(r,s,o,u){s&=~yg,s&=~Ma,r.suspendedLanes|=s,r.pingedLanes&=~s,u&&(r.warmLanes|=s),u=r.expirationTimes;for(var d=s;0<d;){var p=31-gn(d),E=1<<p;u[p]=-1,d&=~E}o!==0&&Pr(r,o,s)}function $d(){return($e&6)===0?(uc(0),!1):!0}function bg(){if(Ve!==null){if(Xe===0)var r=Ve.return;else r=Ve,Ii=Na=null,jp(r),Xo=null,Zu=0,r=Ve;for(;r!==null;)KT(r.alternate,r),r=r.return;Ve=null}}function sl(r,s){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,Kx(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),bg(),at=r,Ve=o=wi(r.current,null),ze=s,Xe=0,Qn=null,ds=!1,tl=la(r,s),gg=!1,nl=dr=yg=Ma=fs=It=0,On=oc=null,_g=!1,(s&8)!==0&&(s|=s&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=s;0<u;){var d=31-gn(u),p=1<<d;s|=r[d],u&=~p}return ki=s,_d(),o}function mw(r,s){Pe=null,Y.H=Ld,s===Gu||s===Rd?(s=DE(),Xe=3):s===xE?(s=DE(),Xe=4):Xe=s===PT?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Qn=s,Ve===null&&(It=1,Bd(r,or(s,r.current)))}function pw(){var r=Y.H;return Y.H=Ld,r===null?Ld:r}function gw(){var r=Y.A;return Y.A=Sx,r}function Ag(){It=4,ds||(ze&4194048)!==ze&&hr.current!==null||(tl=!0),(fs&134217727)===0&&(Ma&134217727)===0||at===null||gs(at,ze,dr,!1)}function Ig(r,s,o){var u=$e;$e|=2;var d=pw(),p=gw();(at!==r||ze!==s)&&(Yd=null,sl(r,s)),s=!1;var E=It;e:do try{if(Xe!==0&&Ve!==null){var b=Ve,x=Qn;switch(Xe){case 8:bg(),E=6;break e;case 3:case 2:case 9:case 6:hr.current===null&&(s=!0);var z=Xe;if(Xe=0,Qn=null,al(r,b,x,z),o&&tl){E=0;break e}break;default:z=Xe,Xe=0,Qn=null,al(r,b,x,z)}}Cx(),E=It;break}catch($){mw(r,$)}while(!0);return s&&r.shellSuspendCounter++,Ii=Na=null,$e=u,Y.H=d,Y.A=p,Ve===null&&(at=null,ze=0,_d()),E}function Cx(){for(;Ve!==null;)yw(Ve)}function Nx(r,s){var o=$e;$e|=2;var u=pw(),d=gw();at!==r||ze!==s?(Yd=null,Wd=tr()+500,sl(r,s)):tl=la(r,s);e:do try{if(Xe!==0&&Ve!==null){s=Ve;var p=Qn;t:switch(Xe){case 1:Xe=0,Qn=null,al(r,s,p,1);break;case 2:case 9:if(CE(p)){Xe=0,Qn=null,_w(s);break}s=function(){Xe!==2&&Xe!==9||at!==r||(Xe=7),Qr(r)},p.then(s,s);break e;case 3:Xe=7;break e;case 4:Xe=5;break e;case 7:CE(p)?(Xe=0,Qn=null,_w(s)):(Xe=0,Qn=null,al(r,s,p,7));break;case 5:var E=null;switch(Ve.tag){case 26:E=Ve.memoizedState;case 5:case 27:var b=Ve;if(!E||Zw(E)){Xe=0,Qn=null;var x=b.sibling;if(x!==null)Ve=x;else{var z=b.return;z!==null?(Ve=z,Xd(z)):Ve=null}break t}}Xe=0,Qn=null,al(r,s,p,5);break;case 6:Xe=0,Qn=null,al(r,s,p,6);break;case 8:bg(),It=6;break e;default:throw Error(n(462))}}Dx();break}catch($){mw(r,$)}while(!0);return Ii=Na=null,Y.H=u,Y.A=d,$e=o,Ve!==null?0:(at=null,ze=0,_d(),It)}function Dx(){for(;Ve!==null&&!fu();)yw(Ve)}function yw(r){var s=GT(r.alternate,r,ki);r.memoizedProps=r.pendingProps,s===null?Xd(r):Ve=s}function _w(r){var s=r,o=s.alternate;switch(s.tag){case 15:case 0:s=UT(o,s,s.pendingProps,s.type,void 0,ze);break;case 11:s=UT(o,s,s.pendingProps,s.type.render,s.ref,ze);break;case 5:jp(s);default:KT(o,s),s=Ve=vE(s,ki),s=GT(o,s,ki)}r.memoizedProps=r.pendingProps,s===null?Xd(r):Ve=s}function al(r,s,o,u){Ii=Na=null,jp(s),Xo=null,Zu=0;var d=s.return;try{if(Ex(r,d,s,o,ze)){It=1,Bd(r,or(o,r.current)),Ve=null;return}}catch(p){if(d!==null)throw Ve=d,p;It=1,Bd(r,or(o,r.current)),Ve=null;return}s.flags&32768?(Ke||u===1?r=!0:tl||(ze&536870912)!==0?r=!1:(ds=r=!0,(u===2||u===9||u===3||u===6)&&(u=hr.current,u!==null&&u.tag===13&&(u.flags|=16384))),vw(s,r)):Xd(s)}function Xd(r){var s=r;do{if((s.flags&32768)!==0){vw(s,ds);return}r=s.return;var o=wx(s.alternate,s,ki);if(o!==null){Ve=o;return}if(s=s.sibling,s!==null){Ve=s;return}Ve=s=r}while(s!==null);It===0&&(It=5)}function vw(r,s){do{var o=bx(r.alternate,r);if(o!==null){o.flags&=32767,Ve=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(r=r.sibling,r!==null)){Ve=r;return}Ve=r=o}while(r!==null);It=6,Ve=null}function Ew(r,s,o,u,d,p,E,b,x){r.cancelPendingCommit=null;do Jd();while(cn!==0);if(($e&6)!==0)throw Error(n(327));if(s!==null){if(s===r.current)throw Error(n(177));if(p=s.lanes|s.childLanes,p|=pp,vu(r,o,p,E,b,x),r===at&&(Ve=at=null,ze=0),rl=s,ps=r,il=o,Eg=p,Tg=d,cw=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,Ox(ia,function(){return Iw(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=Y.T,Y.T=null,d=ue.p,ue.p=2,E=$e,$e|=4;try{Ax(r,s,o)}finally{$e=E,ue.p=d,Y.T=u}}cn=1,Tw(),ww(),bw()}}function Tw(){if(cn===1){cn=0;var r=ps,s=rl,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=Y.T,Y.T=null;var u=ue.p;ue.p=2;var d=$e;$e|=4;try{rw(s,r);var p=Lg,E=uE(r.containerInfo),b=p.focusedElem,x=p.selectionRange;if(E!==b&&b&&b.ownerDocument&&lE(b.ownerDocument.documentElement,b)){if(x!==null&&cp(b)){var z=x.start,$=x.end;if($===void 0&&($=z),"selectionStart"in b)b.selectionStart=z,b.selectionEnd=Math.min($,b.value.length);else{var J=b.ownerDocument||document,B=J&&J.defaultView||window;if(B.getSelection){var q=B.getSelection(),xe=b.textContent.length,Se=Math.min(x.start,xe),rt=x.end===void 0?Se:Math.min(x.end,xe);!q.extend&&Se>rt&&(E=rt,rt=Se,Se=E);var M=oE(b,Se),P=oE(b,rt);if(M&&P&&(q.rangeCount!==1||q.anchorNode!==M.node||q.anchorOffset!==M.offset||q.focusNode!==P.node||q.focusOffset!==P.offset)){var j=J.createRange();j.setStart(M.node,M.offset),q.removeAllRanges(),Se>rt?(q.addRange(j),q.extend(P.node,P.offset)):(j.setEnd(P.node,P.offset),q.addRange(j))}}}}for(J=[],q=b;q=q.parentNode;)q.nodeType===1&&J.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<J.length;b++){var X=J[b];X.element.scrollLeft=X.left,X.element.scrollTop=X.top}}hf=!!Mg,Lg=Mg=null}finally{$e=d,ue.p=u,Y.T=o}}r.current=s,cn=2}}function ww(){if(cn===2){cn=0;var r=ps,s=rl,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=Y.T,Y.T=null;var u=ue.p;ue.p=2;var d=$e;$e|=4;try{ZT(r,s.alternate,s)}finally{$e=d,ue.p=u,Y.T=o}}cn=3}}function bw(){if(cn===4||cn===3){cn=0,Qh();var r=ps,s=rl,o=il,u=cw;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?cn=5:(cn=0,rl=ps=null,Aw(r,r.pendingLanes));var d=r.pendingLanes;if(d===0&&(ms=null),bo(o),s=s.stateNode,Ye&&typeof Ye.onCommitFiberRoot=="function")try{Ye.onCommitFiberRoot(bt,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=Y.T,d=ue.p,ue.p=2,Y.T=null;try{for(var p=r.onRecoverableError,E=0;E<u.length;E++){var b=u[E];p(b.value,{componentStack:b.stack})}}finally{Y.T=s,ue.p=d}}(il&3)!==0&&Jd(),Qr(r),d=r.pendingLanes,(o&4194090)!==0&&(d&42)!==0?r===wg?lc++:(lc=0,wg=r):lc=0,uc(0)}}function Aw(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,Bu(s)))}function Jd(r){return Tw(),ww(),bw(),Iw()}function Iw(){if(cn!==5)return!1;var r=ps,s=Eg;Eg=0;var o=bo(il),u=Y.T,d=ue.p;try{ue.p=32>o?32:o,Y.T=null,o=Tg,Tg=null;var p=ps,E=il;if(cn=0,rl=ps=null,il=0,($e&6)!==0)throw Error(n(331));var b=$e;if($e|=4,lw(p.current),sw(p,p.current,E,o),$e=b,uc(0,!1),Ye&&typeof Ye.onPostCommitFiberRoot=="function")try{Ye.onPostCommitFiberRoot(bt,p)}catch{}return!0}finally{ue.p=d,Y.T=u,Aw(r,s)}}function Sw(r,s,o){s=or(o,s),s=eg(r.stateNode,s,2),r=ss(r,s,2),r!==null&&(hi(r,2),Qr(r))}function it(r,s,o){if(r.tag===3)Sw(r,r,o);else for(;s!==null;){if(s.tag===3){Sw(s,r,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ms===null||!ms.has(u))){r=or(o,r),o=NT(2),u=ss(s,o,2),u!==null&&(DT(o,u,s,r),hi(u,2),Qr(u));break}}s=s.return}}function Sg(r,s,o){var u=r.pingCache;if(u===null){u=r.pingCache=new Rx;var d=new Set;u.set(s,d)}else d=u.get(s),d===void 0&&(d=new Set,u.set(s,d));d.has(o)||(gg=!0,d.add(o),r=Px.bind(null,r,s,o),s.then(r,r))}function Px(r,s,o){var u=r.pingCache;u!==null&&u.delete(s),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,at===r&&(ze&o)===o&&(It===4||It===3&&(ze&62914560)===ze&&300>tr()-vg?($e&2)===0&&sl(r,0):yg|=o,nl===ze&&(nl=0)),Qr(r)}function Rw(r,s){s===0&&(s=_u()),r=zo(r,s),r!==null&&(hi(r,s),Qr(r))}function kx(r){var s=r.memoizedState,o=0;s!==null&&(o=s.retryLane),Rw(r,o)}function Vx(r,s){var o=0;switch(r.tag){case 13:var u=r.stateNode,d=r.memoizedState;d!==null&&(o=d.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(n(314))}u!==null&&u.delete(s),Rw(r,o)}function Ox(r,s){return vr(r,s)}var Zd=null,ol=null,Rg=!1,ef=!1,xg=!1,La=0;function Qr(r){r!==ol&&r.next===null&&(ol===null?Zd=ol=r:ol=ol.next=r),ef=!0,Rg||(Rg=!0,Lx())}function uc(r,s){if(!xg&&ef){xg=!0;do for(var o=!1,u=Zd;u!==null;){if(r!==0){var d=u.pendingLanes;if(d===0)var p=0;else{var E=u.suspendedLanes,b=u.pingedLanes;p=(1<<31-gn(42|r)+1)-1,p&=d&~(E&~b),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,Dw(u,p))}else p=ze,p=wo(u,u===at?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||la(u,p)||(o=!0,Dw(u,p));u=u.next}while(o);xg=!1}}function Mx(){xw()}function xw(){ef=Rg=!1;var r=0;La!==0&&(Hx()&&(r=La),La=0);for(var s=tr(),o=null,u=Zd;u!==null;){var d=u.next,p=Cw(u,s);p===0?(u.next=null,o===null?Zd=d:o.next=d,d===null&&(ol=o)):(o=u,(r!==0||(p&3)!==0)&&(ef=!0)),u=d}uc(r)}function Cw(r,s){for(var o=r.suspendedLanes,u=r.pingedLanes,d=r.expirationTimes,p=r.pendingLanes&-62914561;0<p;){var E=31-gn(p),b=1<<E,x=d[E];x===-1?((b&o)===0||(b&u)!==0)&&(d[E]=gu(b,s)):x<=s&&(r.expiredLanes|=b),p&=~b}if(s=at,o=ze,o=wo(r,r===s?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===s&&(Xe===2||Xe===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&ra(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||la(r,o)){if(s=o&-o,s===r.callbackPriority)return s;switch(u!==null&&ra(u),bo(o)){case 2:case 8:o=Eo;break;case 32:o=ia;break;case 268435456:o=To;break;default:o=ia}return u=Nw.bind(null,r),o=vr(o,u),r.callbackPriority=s,r.callbackNode=o,s}return u!==null&&u!==null&&ra(u),r.callbackPriority=2,r.callbackNode=null,2}function Nw(r,s){if(cn!==0&&cn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(Jd()&&r.callbackNode!==o)return null;var u=ze;return u=wo(r,r===at?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(dw(r,u,s),Cw(r,tr()),r.callbackNode!=null&&r.callbackNode===o?Nw.bind(null,r):null)}function Dw(r,s){if(Jd())return null;dw(r,s,!0)}function Lx(){Qx(function(){($e&6)!==0?vr(mu,Mx):xw()})}function Cg(){return La===0&&(La=yu()),La}function Pw(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Co(""+r)}function kw(r,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,r.id&&o.setAttribute("form",r.id),s.parentNode.insertBefore(o,s),r=new FormData(r),o.parentNode.removeChild(o),r}function Ux(r,s,o,u,d){if(s==="submit"&&o&&o.stateNode===d){var p=Pw((d[Ot]||null).action),E=u.submitter;E&&(s=(s=E[Ot]||null)?Pw(s.formAction):E.getAttribute("formAction"),s!==null&&(p=s,E=null));var b=new No("action","action",null,u,d);r.push({event:b,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(La!==0){var x=E?kw(d,E):new FormData(d);Yp(o,{pending:!0,data:x,method:d.method,action:p},null,x)}}else typeof p=="function"&&(b.preventDefault(),x=E?kw(d,E):new FormData(d),Yp(o,{pending:!0,data:x,method:d.method,action:p},p,x))},currentTarget:d}]})}}for(var Ng=0;Ng<mp.length;Ng++){var Dg=mp[Ng],Fx=Dg.toLowerCase(),jx=Dg[0].toUpperCase()+Dg.slice(1);br(Fx,"on"+jx)}br(dE,"onAnimationEnd"),br(fE,"onAnimationIteration"),br(mE,"onAnimationStart"),br("dblclick","onDoubleClick"),br("focusin","onFocus"),br("focusout","onBlur"),br(rx,"onTransitionRun"),br(ix,"onTransitionStart"),br(sx,"onTransitionCancel"),br(pE,"onTransitionEnd"),fi("onMouseEnter",["mouseout","mouseover"]),fi("onMouseLeave",["mouseout","mouseover"]),fi("onPointerEnter",["pointerout","pointerover"]),fi("onPointerLeave",["pointerout","pointerover"]),Tr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Tr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Tr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Tr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Tr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Tr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(cc));function Vw(r,s){s=(s&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],d=u.event;u=u.listeners;e:{var p=void 0;if(s)for(var E=u.length-1;0<=E;E--){var b=u[E],x=b.instance,z=b.currentTarget;if(b=b.listener,x!==p&&d.isPropagationStopped())break e;p=b,d.currentTarget=z;try{p(d)}catch($){zd($)}d.currentTarget=null,p=x}else for(E=0;E<u.length;E++){if(b=u[E],x=b.instance,z=b.currentTarget,b=b.listener,x!==p&&d.isPropagationStopped())break e;p=b,d.currentTarget=z;try{p(d)}catch($){zd($)}d.currentTarget=null,p=x}}}}function Oe(r,s){var o=s[Tu];o===void 0&&(o=s[Tu]=new Set);var u=r+"__bubble";o.has(u)||(Ow(s,r,2,!1),o.add(u))}function Pg(r,s,o){var u=0;s&&(u|=4),Ow(o,r,u,s)}var tf="_reactListening"+Math.random().toString(36).slice(2);function kg(r){if(!r[tf]){r[tf]=!0,wu.forEach(function(o){o!=="selectionchange"&&(zx.has(o)||Pg(o,!1,r),Pg(o,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[tf]||(s[tf]=!0,Pg("selectionchange",!1,s))}}function Ow(r,s,o,u){switch(s0(s)){case 2:var d=mC;break;case 8:d=pC;break;default:d=Qg}o=d.bind(null,s,o,r),d=void 0,!sr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),u?d!==void 0?r.addEventListener(s,o,{capture:!0,passive:d}):r.addEventListener(s,o,!0):d!==void 0?r.addEventListener(s,o,{passive:d}):r.addEventListener(s,o,!1)}function Vg(r,s,o,u,d){var p=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var b=u.stateNode.containerInfo;if(b===d)break;if(E===4)for(E=u.return;E!==null;){var x=E.tag;if((x===3||x===4)&&E.stateNode.containerInfo===d)return;E=E.return}for(;b!==null;){if(E=di(b),E===null)return;if(x=E.tag,x===5||x===6||x===26||x===27){u=p=E;continue e}b=b.parentNode}}u=u.return}rd(function(){var z=p,$=ir(o),J=[];e:{var B=gE.get(r);if(B!==void 0){var q=No,xe=r;switch(r){case"keypress":if(Ur(o)===0)break e;case"keydown":case"keyup":q=Mo;break;case"focusin":xe="focus",q=ko;break;case"focusout":xe="blur",q=ko;break;case"beforeblur":case"afterblur":q=ko;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=ar;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=ap;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=hd;break;case dE:case fE:case mE:q=Vo;break;case pE:q=fd;break;case"scroll":case"scrollend":q=id;break;case"wheel":q=Lo;break;case"copy":case"cut":case"paste":q=Oo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=Vu;break;case"toggle":case"beforetoggle":q=pd}var Se=(s&4)!==0,rt=!Se&&(r==="scroll"||r==="scrollend"),M=Se?B!==null?B+"Capture":null:B;Se=[];for(var P=z,j;P!==null;){var X=P;if(j=X.stateNode,X=X.tag,X!==5&&X!==26&&X!==27||j===null||M===null||(X=ga(P,M),X!=null&&Se.push(hc(P,X,j))),rt)break;P=P.return}0<Se.length&&(B=new q(B,xe,null,o,$),J.push({event:B,listeners:Se}))}}if((s&7)===0){e:{if(B=r==="mouseover"||r==="pointerover",q=r==="mouseout"||r==="pointerout",B&&o!==gi&&(xe=o.relatedTarget||o.fromElement)&&(di(xe)||xe[nr]))break e;if((q||B)&&(B=$.window===$?$:(B=$.ownerDocument)?B.defaultView||B.parentWindow:window,q?(xe=o.relatedTarget||o.toElement,q=z,xe=xe?di(xe):null,xe!==null&&(rt=l(xe),Se=xe.tag,xe!==rt||Se!==5&&Se!==27&&Se!==6)&&(xe=null)):(q=null,xe=z),q!==xe)){if(Se=ar,X="onMouseLeave",M="onMouseEnter",P="mouse",(r==="pointerout"||r==="pointerover")&&(Se=Vu,X="onPointerLeave",M="onPointerEnter",P="pointer"),rt=q==null?B:Vr(q),j=xe==null?B:Vr(xe),B=new Se(X,P+"leave",q,o,$),B.target=rt,B.relatedTarget=j,X=null,di($)===z&&(Se=new Se(M,P+"enter",xe,o,$),Se.target=j,Se.relatedTarget=rt,X=Se),rt=X,q&&xe)t:{for(Se=q,M=xe,P=0,j=Se;j;j=ll(j))P++;for(j=0,X=M;X;X=ll(X))j++;for(;0<P-j;)Se=ll(Se),P--;for(;0<j-P;)M=ll(M),j--;for(;P--;){if(Se===M||M!==null&&Se===M.alternate)break t;Se=ll(Se),M=ll(M)}Se=null}else Se=null;q!==null&&Mw(J,B,q,Se,!1),xe!==null&&rt!==null&&Mw(J,rt,xe,Se,!0)}}e:{if(B=z?Vr(z):window,q=B.nodeName&&B.nodeName.toLowerCase(),q==="select"||q==="input"&&B.type==="file")var ge=tE;else if(Kt(B))if(nE)ge=ex;else{ge=J1;var ke=X1}else q=B.nodeName,!q||q.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?z&&Ru(z.elementType)&&(ge=tE):ge=Z1;if(ge&&(ge=ge(r,z))){Ti(J,ge,o,$);break e}ke&&ke(r,B,z),r==="focusout"&&z&&B.type==="number"&&z.memoizedProps.value!=null&&es(B,"number",B.value)}switch(ke=z?Vr(z):window,r){case"focusin":(Kt(ke)||ke.contentEditable==="true")&&(Uo=ke,hp=z,Lu=null);break;case"focusout":Lu=hp=Uo=null;break;case"mousedown":dp=!0;break;case"contextmenu":case"mouseup":case"dragend":dp=!1,cE(J,o,$);break;case"selectionchange":if(nx)break;case"keydown":case"keyup":cE(J,o,$)}var Te;if(zr)e:{switch(r){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else Fe?Q(r,o)&&(Re="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(Re="onCompositionStart");Re&&(v&&o.locale!=="ko"&&(Fe||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&Fe&&(Te=Cu()):(Lr=$,ts="value"in Lr?Lr.value:Lr.textContent,Fe=!0)),ke=nf(z,Re),0<ke.length&&(Re=new Pu(Re,r,null,o,$),J.push({event:Re,listeners:ke}),Te?Re.data=Te:(Te=se(o),Te!==null&&(Re.data=Te)))),(Te=y?Ht(r,o):je(r,o))&&(Re=nf(z,"onBeforeInput"),0<Re.length&&(ke=new Pu("onBeforeInput","beforeinput",null,o,$),J.push({event:ke,listeners:Re}),ke.data=Te)),Ux(J,r,z,o,$)}Vw(J,s)})}function hc(r,s,o){return{instance:r,listener:s,currentTarget:o}}function nf(r,s){for(var o=s+"Capture",u=[];r!==null;){var d=r,p=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||p===null||(d=ga(r,o),d!=null&&u.unshift(hc(r,d,p)),d=ga(r,s),d!=null&&u.push(hc(r,d,p))),r.tag===3)return u;r=r.return}return[]}function ll(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function Mw(r,s,o,u,d){for(var p=s._reactName,E=[];o!==null&&o!==u;){var b=o,x=b.alternate,z=b.stateNode;if(b=b.tag,x!==null&&x===u)break;b!==5&&b!==26&&b!==27||z===null||(x=z,d?(z=ga(o,p),z!=null&&E.unshift(hc(o,z,x))):d||(z=ga(o,p),z!=null&&E.push(hc(o,z,x)))),o=o.return}E.length!==0&&r.push({event:s,listeners:E})}var Bx=/\r\n?/g,qx=/\u0000|\uFFFD/g;function Lw(r){return(typeof r=="string"?r:""+r).replace(Bx,`
`).replace(qx,"")}function Uw(r,s){return s=Lw(s),Lw(r)===s}function rf(){}function nt(r,s,o,u,d,p){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||rr(r,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&rr(r,""+u);break;case"className":Or(r,"class",u);break;case"tabIndex":Or(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Or(r,o,u);break;case"style":Su(r,u,p);break;case"data":if(s!=="object"){Or(r,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=Co(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(s!=="input"&&nt(r,s,"name",d.name,d,null),nt(r,s,"formEncType",d.formEncType,d,null),nt(r,s,"formMethod",d.formMethod,d,null),nt(r,s,"formTarget",d.formTarget,d,null)):(nt(r,s,"encType",d.encType,d,null),nt(r,s,"method",d.method,d,null),nt(r,s,"target",d.target,d,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=Co(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=rf);break;case"onScroll":u!=null&&Oe("scroll",r);break;case"onScrollEnd":u!=null&&Oe("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(n(61));if(o=u.__html,o!=null){if(d.children!=null)throw Error(n(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=Co(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":Oe("beforetoggle",r),Oe("toggle",r),Zi(r,"popover",u);break;case"xlinkActuate":on(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":on(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":on(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":on(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":on(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":on(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":on(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":on(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":on(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Zi(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=ip.get(o)||o,Zi(r,o,u))}}function Og(r,s,o,u,d,p){switch(o){case"style":Su(r,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(n(61));if(o=u.__html,o!=null){if(d.children!=null)throw Error(n(60));r.innerHTML=o}}break;case"children":typeof u=="string"?rr(r,u):(typeof u=="number"||typeof u=="bigint")&&rr(r,""+u);break;case"onScroll":u!=null&&Oe("scroll",r);break;case"onScrollEnd":u!=null&&Oe("scrollend",r);break;case"onClick":u!=null&&(r.onclick=rf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ao.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(d=o.endsWith("Capture"),s=o.slice(2,d?o.length-7:void 0),p=r[Ot]||null,p=p!=null?p[o]:null,typeof p=="function"&&r.removeEventListener(s,p,d),typeof u=="function")){typeof p!="function"&&p!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(s,u,d);break e}o in r?r[o]=u:u===!0?r.setAttribute(o,""):Zi(r,o,u)}}}function hn(r,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oe("error",r),Oe("load",r);var u=!1,d=!1,p;for(p in o)if(o.hasOwnProperty(p)){var E=o[p];if(E!=null)switch(p){case"src":u=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:nt(r,s,p,E,o,null)}}d&&nt(r,s,"srcSet",o.srcSet,o,null),u&&nt(r,s,"src",o.src,o,null);return;case"input":Oe("invalid",r);var b=p=E=d=null,x=null,z=null;for(u in o)if(o.hasOwnProperty(u)){var $=o[u];if($!=null)switch(u){case"name":d=$;break;case"type":E=$;break;case"checked":x=$;break;case"defaultChecked":z=$;break;case"value":p=$;break;case"defaultValue":b=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(n(137,s));break;default:nt(r,s,u,$,o,null)}}fa(r,p,b,x,z,E,d,!1),xo(r);return;case"select":Oe("invalid",r),u=E=p=null;for(d in o)if(o.hasOwnProperty(d)&&(b=o[d],b!=null))switch(d){case"value":p=b;break;case"defaultValue":E=b;break;case"multiple":u=b;default:nt(r,s,d,b,o,null)}s=p,o=E,r.multiple=!!u,s!=null?pi(r,!!u,s,!1):o!=null&&pi(r,!!u,o,!0);return;case"textarea":Oe("invalid",r),p=d=u=null;for(E in o)if(o.hasOwnProperty(E)&&(b=o[E],b!=null))switch(E){case"value":u=b;break;case"defaultValue":d=b;break;case"children":p=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(n(91));break;default:nt(r,s,E,b,o,null)}ma(r,u,d,p),xo(r);return;case"option":for(x in o)if(o.hasOwnProperty(x)&&(u=o[x],u!=null))switch(x){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:nt(r,s,x,u,o,null)}return;case"dialog":Oe("beforetoggle",r),Oe("toggle",r),Oe("cancel",r),Oe("close",r);break;case"iframe":case"object":Oe("load",r);break;case"video":case"audio":for(u=0;u<cc.length;u++)Oe(cc[u],r);break;case"image":Oe("error",r),Oe("load",r);break;case"details":Oe("toggle",r);break;case"embed":case"source":case"link":Oe("error",r),Oe("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in o)if(o.hasOwnProperty(z)&&(u=o[z],u!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,s));default:nt(r,s,z,u,o,null)}return;default:if(Ru(s)){for($ in o)o.hasOwnProperty($)&&(u=o[$],u!==void 0&&Og(r,s,$,u,o,void 0));return}}for(b in o)o.hasOwnProperty(b)&&(u=o[b],u!=null&&nt(r,s,b,u,o,null))}function Gx(r,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,p=null,E=null,b=null,x=null,z=null,$=null;for(q in o){var J=o[q];if(o.hasOwnProperty(q)&&J!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":x=J;default:u.hasOwnProperty(q)||nt(r,s,q,null,u,J)}}for(var B in u){var q=u[B];if(J=o[B],u.hasOwnProperty(B)&&(q!=null||J!=null))switch(B){case"type":p=q;break;case"name":d=q;break;case"checked":z=q;break;case"defaultChecked":$=q;break;case"value":E=q;break;case"defaultValue":b=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(n(137,s));break;default:q!==J&&nt(r,s,B,q,u,J)}}Bn(r,E,b,x,z,$,p,d);return;case"select":q=E=b=B=null;for(p in o)if(x=o[p],o.hasOwnProperty(p)&&x!=null)switch(p){case"value":break;case"multiple":q=x;default:u.hasOwnProperty(p)||nt(r,s,p,null,u,x)}for(d in u)if(p=u[d],x=o[d],u.hasOwnProperty(d)&&(p!=null||x!=null))switch(d){case"value":B=p;break;case"defaultValue":b=p;break;case"multiple":E=p;default:p!==x&&nt(r,s,d,p,u,x)}s=b,o=E,u=q,B!=null?pi(r,!!o,B,!1):!!u!=!!o&&(s!=null?pi(r,!!o,s,!0):pi(r,!!o,o?[]:"",!1));return;case"textarea":q=B=null;for(b in o)if(d=o[b],o.hasOwnProperty(b)&&d!=null&&!u.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:nt(r,s,b,null,u,d)}for(E in u)if(d=u[E],p=o[E],u.hasOwnProperty(E)&&(d!=null||p!=null))switch(E){case"value":B=d;break;case"defaultValue":q=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(n(91));break;default:d!==p&&nt(r,s,E,d,u,p)}et(r,B,q);return;case"option":for(var xe in o)if(B=o[xe],o.hasOwnProperty(xe)&&B!=null&&!u.hasOwnProperty(xe))switch(xe){case"selected":r.selected=!1;break;default:nt(r,s,xe,null,u,B)}for(x in u)if(B=u[x],q=o[x],u.hasOwnProperty(x)&&B!==q&&(B!=null||q!=null))switch(x){case"selected":r.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:nt(r,s,x,B,u,q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in o)B=o[Se],o.hasOwnProperty(Se)&&B!=null&&!u.hasOwnProperty(Se)&&nt(r,s,Se,null,u,B);for(z in u)if(B=u[z],q=o[z],u.hasOwnProperty(z)&&B!==q&&(B!=null||q!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(n(137,s));break;default:nt(r,s,z,B,u,q)}return;default:if(Ru(s)){for(var rt in o)B=o[rt],o.hasOwnProperty(rt)&&B!==void 0&&!u.hasOwnProperty(rt)&&Og(r,s,rt,void 0,u,B);for($ in u)B=u[$],q=o[$],!u.hasOwnProperty($)||B===q||B===void 0&&q===void 0||Og(r,s,$,B,u,q);return}}for(var M in o)B=o[M],o.hasOwnProperty(M)&&B!=null&&!u.hasOwnProperty(M)&&nt(r,s,M,null,u,B);for(J in u)B=u[J],q=o[J],!u.hasOwnProperty(J)||B===q||B==null&&q==null||nt(r,s,J,B,u,q)}var Mg=null,Lg=null;function sf(r){return r.nodeType===9?r:r.ownerDocument}function Fw(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function jw(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function Ug(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Fg=null;function Hx(){var r=window.event;return r&&r.type==="popstate"?r===Fg?!1:(Fg=r,!0):(Fg=null,!1)}var zw=typeof setTimeout=="function"?setTimeout:void 0,Kx=typeof clearTimeout=="function"?clearTimeout:void 0,Bw=typeof Promise=="function"?Promise:void 0,Qx=typeof queueMicrotask=="function"?queueMicrotask:typeof Bw<"u"?function(r){return Bw.resolve(null).then(r).catch(Wx)}:zw;function Wx(r){setTimeout(function(){throw r})}function ys(r){return r==="head"}function qw(r,s){var o=s,u=0,d=0;do{var p=o.nextSibling;if(r.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"){if(0<u&&8>u){o=u;var E=r.ownerDocument;if(o&1&&dc(E.documentElement),o&2&&dc(E.body),o&4)for(o=E.head,dc(o),E=o.firstChild;E;){var b=E.nextSibling,x=E.nodeName;E[ua]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&E.rel.toLowerCase()==="stylesheet"||o.removeChild(E),E=b}}if(d===0){r.removeChild(p),Ec(s);return}d--}else o==="$"||o==="$?"||o==="$!"?d++:u=o.charCodeAt(0)-48;else u=0;o=p}while(o);Ec(s)}function jg(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":jg(o),Ji(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function Yx(r,s,o,u){for(;r.nodeType===1;){var d=o;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[ua])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(p=r.getAttribute("rel"),p==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(p!==d.rel||r.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||r.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||r.getAttribute("title")!==(d.title==null?null:d.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(p=r.getAttribute("src"),(p!==(d.src==null?null:d.src)||r.getAttribute("type")!==(d.type==null?null:d.type)||r.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&p&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var p=d.name==null?null:""+d.name;if(d.type==="hidden"&&r.getAttribute("name")===p)return r}else return r;if(r=Ir(r.nextSibling),r===null)break}return null}function $x(r,s,o){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=Ir(r.nextSibling),r===null))return null;return r}function zg(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function Xx(r,s){var o=r.ownerDocument;if(r.data!=="$?"||o.readyState==="complete")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function Ir(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return r}var Bg=null;function Gw(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return r;s--}else o==="/$"&&s++}r=r.previousSibling}return null}function Hw(r,s,o){switch(s=sf(o),r){case"html":if(r=s.documentElement,!r)throw Error(n(452));return r;case"head":if(r=s.head,!r)throw Error(n(453));return r;case"body":if(r=s.body,!r)throw Error(n(454));return r;default:throw Error(n(451))}}function dc(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);Ji(r)}var fr=new Map,Kw=new Set;function af(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Vi=ue.d;ue.d={f:Jx,r:Zx,D:eC,C:tC,L:nC,m:rC,X:sC,S:iC,M:aC};function Jx(){var r=Vi.f(),s=$d();return r||s}function Zx(r){var s=kr(r);s!==null&&s.tag===5&&s.type==="form"?dT(s):Vi.r(r)}var ul=typeof document>"u"?null:document;function Qw(r,s,o){var u=ul;if(u&&typeof s=="string"&&s){var d=Mt(s);d='link[rel="'+r+'"][href="'+d+'"]',typeof o=="string"&&(d+='[crossorigin="'+o+'"]'),Kw.has(d)||(Kw.add(d),r={rel:r,crossOrigin:o,href:s},u.querySelector(d)===null&&(s=u.createElement("link"),hn(s,"link",r),Ct(s),u.head.appendChild(s)))}}function eC(r){Vi.D(r),Qw("dns-prefetch",r,null)}function tC(r,s){Vi.C(r,s),Qw("preconnect",r,s)}function nC(r,s,o){Vi.L(r,s,o);var u=ul;if(u&&r&&s){var d='link[rel="preload"][as="'+Mt(s)+'"]';s==="image"&&o&&o.imageSrcSet?(d+='[imagesrcset="'+Mt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(d+='[imagesizes="'+Mt(o.imageSizes)+'"]')):d+='[href="'+Mt(r)+'"]';var p=d;switch(s){case"style":p=cl(r);break;case"script":p=hl(r)}fr.has(p)||(r=_({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:r,as:s},o),fr.set(p,r),u.querySelector(d)!==null||s==="style"&&u.querySelector(fc(p))||s==="script"&&u.querySelector(mc(p))||(s=u.createElement("link"),hn(s,"link",r),Ct(s),u.head.appendChild(s)))}}function rC(r,s){Vi.m(r,s);var o=ul;if(o&&r){var u=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+Mt(u)+'"][href="'+Mt(r)+'"]',p=d;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=hl(r)}if(!fr.has(p)&&(r=_({rel:"modulepreload",href:r},s),fr.set(p,r),o.querySelector(d)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(mc(p)))return}u=o.createElement("link"),hn(u,"link",r),Ct(u),o.head.appendChild(u)}}}function iC(r,s,o){Vi.S(r,s,o);var u=ul;if(u&&r){var d=An(u).hoistableStyles,p=cl(r);s=s||"default";var E=d.get(p);if(!E){var b={loading:0,preload:null};if(E=u.querySelector(fc(p)))b.loading=5;else{r=_({rel:"stylesheet",href:r,"data-precedence":s},o),(o=fr.get(p))&&qg(r,o);var x=E=u.createElement("link");Ct(x),hn(x,"link",r),x._p=new Promise(function(z,$){x.onload=z,x.onerror=$}),x.addEventListener("load",function(){b.loading|=1}),x.addEventListener("error",function(){b.loading|=2}),b.loading|=4,of(E,s,u)}E={type:"stylesheet",instance:E,count:1,state:b},d.set(p,E)}}}function sC(r,s){Vi.X(r,s);var o=ul;if(o&&r){var u=An(o).hoistableScripts,d=hl(r),p=u.get(d);p||(p=o.querySelector(mc(d)),p||(r=_({src:r,async:!0},s),(s=fr.get(d))&&Gg(r,s),p=o.createElement("script"),Ct(p),hn(p,"link",r),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(d,p))}}function aC(r,s){Vi.M(r,s);var o=ul;if(o&&r){var u=An(o).hoistableScripts,d=hl(r),p=u.get(d);p||(p=o.querySelector(mc(d)),p||(r=_({src:r,async:!0,type:"module"},s),(s=fr.get(d))&&Gg(r,s),p=o.createElement("script"),Ct(p),hn(p,"link",r),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(d,p))}}function Ww(r,s,o,u){var d=(d=ye.current)?af(d):null;if(!d)throw Error(n(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=cl(o.href),o=An(d).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=cl(o.href);var p=An(d).hoistableStyles,E=p.get(r);if(E||(d=d.ownerDocument||d,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(r,E),(p=d.querySelector(fc(r)))&&!p._p&&(E.instance=p,E.state.loading=5),fr.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},fr.set(r,o),p||oC(d,r,o,E.state))),s&&u===null)throw Error(n(528,""));return E}if(s&&u!==null)throw Error(n(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=hl(o),o=An(d).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,r))}}function cl(r){return'href="'+Mt(r)+'"'}function fc(r){return'link[rel="stylesheet"]['+r+"]"}function Yw(r){return _({},r,{"data-precedence":r.precedence,precedence:null})}function oC(r,s,o,u){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=r.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),hn(s,"link",o),Ct(s),r.head.appendChild(s))}function hl(r){return'[src="'+Mt(r)+'"]'}function mc(r){return"script[async]"+r}function $w(r,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=r.querySelector('style[data-href~="'+Mt(o.href)+'"]');if(u)return s.instance=u,Ct(u),u;var d=_({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),Ct(u),hn(u,"style",d),of(u,o.precedence,r),s.instance=u;case"stylesheet":d=cl(o.href);var p=r.querySelector(fc(d));if(p)return s.state.loading|=4,s.instance=p,Ct(p),p;u=Yw(o),(d=fr.get(d))&&qg(u,d),p=(r.ownerDocument||r).createElement("link"),Ct(p);var E=p;return E._p=new Promise(function(b,x){E.onload=b,E.onerror=x}),hn(p,"link",u),s.state.loading|=4,of(p,o.precedence,r),s.instance=p;case"script":return p=hl(o.src),(d=r.querySelector(mc(p)))?(s.instance=d,Ct(d),d):(u=o,(d=fr.get(p))&&(u=_({},o),Gg(u,d)),r=r.ownerDocument||r,d=r.createElement("script"),Ct(d),hn(d,"link",u),r.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(n(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,of(u,o.precedence,r));return s.instance}function of(r,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=u.length?u[u.length-1]:null,p=d,E=0;E<u.length;E++){var b=u[E];if(b.dataset.precedence===s)p=b;else if(p!==d)break}p?p.parentNode.insertBefore(r,p.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(r,s.firstChild))}function qg(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function Gg(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var lf=null;function Xw(r,s,o){if(lf===null){var u=new Map,d=lf=new Map;d.set(o,u)}else d=lf,u=d.get(o),u||(u=new Map,d.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),d=0;d<o.length;d++){var p=o[d];if(!(p[ua]||p[Gt]||r==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var E=p.getAttribute(s)||"";E=r+E;var b=u.get(E);b?b.push(p):u.set(E,[p])}}return u}function Jw(r,s,o){r=r.ownerDocument||r,r.head.insertBefore(o,s==="title"?r.querySelector("head > title"):null)}function lC(r,s,o){if(o===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Zw(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var pc=null;function uC(){}function cC(r,s,o){if(pc===null)throw Error(n(475));var u=pc;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var d=cl(o.href),p=r.querySelector(fc(d));if(p){r=p._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(u.count++,u=uf.bind(u),r.then(u,u)),s.state.loading|=4,s.instance=p,Ct(p);return}p=r.ownerDocument||r,o=Yw(o),(d=fr.get(d))&&qg(o,d),p=p.createElement("link"),Ct(p);var E=p;E._p=new Promise(function(b,x){E.onload=b,E.onerror=x}),hn(p,"link",o),s.instance=p}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(s,r),(r=s.state.preload)&&(s.state.loading&3)===0&&(u.count++,s=uf.bind(u),r.addEventListener("load",s),r.addEventListener("error",s))}}function hC(){if(pc===null)throw Error(n(475));var r=pc;return r.stylesheets&&r.count===0&&Hg(r,r.stylesheets),0<r.count?function(s){var o=setTimeout(function(){if(r.stylesheets&&Hg(r,r.stylesheets),r.unsuspend){var u=r.unsuspend;r.unsuspend=null,u()}},6e4);return r.unsuspend=s,function(){r.unsuspend=null,clearTimeout(o)}}:null}function uf(){if(this.count--,this.count===0){if(this.stylesheets)Hg(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var cf=null;function Hg(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,cf=new Map,s.forEach(dC,r),cf=null,uf.call(r))}function dC(r,s){if(!(s.state.loading&4)){var o=cf.get(r);if(o)var u=o.get(null);else{o=new Map,cf.set(r,o);for(var d=r.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<d.length;p++){var E=d[p];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(o.set(E.dataset.precedence,E),u=E)}u&&o.set(null,u)}d=s.instance,E=d.getAttribute("data-precedence"),p=o.get(E)||u,p===u&&o.set(null,d),o.set(E,d),this.count++,u=uf.bind(this),d.addEventListener("load",u),d.addEventListener("error",u),p?p.parentNode.insertBefore(d,p.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(d,r.firstChild)),s.state.loading|=4}}var gc={$$typeof:le,Provider:null,Consumer:null,_currentValue:Ee,_currentValue2:Ee,_threadCount:0};function fC(r,s,o,u,d,p,E,b){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ci(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ci(0),this.hiddenUpdates=ci(null),this.identifierPrefix=u,this.onUncaughtError=d,this.onCaughtError=p,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function e0(r,s,o,u,d,p,E,b,x,z,$,J){return r=new fC(r,s,o,E,b,x,z,J),s=1,p===!0&&(s|=24),p=Gn(3,null,null,s),r.current=p,p.stateNode=r,s=Sp(),s.refCount++,r.pooledCache=s,s.refCount++,p.memoizedState={element:u,isDehydrated:o,cache:s},Np(p),r}function t0(r){return r?(r=Bo,r):Bo}function n0(r,s,o,u,d,p){d=t0(d),u.context===null?u.context=d:u.pendingContext=d,u=is(s),u.payload={element:o},p=p===void 0?null:p,p!==null&&(u.callback=p),o=ss(r,u,s),o!==null&&(Yn(o,r,s),Ku(o,r,s))}function r0(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<s?o:s}}function Kg(r,s){r0(r,s),(r=r.alternate)&&r0(r,s)}function i0(r){if(r.tag===13){var s=zo(r,67108864);s!==null&&Yn(s,r,67108864),Kg(r,67108864)}}var hf=!0;function mC(r,s,o,u){var d=Y.T;Y.T=null;var p=ue.p;try{ue.p=2,Qg(r,s,o,u)}finally{ue.p=p,Y.T=d}}function pC(r,s,o,u){var d=Y.T;Y.T=null;var p=ue.p;try{ue.p=8,Qg(r,s,o,u)}finally{ue.p=p,Y.T=d}}function Qg(r,s,o,u){if(hf){var d=Wg(u);if(d===null)Vg(r,s,u,df,o),a0(r,u);else if(yC(d,r,s,o,u))u.stopPropagation();else if(a0(r,u),s&4&&-1<gC.indexOf(r)){for(;d!==null;){var p=kr(d);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var E=Er(p.pendingLanes);if(E!==0){var b=p;for(b.pendingLanes|=2,b.entangledLanes|=2;E;){var x=1<<31-gn(E);b.entanglements[1]|=x,E&=~x}Qr(p),($e&6)===0&&(Wd=tr()+500,uc(0))}}break;case 13:b=zo(p,2),b!==null&&Yn(b,p,2),$d(),Kg(p,2)}if(p=Wg(u),p===null&&Vg(r,s,u,df,o),p===d)break;d=p}d!==null&&u.stopPropagation()}else Vg(r,s,u,null,o)}}function Wg(r){return r=ir(r),Yg(r)}var df=null;function Yg(r){if(df=null,r=di(r),r!==null){var s=l(r);if(s===null)r=null;else{var o=s.tag;if(o===13){if(r=c(s),r!==null)return r;r=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return df=r,null}function s0(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Jm()){case mu:return 2;case Eo:return 8;case ia:case Zm:return 32;case To:return 268435456;default:return 32}default:return 32}}var $g=!1,_s=null,vs=null,Es=null,yc=new Map,_c=new Map,Ts=[],gC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function a0(r,s){switch(r){case"focusin":case"focusout":_s=null;break;case"dragenter":case"dragleave":vs=null;break;case"mouseover":case"mouseout":Es=null;break;case"pointerover":case"pointerout":yc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":_c.delete(s.pointerId)}}function vc(r,s,o,u,d,p){return r===null||r.nativeEvent!==p?(r={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[d]},s!==null&&(s=kr(s),s!==null&&i0(s)),r):(r.eventSystemFlags|=u,s=r.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),r)}function yC(r,s,o,u,d){switch(s){case"focusin":return _s=vc(_s,r,s,o,u,d),!0;case"dragenter":return vs=vc(vs,r,s,o,u,d),!0;case"mouseover":return Es=vc(Es,r,s,o,u,d),!0;case"pointerover":var p=d.pointerId;return yc.set(p,vc(yc.get(p)||null,r,s,o,u,d)),!0;case"gotpointercapture":return p=d.pointerId,_c.set(p,vc(_c.get(p)||null,r,s,o,u,d)),!0}return!1}function o0(r){var s=di(r.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){r.blockedOn=s,$h(r.priority,function(){if(o.tag===13){var u=Wn();u=Yi(u);var d=zo(o,u);d!==null&&Yn(d,o,u),Kg(o,u)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function ff(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var o=Wg(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);gi=u,o.target.dispatchEvent(u),gi=null}else return s=kr(o),s!==null&&i0(s),r.blockedOn=o,!1;s.shift()}return!0}function l0(r,s,o){ff(r)&&o.delete(s)}function _C(){$g=!1,_s!==null&&ff(_s)&&(_s=null),vs!==null&&ff(vs)&&(vs=null),Es!==null&&ff(Es)&&(Es=null),yc.forEach(l0),_c.forEach(l0)}function mf(r,s){r.blockedOn===s&&(r.blockedOn=null,$g||($g=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,_C)))}var pf=null;function u0(r){pf!==r&&(pf=r,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){pf===r&&(pf=null);for(var s=0;s<r.length;s+=3){var o=r[s],u=r[s+1],d=r[s+2];if(typeof u!="function"){if(Yg(u||o)===null)continue;break}var p=kr(o);p!==null&&(r.splice(s,3),s-=3,Yp(p,{pending:!0,data:d,method:o.method,action:u},u,d))}}))}function Ec(r){function s(x){return mf(x,r)}_s!==null&&mf(_s,r),vs!==null&&mf(vs,r),Es!==null&&mf(Es,r),yc.forEach(s),_c.forEach(s);for(var o=0;o<Ts.length;o++){var u=Ts[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<Ts.length&&(o=Ts[0],o.blockedOn===null);)o0(o),o.blockedOn===null&&Ts.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var d=o[u],p=o[u+1],E=d[Ot]||null;if(typeof p=="function")E||u0(o);else if(E){var b=null;if(p&&p.hasAttribute("formAction")){if(d=p,E=p[Ot]||null)b=E.formAction;else if(Yg(d)!==null)continue}else b=E.action;typeof b=="function"?o[u+1]=b:(o.splice(u,3),u-=3),u0(o)}}}function Xg(r){this._internalRoot=r}gf.prototype.render=Xg.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(n(409));var o=s.current,u=Wn();n0(o,u,r,s,null,null)},gf.prototype.unmount=Xg.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;n0(r.current,2,null,r,null,null),$d(),s[nr]=null}};function gf(r){this._internalRoot=r}gf.prototype.unstable_scheduleHydration=function(r){if(r){var s=$i();r={blockedOn:null,target:r,priority:s};for(var o=0;o<Ts.length&&s!==0&&s<Ts[o].priority;o++);Ts.splice(o,0,r),o===0&&o0(r)}};var c0=e.version;if(c0!=="19.1.1")throw Error(n(527,c0,"19.1.1"));ue.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(n(188)):(r=Object.keys(r).join(","),Error(n(268,r)));return r=m(s),r=r!==null?g(r):null,r=r===null?null:r.stateNode,r};var vC={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yf.isDisabled&&yf.supportsFiber)try{bt=yf.inject(vC),Ye=yf}catch{}}return wc.createRoot=function(r,s){if(!a(r))throw Error(n(299));var o=!1,u="",d=ST,p=RT,E=xT,b=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(p=s.onCaughtError),s.onRecoverableError!==void 0&&(E=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(b=s.unstable_transitionCallbacks)),s=e0(r,1,!1,null,null,o,u,d,p,E,b,null),r[nr]=s.current,kg(r),new Xg(s)},wc.hydrateRoot=function(r,s,o){if(!a(r))throw Error(n(299));var u=!1,d="",p=ST,E=RT,b=xT,x=null,z=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(b=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(x=o.unstable_transitionCallbacks),o.formState!==void 0&&(z=o.formState)),s=e0(r,1,!0,s,o??null,u,d,p,E,b,x,z),s.context=t0(null),o=s.current,u=Wn(),u=Yi(u),d=is(u),d.callback=null,ss(o,d,u),o=u,s.current.lanes=o,hi(s,o),Qr(s),r[nr]=s.current,kg(r),new gf(s)},wc.version="19.1.1",wc}var E0;function NC(){if(E0)return ey.exports;E0=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),ey.exports=CC(),ey.exports}var DC=NC();const PC=OA(DC),kC=()=>{};var T0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA=function(i){const e=[];let t=0;for(let n=0;n<i.length;n++){let a=i.charCodeAt(n);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&n+1<i.length&&(i.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++n)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},VC=function(i){const e=[];let t=0,n=0;for(;t<i.length;){const a=i[t++];if(a<128)e[n++]=String.fromCharCode(a);else if(a>191&&a<224){const l=i[t++];e[n++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=i[t++],c=i[t++],f=i[t++],m=((a&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;e[n++]=String.fromCharCode(55296+(m>>10)),e[n++]=String.fromCharCode(56320+(m&1023))}else{const l=i[t++],c=i[t++];e[n++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},LA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<i.length;a+=3){const l=i[a],c=a+1<i.length,f=c?i[a+1]:0,m=a+2<i.length,g=m?i[a+2]:0,_=l>>2,T=(l&3)<<4|f>>4;let A=(f&15)<<2|g>>6,k=g&63;m||(k=64,c||(A=64)),n.push(t[_],t[T],t[A],t[k])}return n.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(MA(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):VC(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<i.length;){const l=t[i.charAt(a++)],f=a<i.length?t[i.charAt(a)]:0;++a;const g=a<i.length?t[i.charAt(a)]:64;++a;const T=a<i.length?t[i.charAt(a)]:64;if(++a,l==null||f==null||g==null||T==null)throw new OC;const A=l<<2|f>>4;if(n.push(A),g!==64){const k=f<<4&240|g>>2;if(n.push(k),T!==64){const K=g<<6&192|T;n.push(K)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class OC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const MC=function(i){const e=MA(i);return LA.encodeByteArray(e,!0)},Bf=function(i){return MC(i).replace(/\./g,"")},g_=function(i){try{return LA.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function qf(i,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:i===void 0&&(i={});break;case Array:i=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!LC(t)||(i[t]=qf(i[t],e[t]));return i}function LC(i){return i!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC=()=>y_().__FIREBASE_DEFAULTS__,FC=()=>{if(typeof process>"u"||typeof T0>"u")return;const i=T0.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},jC=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&g_(i[1]);return e&&JSON.parse(e)},__=()=>{try{return kC()||UC()||FC()||jC()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},v_=()=>{var i;return(i=__())==null?void 0:i.config},zC=i=>{var e;return(e=__())==null?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eu(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function UA(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qC(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",a=i.iat||0,l=i.sub||i.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...i};return[Bf(JSON.stringify(t)),Bf(JSON.stringify(c)),""].join(".")}const Fc={};function GC(){const i={prod:[],emulator:[]};for(const e of Object.keys(Fc))Fc[e]?i.emulator.push(e):i.prod.push(e);return i}function HC(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let w0=!1;function FA(i,e){if(typeof window>"u"||typeof document>"u"||!eu(window.location.host)||Fc[i]===e||Fc[i]||w0)return;Fc[i]=e;function t(A){return`__firebase__banner__${A}`}const n="__firebase__banner",l=GC().prod.length>0;function c(){const A=document.getElementById(n);A&&A.remove()}function f(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function m(A,k){A.setAttribute("width","24"),A.setAttribute("id",k),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function g(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{w0=!0,c()},A}function _(A,k){A.setAttribute("id",k),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function T(){const A=HC(n),k=t("text"),K=document.getElementById(k)||document.createElement("span"),G=t("learnmore"),W=document.getElementById(G)||document.createElement("a"),re=t("preprendIcon"),de=document.getElementById(re)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const le=A.element;f(le),_(W,G);const we=g();m(de,re),le.append(de,K,W,we),document.body.appendChild(le)}l?(K.innerText="Preview backend disconnected.",de.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(de.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,K.innerText="Preview backend running in this workspace."),K.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function KC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tt())}function mm(){var e;const i=(e=__())==null?void 0:e.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function QC(){return typeof window<"u"||jA()}function jA(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function WC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function zA(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function E_(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function BA(){const i=Tt();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function qA(){return!mm()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function GA(){return!mm()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function eh(){try{return typeof indexedDB=="object"}catch{return!1}}function YC(){return new Promise((i,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(n),i(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C="FirebaseError";class Nn extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=$C,Object.setPrototypeOf(this,Nn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mo.prototype.create)}}class mo{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?XC(l,n):"Error",f=`${this.serviceName}: ${c} (${a}).`;return new Nn(a,f,n)}}function XC(i,e){return i.replace(JC,(t,n)=>{const a=e[n];return a!=null?String(a):`<${n}?>`})}const JC=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b0(i,e){return Object.prototype.hasOwnProperty.call(i,e)}function ZC(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Ls(i,e){if(i===e)return!0;const t=Object.keys(i),n=Object.keys(e);for(const a of t){if(!n.includes(a))return!1;const l=i[a],c=e[a];if(A0(l)&&A0(c)){if(!Ls(l,c))return!1}else if(l!==c)return!1}for(const a of n)if(!t.includes(a))return!1;return!0}function A0(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tu(i){const e=[];for(const[t,n]of Object.entries(i))Array.isArray(n)?n.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Al(i){const e={};return i.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[a,l]=n.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function Pc(i){const e=i.indexOf("?");if(!e)return"";const t=i.indexOf("#",e);return i.substring(e,t>0?t:void 0)}function HA(i,e){const t=new e2(i,e);return t.subscribe.bind(t)}class e2{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let a;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");t2(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:n},a.next===void 0&&(a.next=iy),a.error===void 0&&(a.error=iy),a.complete===void 0&&(a.complete=iy);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function t2(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function iy(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(i){return i&&i._delegate?i._delegate:i}class ai{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new BC;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(n)return null;throw a}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(i2(e))try{this.getOrInitializeService({instanceIdentifier:Fa})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});n.resolve(l)}catch{}}}}clearInstance(e=Fa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Fa){return this.instances.has(e)}getOptions(e=Fa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);n===f&&c.resolve(a)}return a}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(n)??new Set;a.add(e),this.onInitCallbacks.set(n,a);const l=this.instances.get(n);return l&&e(l,n),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const a of n)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:r2(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Fa){return this.component?this.component.multipleInstances?e:Fa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function r2(i){return i===Fa?void 0:i}function i2(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new n2(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_=[];var Me;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Me||(Me={}));const QA={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},s2=Me.INFO,a2={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},o2=(i,e,...t)=>{if(e<i.logLevel)return;const n=new Date().toISOString(),a=a2[e];if(a)console[a](`[${n}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pm{constructor(e){this.name=e,this._logLevel=s2,this._logHandler=o2,this._userLogHandler=null,T_.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?QA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}}function l2(i){T_.forEach(e=>{e.setLogLevel(i)})}function u2(i,e){for(const t of T_){let n=null;e&&e.level&&(n=QA[e.level]),i===null?t.userLogHandler=null:t.userLogHandler=(a,l,...c)=>{const f=c.map(m=>{if(m==null)return null;if(typeof m=="string")return m;if(typeof m=="number"||typeof m=="boolean")return m.toString();if(m instanceof Error)return m.message;try{return JSON.stringify(m)}catch{return null}}).filter(m=>m).join(" ");l>=(n??a.logLevel)&&i({level:Me[l].toLowerCase(),message:f,args:c,type:a.name})}}}const c2=(i,e)=>e.some(t=>i instanceof t);let I0,S0;function h2(){return I0||(I0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function d2(){return S0||(S0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const WA=new WeakMap,Ry=new WeakMap,YA=new WeakMap,sy=new WeakMap,w_=new WeakMap;function f2(i){const e=new Promise((t,n)=>{const a=()=>{i.removeEventListener("success",l),i.removeEventListener("error",c)},l=()=>{t(Ps(i.result)),a()},c=()=>{n(i.error),a()};i.addEventListener("success",l),i.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&WA.set(t,i)}).catch(()=>{}),w_.set(e,i),e}function m2(i){if(Ry.has(i))return;const e=new Promise((t,n)=>{const a=()=>{i.removeEventListener("complete",l),i.removeEventListener("error",c),i.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{n(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",l),i.addEventListener("error",c),i.addEventListener("abort",c)});Ry.set(i,e)}let xy={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return Ry.get(i);if(e==="objectStoreNames")return i.objectStoreNames||YA.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ps(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function p2(i){xy=i(xy)}function g2(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=i.call(ay(this),e,...t);return YA.set(n,e.sort?e.sort():[e]),Ps(n)}:d2().includes(i)?function(...e){return i.apply(ay(this),e),Ps(WA.get(this))}:function(...e){return Ps(i.apply(ay(this),e))}}function y2(i){return typeof i=="function"?g2(i):(i instanceof IDBTransaction&&m2(i),c2(i,h2())?new Proxy(i,xy):i)}function Ps(i){if(i instanceof IDBRequest)return f2(i);if(sy.has(i))return sy.get(i);const e=y2(i);return e!==i&&(sy.set(i,e),w_.set(e,i)),e}const ay=i=>w_.get(i);function _2(i,e,{blocked:t,upgrade:n,blocking:a,terminated:l}={}){const c=indexedDB.open(i,e),f=Ps(c);return n&&c.addEventListener("upgradeneeded",m=>{n(Ps(c.result),m.oldVersion,m.newVersion,Ps(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),f.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),f}const v2=["get","getKey","getAll","getAllKeys","count"],E2=["put","add","delete","clear"],oy=new Map;function R0(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(oy.get(e))return oy.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,a=E2.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(a||v2.includes(t)))return;const l=async function(c,...f){const m=this.transaction(c,a?"readwrite":"readonly");let g=m.store;return n&&(g=g.index(f.shift())),(await Promise.all([g[t](...f),a&&m.done]))[0]};return oy.set(e,l),l}p2(i=>({...i,get:(e,t,n)=>R0(e,t)||i.get(e,t,n),has:(e,t)=>!!R0(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(w2(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function w2(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Gf="@firebase/app",Cy="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi=new pm("@firebase/app"),b2="@firebase/app-compat",A2="@firebase/analytics-compat",I2="@firebase/analytics",S2="@firebase/app-check-compat",R2="@firebase/app-check",x2="@firebase/auth",C2="@firebase/auth-compat",N2="@firebase/database",D2="@firebase/data-connect",P2="@firebase/database-compat",k2="@firebase/functions",V2="@firebase/functions-compat",O2="@firebase/installations",M2="@firebase/installations-compat",L2="@firebase/messaging",U2="@firebase/messaging-compat",F2="@firebase/performance",j2="@firebase/performance-compat",z2="@firebase/remote-config",B2="@firebase/remote-config-compat",q2="@firebase/storage",G2="@firebase/storage-compat",H2="@firebase/firestore",K2="@firebase/ai",Q2="@firebase/firestore-compat",W2="firebase",Y2="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us="[DEFAULT]",$2={[Gf]:"fire-core",[b2]:"fire-core-compat",[I2]:"fire-analytics",[A2]:"fire-analytics-compat",[R2]:"fire-app-check",[S2]:"fire-app-check-compat",[x2]:"fire-auth",[C2]:"fire-auth-compat",[N2]:"fire-rtdb",[D2]:"fire-data-connect",[P2]:"fire-rtdb-compat",[k2]:"fire-fn",[V2]:"fire-fn-compat",[O2]:"fire-iid",[M2]:"fire-iid-compat",[L2]:"fire-fcm",[U2]:"fire-fcm-compat",[F2]:"fire-perf",[j2]:"fire-perf-compat",[z2]:"fire-rc",[B2]:"fire-rc-compat",[q2]:"fire-gcs",[G2]:"fire-gcs-compat",[H2]:"fire-fst",[Q2]:"fire-fst-compat",[K2]:"fire-vertex","fire-js":"fire-js",[W2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs=new Map,Dl=new Map,Pl=new Map;function th(i,e){try{i.container.addComponent(e)}catch(t){Fi.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function $A(i,e){i.container.addOrOverwriteComponent(e)}function js(i){const e=i.name;if(Pl.has(e))return Fi.debug(`There were multiple attempts to register component ${e}.`),!1;Pl.set(e,i);for(const t of Fs.values())th(t,i);for(const t of Dl.values())th(t,i);return!0}function XA(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function X2(i,e,t=Us){XA(i,e).clearInstance(t)}function b_(i){return i.options!==void 0}function JA(i){return b_(i)?!1:"authIdToken"in i||"appCheckToken"in i||"releaseOnDeref"in i||"automaticDataCollectionEnabled"in i}function mt(i){return i==null?!1:i.settings!==void 0}function J2(){Pl.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zn=new mo("app","Firebase",Z2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ZA=class{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ai("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zn.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(i,e){const t=g_(i.split(".")[1]);if(t===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(t).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const a=JSON.parse(t).exp*1e3,l=new Date().getTime();a-l<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class eN extends ZA{constructor(e,t,n,a){const l=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!0,c={name:n,automaticDataCollectionEnabled:l};if(e.apiKey!==void 0)super(e,c,a);else{const f=e;super(f.options,c,a)}this._serverConfig={automaticDataCollectionEnabled:l,...t},this._serverConfig.authIdToken&&x0(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&x0(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,xr(Gf,Cy,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){I_(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Zn.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys=Y2;function A_(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const n={name:Us,automaticDataCollectionEnabled:!0,...e},a=n.name;if(typeof a!="string"||!a)throw Zn.create("bad-app-name",{appName:String(a)});if(t||(t=v_()),!t)throw Zn.create("no-options");const l=Fs.get(a);if(l){if(Ls(t,l.options)&&Ls(n,l.config))return l;throw Zn.create("duplicate-app",{appName:a})}const c=new KA(a);for(const m of Pl.values())c.addComponent(m);const f=new ZA(t,n,c);return Fs.set(a,f),f}function tN(i,e={}){if(QC()&&!jA())throw Zn.create("invalid-server-app-environment");let t,n=e||{};if(i&&(b_(i)?t=i.options:JA(i)?n=i:t=i),n.automaticDataCollectionEnabled===void 0&&(n.automaticDataCollectionEnabled=!0),t||(t=v_()),!t)throw Zn.create("no-options");const a={...n,...t};a.releaseOnDeref!==void 0&&delete a.releaseOnDeref;const l=_=>[..._].reduce((T,A)=>Math.imul(31,T)+A.charCodeAt(0)|0,0);if(n.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Zn.create("finalization-registry-not-supported",{});const c=""+l(JSON.stringify(a)),f=Dl.get(c);if(f)return f.incRefCount(n.releaseOnDeref),f;const m=new KA(c);for(const _ of Pl.values())m.addComponent(_);const g=new eN(t,n,c,m);return Dl.set(c,g),g}function nN(i=Us){const e=Fs.get(i);if(!e&&i===Us&&v_())return A_();if(!e)throw Zn.create("no-app",{appName:i});return e}function rN(){return Array.from(Fs.values())}async function I_(i){let e=!1;const t=i.name;Fs.has(t)?(e=!0,Fs.delete(t)):Dl.has(t)&&i.decRefCount()<=0&&(Dl.delete(t),e=!0),e&&(await Promise.all(i.container.getProviders().map(n=>n.delete())),i.isDeleted=!0)}function xr(i,e,t){let n=$2[i]??i;t&&(n+=`-${t}`);const a=n.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${n}" with version "${e}":`];a&&c.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fi.warn(c.join(" "));return}js(new ai(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}function eI(i,e){if(i!==null&&typeof i!="function")throw Zn.create("invalid-log-argument");u2(i,e)}function tI(i){l2(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN="firebase-heartbeat-database",sN=1,nh="firebase-heartbeat-store";let ly=null;function nI(){return ly||(ly=_2(iN,sN,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(nh)}catch(t){console.warn(t)}}}}).catch(i=>{throw Zn.create("idb-open",{originalErrorMessage:i.message})})),ly}async function aN(i){try{const t=(await nI()).transaction(nh),n=await t.objectStore(nh).get(rI(i));return await t.done,n}catch(e){if(e instanceof Nn)Fi.warn(e.message);else{const t=Zn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Fi.warn(t.message)}}}async function C0(i,e){try{const n=(await nI()).transaction(nh,"readwrite");await n.objectStore(nh).put(e,rI(i)),await n.done}catch(t){if(t instanceof Nn)Fi.warn(t.message);else{const n=Zn.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Fi.warn(n.message)}}}function rI(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN=1024,lN=30;class uN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new hN(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=N0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>lN){const c=dN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Fi.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=N0(),{heartbeatsToSend:n,unsentEntries:a}=cN(this._heartbeatsCache.heartbeats),l=Bf(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Fi.warn(t),""}}}function N0(){return new Date().toISOString().substring(0,10)}function cN(i,e=oN){const t=[];let n=i.slice();for(const a of i){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),D0(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),D0(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class hN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return eh()?YC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await aN(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return C0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return C0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function D0(i){return Bf(JSON.stringify({version:2,heartbeats:i})).length}function dN(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let n=1;n<i.length;n++)i[n].date<t&&(t=i[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN(i){js(new ai("platform-logger",e=>new T2(e),"PRIVATE")),js(new ai("heartbeat",e=>new uN(e),"PRIVATE")),xr(Gf,Cy,i),xr(Gf,Cy,"esm2020"),xr("fire-js","")}fN("");const mN=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Nn,SDK_VERSION:Ys,_DEFAULT_ENTRY_NAME:Us,_addComponent:th,_addOrOverwriteComponent:$A,_apps:Fs,_clearComponents:J2,_components:Pl,_getProvider:XA,_isFirebaseApp:b_,_isFirebaseServerApp:mt,_isFirebaseServerAppSettings:JA,_registerComponent:js,_removeServiceInstance:X2,_serverApps:Dl,deleteApp:I_,getApp:nN,getApps:rN,initializeApp:A_,initializeServerApp:tN,onLog:eI,registerVersion:xr,setLogLevel:tI},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e,t){this._delegate=e,this.firebase=t,th(e,new ai("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),I_(this._delegate)))}_getService(e,t=Us){var a;this._delegate.checkDestroyed();const n=this._delegate.container.getProvider(e);return!n.isInitialized()&&((a=n.getComponent())==null?void 0:a.instantiationMode)==="EXPLICIT"&&n.initialize(),n.getImmediate({identifier:t})}_removeServiceInstance(e,t=Us){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){th(this._delegate,e)}_addOrOverwriteComponent(e){$A(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},P0=new mo("app-compat","Firebase",gN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(i){const e={},t={__esModule:!0,initializeApp:l,app:a,registerVersion:xr,setLogLevel:tI,onLog:eI,apps:null,SDK_VERSION:Ys,INTERNAL:{registerComponent:f,removeApp:n,useAsService:m,modularAPIs:mN}};t.default=t,Object.defineProperty(t,"apps",{get:c});function n(g){delete e[g]}function a(g){if(g=g||Us,!b0(e,g))throw P0.create("no-app",{appName:g});return e[g]}a.App=i;function l(g,_={}){const T=A_(g,_);if(b0(e,T.name))return e[T.name];const A=new i(T,t);return e[T.name]=A,A}function c(){return Object.keys(e).map(g=>e[g])}function f(g){const _=g.name,T=_.replace("-compat","");if(js(g)&&g.type==="PUBLIC"){const A=(k=a())=>{if(typeof k[T]!="function")throw P0.create("invalid-app-argument",{appName:_});return k[T]()};g.serviceProps!==void 0&&qf(A,g.serviceProps),t[T]=A,i.prototype[T]=function(...k){return this._getService.bind(this,_).apply(this,g.multipleInstances?k:[])}}return g.type==="PUBLIC"?t[T]:null}function m(g,_){return _==="serverAuth"?null:_}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iI(){const i=yN(pN);i.INTERNAL={...i.INTERNAL,createFirebaseNamespace:iI,extendNamespace:e,createSubscribe:HA,ErrorFactory:mo,deepExtend:qf};function e(t){qf(i,t)}return i}const _N=iI();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0=new pm("@firebase/app-compat"),vN="@firebase/app-compat",EN="0.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TN(i){xr(vN,EN,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const i=y_();if(i.firebase!==void 0){k0.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=i.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&k0.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const gr=_N;TN();var wN="firebase",bN="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gr.registerVersion(wN,bN,"app-compat");var V0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ks,sI;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,S){function C(){}C.prototype=S.prototype,R.D=S.prototype,R.prototype=new C,R.prototype.constructor=R,R.C=function(V,O,L){for(var N=Array(arguments.length-2),Bt=2;Bt<arguments.length;Bt++)N[Bt-2]=arguments[Bt];return S.prototype[O].apply(V,N)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,t),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(R,S,C){C||(C=0);var V=Array(16);if(typeof S=="string")for(var O=0;16>O;++O)V[O]=S.charCodeAt(C++)|S.charCodeAt(C++)<<8|S.charCodeAt(C++)<<16|S.charCodeAt(C++)<<24;else for(O=0;16>O;++O)V[O]=S[C++]|S[C++]<<8|S[C++]<<16|S[C++]<<24;S=R.g[0],C=R.g[1],O=R.g[2];var L=R.g[3],N=S+(L^C&(O^L))+V[0]+3614090360&4294967295;S=C+(N<<7&4294967295|N>>>25),N=L+(O^S&(C^O))+V[1]+3905402710&4294967295,L=S+(N<<12&4294967295|N>>>20),N=O+(C^L&(S^C))+V[2]+606105819&4294967295,O=L+(N<<17&4294967295|N>>>15),N=C+(S^O&(L^S))+V[3]+3250441966&4294967295,C=O+(N<<22&4294967295|N>>>10),N=S+(L^C&(O^L))+V[4]+4118548399&4294967295,S=C+(N<<7&4294967295|N>>>25),N=L+(O^S&(C^O))+V[5]+1200080426&4294967295,L=S+(N<<12&4294967295|N>>>20),N=O+(C^L&(S^C))+V[6]+2821735955&4294967295,O=L+(N<<17&4294967295|N>>>15),N=C+(S^O&(L^S))+V[7]+4249261313&4294967295,C=O+(N<<22&4294967295|N>>>10),N=S+(L^C&(O^L))+V[8]+1770035416&4294967295,S=C+(N<<7&4294967295|N>>>25),N=L+(O^S&(C^O))+V[9]+2336552879&4294967295,L=S+(N<<12&4294967295|N>>>20),N=O+(C^L&(S^C))+V[10]+4294925233&4294967295,O=L+(N<<17&4294967295|N>>>15),N=C+(S^O&(L^S))+V[11]+2304563134&4294967295,C=O+(N<<22&4294967295|N>>>10),N=S+(L^C&(O^L))+V[12]+1804603682&4294967295,S=C+(N<<7&4294967295|N>>>25),N=L+(O^S&(C^O))+V[13]+4254626195&4294967295,L=S+(N<<12&4294967295|N>>>20),N=O+(C^L&(S^C))+V[14]+2792965006&4294967295,O=L+(N<<17&4294967295|N>>>15),N=C+(S^O&(L^S))+V[15]+1236535329&4294967295,C=O+(N<<22&4294967295|N>>>10),N=S+(O^L&(C^O))+V[1]+4129170786&4294967295,S=C+(N<<5&4294967295|N>>>27),N=L+(C^O&(S^C))+V[6]+3225465664&4294967295,L=S+(N<<9&4294967295|N>>>23),N=O+(S^C&(L^S))+V[11]+643717713&4294967295,O=L+(N<<14&4294967295|N>>>18),N=C+(L^S&(O^L))+V[0]+3921069994&4294967295,C=O+(N<<20&4294967295|N>>>12),N=S+(O^L&(C^O))+V[5]+3593408605&4294967295,S=C+(N<<5&4294967295|N>>>27),N=L+(C^O&(S^C))+V[10]+38016083&4294967295,L=S+(N<<9&4294967295|N>>>23),N=O+(S^C&(L^S))+V[15]+3634488961&4294967295,O=L+(N<<14&4294967295|N>>>18),N=C+(L^S&(O^L))+V[4]+3889429448&4294967295,C=O+(N<<20&4294967295|N>>>12),N=S+(O^L&(C^O))+V[9]+568446438&4294967295,S=C+(N<<5&4294967295|N>>>27),N=L+(C^O&(S^C))+V[14]+3275163606&4294967295,L=S+(N<<9&4294967295|N>>>23),N=O+(S^C&(L^S))+V[3]+4107603335&4294967295,O=L+(N<<14&4294967295|N>>>18),N=C+(L^S&(O^L))+V[8]+1163531501&4294967295,C=O+(N<<20&4294967295|N>>>12),N=S+(O^L&(C^O))+V[13]+2850285829&4294967295,S=C+(N<<5&4294967295|N>>>27),N=L+(C^O&(S^C))+V[2]+4243563512&4294967295,L=S+(N<<9&4294967295|N>>>23),N=O+(S^C&(L^S))+V[7]+1735328473&4294967295,O=L+(N<<14&4294967295|N>>>18),N=C+(L^S&(O^L))+V[12]+2368359562&4294967295,C=O+(N<<20&4294967295|N>>>12),N=S+(C^O^L)+V[5]+4294588738&4294967295,S=C+(N<<4&4294967295|N>>>28),N=L+(S^C^O)+V[8]+2272392833&4294967295,L=S+(N<<11&4294967295|N>>>21),N=O+(L^S^C)+V[11]+1839030562&4294967295,O=L+(N<<16&4294967295|N>>>16),N=C+(O^L^S)+V[14]+4259657740&4294967295,C=O+(N<<23&4294967295|N>>>9),N=S+(C^O^L)+V[1]+2763975236&4294967295,S=C+(N<<4&4294967295|N>>>28),N=L+(S^C^O)+V[4]+1272893353&4294967295,L=S+(N<<11&4294967295|N>>>21),N=O+(L^S^C)+V[7]+4139469664&4294967295,O=L+(N<<16&4294967295|N>>>16),N=C+(O^L^S)+V[10]+3200236656&4294967295,C=O+(N<<23&4294967295|N>>>9),N=S+(C^O^L)+V[13]+681279174&4294967295,S=C+(N<<4&4294967295|N>>>28),N=L+(S^C^O)+V[0]+3936430074&4294967295,L=S+(N<<11&4294967295|N>>>21),N=O+(L^S^C)+V[3]+3572445317&4294967295,O=L+(N<<16&4294967295|N>>>16),N=C+(O^L^S)+V[6]+76029189&4294967295,C=O+(N<<23&4294967295|N>>>9),N=S+(C^O^L)+V[9]+3654602809&4294967295,S=C+(N<<4&4294967295|N>>>28),N=L+(S^C^O)+V[12]+3873151461&4294967295,L=S+(N<<11&4294967295|N>>>21),N=O+(L^S^C)+V[15]+530742520&4294967295,O=L+(N<<16&4294967295|N>>>16),N=C+(O^L^S)+V[2]+3299628645&4294967295,C=O+(N<<23&4294967295|N>>>9),N=S+(O^(C|~L))+V[0]+4096336452&4294967295,S=C+(N<<6&4294967295|N>>>26),N=L+(C^(S|~O))+V[7]+1126891415&4294967295,L=S+(N<<10&4294967295|N>>>22),N=O+(S^(L|~C))+V[14]+2878612391&4294967295,O=L+(N<<15&4294967295|N>>>17),N=C+(L^(O|~S))+V[5]+4237533241&4294967295,C=O+(N<<21&4294967295|N>>>11),N=S+(O^(C|~L))+V[12]+1700485571&4294967295,S=C+(N<<6&4294967295|N>>>26),N=L+(C^(S|~O))+V[3]+2399980690&4294967295,L=S+(N<<10&4294967295|N>>>22),N=O+(S^(L|~C))+V[10]+4293915773&4294967295,O=L+(N<<15&4294967295|N>>>17),N=C+(L^(O|~S))+V[1]+2240044497&4294967295,C=O+(N<<21&4294967295|N>>>11),N=S+(O^(C|~L))+V[8]+1873313359&4294967295,S=C+(N<<6&4294967295|N>>>26),N=L+(C^(S|~O))+V[15]+4264355552&4294967295,L=S+(N<<10&4294967295|N>>>22),N=O+(S^(L|~C))+V[6]+2734768916&4294967295,O=L+(N<<15&4294967295|N>>>17),N=C+(L^(O|~S))+V[13]+1309151649&4294967295,C=O+(N<<21&4294967295|N>>>11),N=S+(O^(C|~L))+V[4]+4149444226&4294967295,S=C+(N<<6&4294967295|N>>>26),N=L+(C^(S|~O))+V[11]+3174756917&4294967295,L=S+(N<<10&4294967295|N>>>22),N=O+(S^(L|~C))+V[2]+718787259&4294967295,O=L+(N<<15&4294967295|N>>>17),N=C+(L^(O|~S))+V[9]+3951481745&4294967295,R.g[0]=R.g[0]+S&4294967295,R.g[1]=R.g[1]+(O+(N<<21&4294967295|N>>>11))&4294967295,R.g[2]=R.g[2]+O&4294967295,R.g[3]=R.g[3]+L&4294967295}n.prototype.u=function(R,S){S===void 0&&(S=R.length);for(var C=S-this.blockSize,V=this.B,O=this.h,L=0;L<S;){if(O==0)for(;L<=C;)a(this,R,L),L+=this.blockSize;if(typeof R=="string"){for(;L<S;)if(V[O++]=R.charCodeAt(L++),O==this.blockSize){a(this,V),O=0;break}}else for(;L<S;)if(V[O++]=R[L++],O==this.blockSize){a(this,V),O=0;break}}this.h=O,this.o+=S},n.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var S=1;S<R.length-8;++S)R[S]=0;var C=8*this.o;for(S=R.length-8;S<R.length;++S)R[S]=C&255,C/=256;for(this.u(R),R=Array(16),S=C=0;4>S;++S)for(var V=0;32>V;V+=8)R[C++]=this.g[S]>>>V&255;return R};function l(R,S){var C=f;return Object.prototype.hasOwnProperty.call(C,R)?C[R]:C[R]=S(R)}function c(R,S){this.h=S;for(var C=[],V=!0,O=R.length-1;0<=O;O--){var L=R[O]|0;V&&L==S||(C[O]=L,V=!1)}this.g=C}var f={};function m(R){return-128<=R&&128>R?l(R,function(S){return new c([S|0],0>S?-1:0)}):new c([R|0],0>R?-1:0)}function g(R){if(isNaN(R)||!isFinite(R))return T;if(0>R)return W(g(-R));for(var S=[],C=1,V=0;R>=C;V++)S[V]=R/C|0,C*=4294967296;return new c(S,0)}function _(R,S){if(R.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(R.charAt(0)=="-")return W(_(R.substring(1),S));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=g(Math.pow(S,8)),V=T,O=0;O<R.length;O+=8){var L=Math.min(8,R.length-O),N=parseInt(R.substring(O,O+L),S);8>L?(L=g(Math.pow(S,L)),V=V.j(L).add(g(N))):(V=V.j(C),V=V.add(g(N)))}return V}var T=m(0),A=m(1),k=m(16777216);i=c.prototype,i.m=function(){if(G(this))return-W(this).m();for(var R=0,S=1,C=0;C<this.g.length;C++){var V=this.i(C);R+=(0<=V?V:4294967296+V)*S,S*=4294967296}return R},i.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(K(this))return"0";if(G(this))return"-"+W(this).toString(R);for(var S=g(Math.pow(R,6)),C=this,V="";;){var O=we(C,S).g;C=re(C,O.j(S));var L=((0<C.g.length?C.g[0]:C.h)>>>0).toString(R);if(C=O,K(C))return L+V;for(;6>L.length;)L="0"+L;V=L+V}},i.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function K(R){if(R.h!=0)return!1;for(var S=0;S<R.g.length;S++)if(R.g[S]!=0)return!1;return!0}function G(R){return R.h==-1}i.l=function(R){return R=re(this,R),G(R)?-1:K(R)?0:1};function W(R){for(var S=R.g.length,C=[],V=0;V<S;V++)C[V]=~R.g[V];return new c(C,~R.h).add(A)}i.abs=function(){return G(this)?W(this):this},i.add=function(R){for(var S=Math.max(this.g.length,R.g.length),C=[],V=0,O=0;O<=S;O++){var L=V+(this.i(O)&65535)+(R.i(O)&65535),N=(L>>>16)+(this.i(O)>>>16)+(R.i(O)>>>16);V=N>>>16,L&=65535,N&=65535,C[O]=N<<16|L}return new c(C,C[C.length-1]&-2147483648?-1:0)};function re(R,S){return R.add(W(S))}i.j=function(R){if(K(this)||K(R))return T;if(G(this))return G(R)?W(this).j(W(R)):W(W(this).j(R));if(G(R))return W(this.j(W(R)));if(0>this.l(k)&&0>R.l(k))return g(this.m()*R.m());for(var S=this.g.length+R.g.length,C=[],V=0;V<2*S;V++)C[V]=0;for(V=0;V<this.g.length;V++)for(var O=0;O<R.g.length;O++){var L=this.i(V)>>>16,N=this.i(V)&65535,Bt=R.i(O)>>>16,ct=R.i(O)&65535;C[2*V+2*O]+=N*ct,de(C,2*V+2*O),C[2*V+2*O+1]+=L*ct,de(C,2*V+2*O+1),C[2*V+2*O+1]+=N*Bt,de(C,2*V+2*O+1),C[2*V+2*O+2]+=L*Bt,de(C,2*V+2*O+2)}for(V=0;V<S;V++)C[V]=C[2*V+1]<<16|C[2*V];for(V=S;V<2*S;V++)C[V]=0;return new c(C,0)};function de(R,S){for(;(R[S]&65535)!=R[S];)R[S+1]+=R[S]>>>16,R[S]&=65535,S++}function le(R,S){this.g=R,this.h=S}function we(R,S){if(K(S))throw Error("division by zero");if(K(R))return new le(T,T);if(G(R))return S=we(W(R),S),new le(W(S.g),W(S.h));if(G(S))return S=we(R,W(S)),new le(W(S.g),S.h);if(30<R.g.length){if(G(R)||G(S))throw Error("slowDivide_ only works with positive integers.");for(var C=A,V=S;0>=V.l(R);)C=pe(C),V=pe(V);var O=Ie(C,1),L=Ie(V,1);for(V=Ie(V,2),C=Ie(C,2);!K(V);){var N=L.add(V);0>=N.l(R)&&(O=O.add(C),L=N),V=Ie(V,1),C=Ie(C,1)}return S=re(R,O.j(S)),new le(O,S)}for(O=T;0<=R.l(S);){for(C=Math.max(1,Math.floor(R.m()/S.m())),V=Math.ceil(Math.log(C)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),L=g(C),N=L.j(S);G(N)||0<N.l(R);)C-=V,L=g(C),N=L.j(S);K(L)&&(L=A),O=O.add(L),R=re(R,N)}return new le(O,R)}i.A=function(R){return we(this,R).h},i.and=function(R){for(var S=Math.max(this.g.length,R.g.length),C=[],V=0;V<S;V++)C[V]=this.i(V)&R.i(V);return new c(C,this.h&R.h)},i.or=function(R){for(var S=Math.max(this.g.length,R.g.length),C=[],V=0;V<S;V++)C[V]=this.i(V)|R.i(V);return new c(C,this.h|R.h)},i.xor=function(R){for(var S=Math.max(this.g.length,R.g.length),C=[],V=0;V<S;V++)C[V]=this.i(V)^R.i(V);return new c(C,this.h^R.h)};function pe(R){for(var S=R.g.length+1,C=[],V=0;V<S;V++)C[V]=R.i(V)<<1|R.i(V-1)>>>31;return new c(C,R.h)}function Ie(R,S){var C=S>>5;S%=32;for(var V=R.g.length-C,O=[],L=0;L<V;L++)O[L]=0<S?R.i(L+C)>>>S|R.i(L+C+1)<<32-S:R.i(L+C);return new c(O,R.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,sI=n,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=_,ks=c}).apply(typeof V0<"u"?V0:typeof self<"u"?self:typeof window<"u"?window:{});var _f=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var aI,kc,oI,Rf,Ny,lI,uI,cI;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,y,v){return h==Array.prototype||h==Object.prototype||(h[y]=v.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof _f=="object"&&_f];for(var y=0;y<h.length;++y){var v=h[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var n=t(this);function a(h,y){if(y)e:{var v=n;h=h.split(".");for(var I=0;I<h.length-1;I++){var U=h[I];if(!(U in v))break e;v=v[U]}h=h[h.length-1],I=v[h],y=y(I),y!=I&&y!=null&&e(v,h,{configurable:!0,writable:!0,value:y})}}function l(h,y){h instanceof String&&(h+="");var v=0,I=!1,U={next:function(){if(!I&&v<h.length){var Q=v++;return{value:y(Q,h[Q]),done:!1}}return I=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}a("Array.prototype.values",function(h){return h||function(){return l(this,function(y,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},f=this||self;function m(h){var y=typeof h;return y=y!="object"?y:h?Array.isArray(h)?"array":y:"null",y=="array"||y=="object"&&typeof h.length=="number"}function g(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function _(h,y,v){return h.call.apply(h.bind,arguments)}function T(h,y,v){if(!h)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,I),h.apply(y,U)}}return function(){return h.apply(y,arguments)}}function A(h,y,v){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:T,A.apply(null,arguments)}function k(h,y){var v=Array.prototype.slice.call(arguments,1);return function(){var I=v.slice();return I.push.apply(I,arguments),h.apply(this,I)}}function K(h,y){function v(){}v.prototype=y.prototype,h.aa=y.prototype,h.prototype=new v,h.prototype.constructor=h,h.Qb=function(I,U,Q){for(var se=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)se[Fe-2]=arguments[Fe];return y.prototype[U].apply(I,se)}}function G(h){const y=h.length;if(0<y){const v=Array(y);for(let I=0;I<y;I++)v[I]=h[I];return v}return[]}function W(h,y){for(let v=1;v<arguments.length;v++){const I=arguments[v];if(m(I)){const U=h.length||0,Q=I.length||0;h.length=U+Q;for(let se=0;se<Q;se++)h[U+se]=I[se]}else h.push(I)}}class re{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function de(h){return/^[\s\xa0]*$/.test(h)}function le(){var h=f.navigator;return h&&(h=h.userAgent)?h:""}function we(h){return we[" "](h),h}we[" "]=function(){};var pe=le().indexOf("Gecko")!=-1&&!(le().toLowerCase().indexOf("webkit")!=-1&&le().indexOf("Edge")==-1)&&!(le().indexOf("Trident")!=-1||le().indexOf("MSIE")!=-1)&&le().indexOf("Edge")==-1;function Ie(h,y,v){for(const I in h)y.call(v,h[I],I,h)}function R(h,y){for(const v in h)y.call(void 0,h[v],v,h)}function S(h){const y={};for(const v in h)y[v]=h[v];return y}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(h,y){let v,I;for(let U=1;U<arguments.length;U++){I=arguments[U];for(v in I)h[v]=I[v];for(let Q=0;Q<C.length;Q++)v=C[Q],Object.prototype.hasOwnProperty.call(I,v)&&(h[v]=I[v])}}function O(h){var y=1;h=h.split(":");const v=[];for(;0<y&&h.length;)v.push(h.shift()),y--;return h.length&&v.push(h.join(":")),v}function L(h){f.setTimeout(()=>{throw h},0)}function N(){var h=qe;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class Bt{constructor(){this.h=this.g=null}add(y,v){const I=ct.get();I.set(y,v),this.h?this.h.next=I:this.g=I,this.h=I}}var ct=new re(()=>new Y,h=>h.reset());class Y{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,Ee=!1,qe=new Bt,D=()=>{const h=f.Promise.resolve(void 0);ue=()=>{h.then(ee)}};var ee=()=>{for(var h;h=N();){try{h.h.call(h.g)}catch(v){L(v)}var y=ct;y.j(h),100>y.h&&(y.h++,h.next=y.g,y.g=h)}Ee=!1};function ce(){this.s=this.s,this.C=this.C}ce.prototype.s=!1,ce.prototype.ma=function(){this.s||(this.s=!0,this.N())},ce.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ie(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}ie.prototype.h=function(){this.defaultPrevented=!0};var ae=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};f.addEventListener("test",v,y),f.removeEventListener("test",v,y)}catch{}return h}();function be(h,y){if(ie.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var v=this.type=h.type,I=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget){if(pe){e:{try{we(y.nodeName);var U=!0;break e}catch{}U=!1}U||(y=null)}}else v=="mouseover"?y=h.fromElement:v=="mouseout"&&(y=h.toElement);this.relatedTarget=y,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:ye[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&be.aa.h.call(this)}}K(be,ie);var ye={2:"touch",3:"pen",4:"mouse"};be.prototype.h=function(){be.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var yt="closure_listenable_"+(1e6*Math.random()|0),We=0;function st(h,y,v,I,U){this.listener=h,this.proxy=null,this.src=y,this.type=v,this.capture=!!I,this.ha=U,this.key=++We,this.da=this.fa=!1}function qt(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function an(h){this.src=h,this.g={},this.h=0}an.prototype.add=function(h,y,v,I,U){var Q=h.toString();h=this.g[Q],h||(h=this.g[Q]=[],this.h++);var se=vr(h,y,I,U);return-1<se?(y=h[se],v||(y.fa=!1)):(y=new st(y,this.src,Q,!!I,U),y.fa=v,h.push(y)),y};function _r(h,y){var v=y.type;if(v in h.g){var I=h.g[v],U=Array.prototype.indexOf.call(I,y,void 0),Q;(Q=0<=U)&&Array.prototype.splice.call(I,U,1),Q&&(qt(y),h.g[v].length==0&&(delete h.g[v],h.h--))}}function vr(h,y,v,I){for(var U=0;U<h.length;++U){var Q=h[U];if(!Q.da&&Q.listener==y&&Q.capture==!!v&&Q.ha==I)return U}return-1}var ra="closure_lm_"+(1e6*Math.random()|0),fu={};function Qh(h,y,v,I,U){if(Array.isArray(y)){for(var Q=0;Q<y.length;Q++)Qh(h,y[Q],v,I,U);return null}return v=Wh(v),h&&h[yt]?h.K(y,v,g(I)?!!I.capture:!1,U):tr(h,y,v,!1,I,U)}function tr(h,y,v,I,U,Q){if(!y)throw Error("Invalid event type");var se=g(U)?!!U.capture:!!U,Fe=To(h);if(Fe||(h[ra]=Fe=new an(h)),v=Fe.add(y,v,I,se,Q),v.proxy)return v;if(I=Jm(),v.proxy=I,I.src=h,I.listener=v,h.addEventListener)ae||(U=se),U===void 0&&(U=!1),h.addEventListener(y.toString(),I,U);else if(h.attachEvent)h.attachEvent(ia(y.toString()),I);else if(h.addListener&&h.removeListener)h.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Jm(){function h(v){return y.call(h.src,h.listener,v)}const y=Zm;return h}function mu(h,y,v,I,U){if(Array.isArray(y))for(var Q=0;Q<y.length;Q++)mu(h,y[Q],v,I,U);else I=g(I)?!!I.capture:!!I,v=Wh(v),h&&h[yt]?(h=h.i,y=String(y).toString(),y in h.g&&(Q=h.g[y],v=vr(Q,v,I,U),-1<v&&(qt(Q[v]),Array.prototype.splice.call(Q,v,1),Q.length==0&&(delete h.g[y],h.h--)))):h&&(h=To(h))&&(y=h.g[y.toString()],h=-1,y&&(h=vr(y,v,I,U)),(v=-1<h?y[h]:null)&&Eo(v))}function Eo(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[yt])_r(y.i,h);else{var v=h.type,I=h.proxy;y.removeEventListener?y.removeEventListener(v,I,h.capture):y.detachEvent?y.detachEvent(ia(v),I):y.addListener&&y.removeListener&&y.removeListener(I),(v=To(y))?(_r(v,h),v.h==0&&(v.src=null,y[ra]=null)):qt(h)}}}function ia(h){return h in fu?fu[h]:fu[h]="on"+h}function Zm(h,y){if(h.da)h=!0;else{y=new be(y,this);var v=h.listener,I=h.ha||h.src;h.fa&&Eo(h),h=v.call(I,y)}return h}function To(h){return h=h[ra],h instanceof an?h:null}var pu="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wh(h){return typeof h=="function"?h:(h[pu]||(h[pu]=function(y){return h.handleEvent(y)}),h[pu])}function bt(){ce.call(this),this.i=new an(this),this.M=this,this.F=null}K(bt,ce),bt.prototype[yt]=!0,bt.prototype.removeEventListener=function(h,y,v,I){mu(this,h,y,v,I)};function Ye(h,y){var v,I=h.F;if(I)for(v=[];I;I=I.F)v.push(I);if(h=h.M,I=y.type||y,typeof y=="string")y=new ie(y,h);else if(y instanceof ie)y.target=y.target||h;else{var U=y;y=new ie(I,h),V(y,U)}if(U=!0,v)for(var Q=v.length-1;0<=Q;Q--){var se=y.g=v[Q];U=zn(se,I,!0,y)&&U}if(se=y.g=h,U=zn(se,I,!0,y)&&U,U=zn(se,I,!1,y)&&U,v)for(Q=0;Q<v.length;Q++)se=y.g=v[Q],U=zn(se,I,!1,y)&&U}bt.prototype.N=function(){if(bt.aa.N.call(this),this.i){var h=this.i,y;for(y in h.g){for(var v=h.g[y],I=0;I<v.length;I++)qt(v[I]);delete h.g[y],h.h--}}this.F=null},bt.prototype.K=function(h,y,v,I){return this.i.add(String(h),y,!1,v,I)},bt.prototype.L=function(h,y,v,I){return this.i.add(String(h),y,!0,v,I)};function zn(h,y,v,I){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();for(var U=!0,Q=0;Q<y.length;++Q){var se=y[Q];if(se&&!se.da&&se.capture==v){var Fe=se.listener,Ht=se.ha||se.src;se.fa&&_r(h.i,se),U=Fe.call(Ht,I)!==!1&&U}}return U&&!I.defaultPrevented}function gn(h,y,v){if(typeof h=="function")v&&(h=A(h,v));else if(h&&typeof h.handleEvent=="function")h=A(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:f.setTimeout(h,y||0)}function Yh(h){h.g=gn(()=>{h.g=null,h.i&&(h.i=!1,Yh(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class ep extends ce{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Yh(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sa(h){ce.call(this),this.h=h,this.g={}}K(sa,ce);var aa=[];function oa(h){Ie(h.g,function(y,v){this.g.hasOwnProperty(v)&&Eo(y)},h),h.g={}}sa.prototype.N=function(){sa.aa.N.call(this),oa(this)},sa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Er=f.JSON.stringify,wo=f.JSON.parse,la=class{stringify(h){return f.JSON.stringify(h,void 0)}parse(h){return f.JSON.parse(h,void 0)}};function gu(){}gu.prototype.h=null;function yu(h){return h.h||(h.h=h.i())}function _u(){}var ci={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function hi(){ie.call(this,"d")}K(hi,ie);function vu(){ie.call(this,"c")}K(vu,ie);var Pr={},Eu=null;function Yi(){return Eu=Eu||new bt}Pr.La="serverreachability";function bo(h){ie.call(this,Pr.La,h)}K(bo,ie);function $i(h){const y=Yi();Ye(y,new bo(y))}Pr.STAT_EVENT="statevent";function $h(h,y){ie.call(this,Pr.STAT_EVENT,h),this.stat=y}K($h,ie);function ht(h){const y=Yi();Ye(y,new $h(y,h))}Pr.Ma="timingevent";function Gt(h,y){ie.call(this,Pr.Ma,h),this.size=y}K(Gt,ie);function Ot(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){h()},y)}function nr(){this.g=!0}nr.prototype.xa=function(){this.g=!1};function Tu(h,y,v,I,U,Q){h.info(function(){if(h.g)if(Q)for(var se="",Fe=Q.split("&"),Ht=0;Ht<Fe.length;Ht++){var je=Fe[Ht].split("=");if(1<je.length){var Jt=je[0];je=je[1];var Kt=Jt.split("_");se=2<=Kt.length&&Kt[1]=="type"?se+(Jt+"="+je+"&"):se+(Jt+"=redacted&")}}else se=null;else se=Q;return"XMLHTTP REQ ("+I+") [attempt "+U+"]: "+y+`
`+v+`
`+se})}function tp(h,y,v,I,U,Q,se){h.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+U+"]: "+y+`
`+v+`
`+Q+" "+se})}function Xi(h,y,v,I){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+ua(h,v)+(I?" "+I:"")})}function Xh(h,y){h.info(function(){return"TIMEOUT: "+y})}nr.prototype.info=function(){};function ua(h,y){if(!h.g)return y;if(!y)return null;try{var v=JSON.parse(y);if(v){for(h=0;h<v.length;h++)if(Array.isArray(v[h])){var I=v[h];if(!(2>I.length)){var U=I[1];if(Array.isArray(U)&&!(1>U.length)){var Q=U[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var se=1;se<U.length;se++)U[se]=""}}}}return Er(v)}catch{return y}}var Ji={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},di={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},kr;function Vr(){}K(Vr,gu),Vr.prototype.g=function(){return new XMLHttpRequest},Vr.prototype.i=function(){return{}},kr=new Vr;function An(h,y,v,I){this.j=h,this.i=y,this.l=v,this.R=I||1,this.U=new sa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ct}function Ct(){this.i=null,this.g="",this.h=!1}var wu={},Ao={};function Tr(h,y,v){h.L=1,h.v=ma(Bn(y)),h.m=v,h.P=!0,fi(h,null)}function fi(h,y){h.F=Date.now(),ca(h),h.A=Bn(h.v);var v=h.A,I=h.R;Array.isArray(I)||(I=[String(I)]),xu(v.i,"t",I),h.C=0,v=h.j.J,h.h=new Ct,h.g=fd(h.j,v?y:null,!h.m),0<h.O&&(h.M=new ep(A(h.Y,h,h.g),h.O)),y=h.U,v=h.g,I=h.ca;var U="readystatechange";Array.isArray(U)||(U&&(aa[0]=U.toString()),U=aa);for(var Q=0;Q<U.length;Q++){var se=Qh(v,U[Q],I||y.handleEvent,!1,y.h||y);if(!se)break;y.g[se.key]=se}y=h.H?S(h.H):{},h.m?(h.u||(h.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,y)):(h.u="GET",h.g.ea(h.A,h.u,null,y)),$i(),Tu(h.i,h.u,h.A,h.l,h.R,h.m)}An.prototype.ca=function(h){h=h.target;const y=this.M;y&&ar(h)==3?y.j():this.Y(h)},An.prototype.Y=function(h){try{if(h==this.g)e:{const Kt=ar(this.g);var y=this.g.Ba();const Ti=this.g.Z();if(!(3>Kt)&&(Kt!=3||this.g&&(this.h.h||this.g.oa()||sd(this.g)))){this.J||Kt!=4||y==7||(y==8||0>=Ti?$i(3):$i(2)),Zi(this);var v=this.g.Z();this.X=v;t:if(Jh(this)){var I=sd(this.g);h="";var U=I.length,Q=ar(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){on(this),Or(this);var se="";break t}this.h.i=new f.TextDecoder}for(y=0;y<U;y++)this.h.h=!0,h+=this.h.i.decode(I[y],{stream:!(Q&&y==U-1)});I.length=0,this.h.g+=h,this.C=0,se=this.h.g}else se=this.g.oa();if(this.o=v==200,tp(this.i,this.u,this.A,this.l,this.R,Kt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Fe,Ht=this.g;if((Fe=Ht.g?Ht.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!de(Fe)){var je=Fe;break t}}je=null}if(v=je)Xi(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ha(this,v);else{this.o=!1,this.s=3,ht(12),on(this),Or(this);break e}}if(this.P){v=!0;let ln;for(;!this.J&&this.C<se.length;)if(ln=Zh(this,se),ln==Ao){Kt==4&&(this.s=4,ht(14),v=!1),Xi(this.i,this.l,null,"[Incomplete Response]");break}else if(ln==wu){this.s=4,ht(15),Xi(this.i,this.l,se,"[Invalid Chunk]"),v=!1;break}else Xi(this.i,this.l,ln,null),ha(this,ln);if(Jh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Kt!=4||se.length!=0||this.h.h||(this.s=1,ht(16),v=!1),this.o=this.o&&v,!v)Xi(this.i,this.l,se,"[Invalid Chunked Response]"),on(this),Or(this);else if(0<se.length&&!this.W){this.W=!0;var Jt=this.j;Jt.g==this&&Jt.ba&&!Jt.M&&(Jt.j.info("Great, no buffering proxy detected. Bytes received: "+se.length),wa(Jt),Jt.M=!0,ht(11))}}else Xi(this.i,this.l,se,null),ha(this,se);Kt==4&&on(this),this.o&&!this.J&&(Kt==4?cd(this.j,this):(this.o=!1,ca(this)))}else ap(this.g),v==400&&0<se.indexOf("Unknown SID")?(this.s=3,ht(12)):(this.s=0,ht(13)),on(this),Or(this)}}}catch{}finally{}};function Jh(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Zh(h,y){var v=h.C,I=y.indexOf(`
`,v);return I==-1?Ao:(v=Number(y.substring(v,I)),isNaN(v)?wu:(I+=1,I+v>y.length?Ao:(y=y.slice(I,I+v),h.C=I+v,y)))}An.prototype.cancel=function(){this.J=!0,on(this)};function ca(h){h.S=Date.now()+h.I,ed(h,h.I)}function ed(h,y){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Ot(A(h.ba,h),y)}function Zi(h){h.B&&(f.clearTimeout(h.B),h.B=null)}An.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Xh(this.i,this.A),this.L!=2&&($i(),ht(17)),on(this),this.s=2,Or(this)):ed(this,this.S-h)};function Or(h){h.j.G==0||h.J||cd(h.j,h)}function on(h){Zi(h);var y=h.M;y&&typeof y.ma=="function"&&y.ma(),h.M=null,oa(h.U),h.g&&(y=h.g,h.g=null,y.abort(),y.ma())}function ha(h,y){try{var v=h.j;if(v.G!=0&&(v.g==h||bu(v.h,h))){if(!h.K&&bu(v.h,h)&&v.G==3){try{var I=v.Da.g.parse(y)}catch{I=null}if(Array.isArray(I)&&I.length==3){var U=I;if(U[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<h.F)Mo(v),Vo(v);else break e;ku(v),ht(18)}}else v.za=U[1],0<v.za-v.T&&37500>U[2]&&v.F&&v.v==0&&!v.C&&(v.C=Ot(A(v.Za,v),6e3));if(1>=So(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Ei(v,11)}else if((h.K||v.g==h)&&Mo(v),!de(y))for(U=v.Da.g.parse(y),y=0;y<U.length;y++){let je=U[y];if(v.T=je[0],je=je[1],v.G==2)if(je[0]=="c"){v.K=je[1],v.ia=je[2];const Jt=je[3];Jt!=null&&(v.la=Jt,v.j.info("VER="+v.la));const Kt=je[4];Kt!=null&&(v.Aa=Kt,v.j.info("SVER="+v.Aa));const Ti=je[5];Ti!=null&&typeof Ti=="number"&&0<Ti&&(I=1.5*Ti,v.L=I,v.j.info("backChannelRequestTimeoutMs_="+I)),I=v;const ln=h.g;if(ln){const Br=ln.g?ln.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Br){var Q=I.h;Q.g||Br.indexOf("spdy")==-1&&Br.indexOf("quic")==-1&&Br.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Ro(Q,Q.h),Q.h=null))}if(I.D){const Ou=ln.g?ln.g.getResponseHeader("X-HTTP-Session-Id"):null;Ou&&(I.ya=Ou,et(I.I,I.D,Ou))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-h.F,v.j.info("Handshake RTT: "+v.R+"ms")),I=v;var se=h;if(I.qa=dd(I,I.J?I.ia:null,I.W),se.K){In(I.h,se);var Fe=se,Ht=I.L;Ht&&(Fe.I=Ht),Fe.B&&(Zi(Fe),ca(Fe)),I.g=se}else ld(I);0<v.i.length&&Oo(v)}else je[0]!="stop"&&je[0]!="close"||Ei(v,7);else v.G==3&&(je[0]=="stop"||je[0]=="close"?je[0]=="stop"?Ei(v,7):Du(v):je[0]!="noop"&&v.l&&v.l.ta(je),v.v=0)}}$i(4)}catch{}}var td=class{constructor(h,y){this.g=h,this.map=y}};function mi(h){this.l=h||10,f.PerformanceNavigationTiming?(h=f.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Io(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function So(h){return h.h?1:h.g?h.g.size:0}function bu(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Ro(h,y){h.g?h.g.add(y):h.h=y}function In(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}mi.prototype.cancel=function(){if(this.i=Au(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Au(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const v of h.g.values())y=y.concat(v.D);return y}return G(h.i)}function np(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(m(h)){for(var y=[],v=h.length,I=0;I<v;I++)y.push(h[I]);return y}y=[],v=0;for(I in h)y[v++]=h[I];return y}function xo(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(m(h)||typeof h=="string"){var y=[];h=h.length;for(var v=0;v<h;v++)y.push(v);return y}y=[],v=0;for(const I in h)y[v++]=I;return y}}}function Iu(h,y){if(h.forEach&&typeof h.forEach=="function")h.forEach(y,void 0);else if(m(h)||typeof h=="string")Array.prototype.forEach.call(h,y,void 0);else for(var v=xo(h),I=np(h),U=I.length,Q=0;Q<U;Q++)y.call(void 0,I[Q],v&&v[Q],h)}var da=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rp(h,y){if(h){h=h.split("&");for(var v=0;v<h.length;v++){var I=h[v].indexOf("="),U=null;if(0<=I){var Q=h[v].substring(0,I);U=h[v].substring(I+1)}else Q=h[v];y(Q,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Mt(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Mt){this.h=h.h,fa(this,h.j),this.o=h.o,this.g=h.g,es(this,h.s),this.l=h.l;var y=h.i,v=new gi;v.i=y.i,y.g&&(v.g=new Map(y.g),v.h=y.h),pi(this,v),this.m=h.m}else h&&(y=String(h).match(da))?(this.h=!1,fa(this,y[1]||"",!0),this.o=rr(y[2]||""),this.g=rr(y[3]||"",!0),es(this,y[4]),this.l=rr(y[5]||"",!0),pi(this,y[6]||"",!0),this.m=rr(y[7]||"")):(this.h=!1,this.i=new gi(null,this.h))}Mt.prototype.toString=function(){var h=[],y=this.j;y&&h.push(pa(y,Su,!0),":");var v=this.g;return(v||y=="file")&&(h.push("//"),(y=this.o)&&h.push(pa(y,Su,!0),"@"),h.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&h.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(pa(v,v.charAt(0)=="/"?ip:Ru,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",pa(v,Co)),h.join("")};function Bn(h){return new Mt(h)}function fa(h,y,v){h.j=v?rr(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function es(h,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);h.s=y}else h.s=null}function pi(h,y,v){y instanceof gi?(h.i=y,rd(h.i,h.h)):(v||(y=pa(y,sp)),h.i=new gi(y,h.h))}function et(h,y,v){h.i.set(y,v)}function ma(h){return et(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function rr(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function pa(h,y,v){return typeof h=="string"?(h=encodeURI(h).replace(y,nd),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function nd(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Su=/[#\/\?@]/g,Ru=/[#\?:]/g,ip=/[#\?]/g,sp=/[#\?@]/g,Co=/#/g;function gi(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function ir(h){h.g||(h.g=new Map,h.h=0,h.i&&rp(h.i,function(y,v){h.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}i=gi.prototype,i.add=function(h,y){ir(this),this.i=null,h=Mr(this,h);var v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(y),this.h+=1,this};function yi(h,y){ir(h),y=Mr(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function _i(h,y){return ir(h),y=Mr(h,y),h.g.has(y)}i.forEach=function(h,y){ir(this),this.g.forEach(function(v,I){v.forEach(function(U){h.call(y,U,I,this)},this)},this)},i.na=function(){ir(this);const h=Array.from(this.g.values()),y=Array.from(this.g.keys()),v=[];for(let I=0;I<y.length;I++){const U=h[I];for(let Q=0;Q<U.length;Q++)v.push(y[I])}return v},i.V=function(h){ir(this);let y=[];if(typeof h=="string")_i(this,h)&&(y=y.concat(this.g.get(Mr(this,h))));else{h=Array.from(this.g.values());for(let v=0;v<h.length;v++)y=y.concat(h[v])}return y},i.set=function(h,y){return ir(this),this.i=null,h=Mr(this,h),_i(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},i.get=function(h,y){return h?(h=this.V(h),0<h.length?String(h[0]):y):y};function xu(h,y,v){yi(h,y),0<v.length&&(h.i=null,h.g.set(Mr(h,y),G(v)),h.h+=v.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(var v=0;v<y.length;v++){var I=y[v];const Q=encodeURIComponent(String(I)),se=this.V(I);for(I=0;I<se.length;I++){var U=Q;se[I]!==""&&(U+="="+encodeURIComponent(String(se[I]))),h.push(U)}}return this.i=h.join("&")};function Mr(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function rd(h,y){y&&!h.j&&(ir(h),h.i=null,h.g.forEach(function(v,I){var U=I.toLowerCase();I!=U&&(yi(this,I),xu(this,U,v))},h)),h.j=y}function ga(h,y){const v=new nr;if(f.Image){const I=new Image;I.onload=k(sr,v,"TestLoadImage: loaded",!0,y,I),I.onerror=k(sr,v,"TestLoadImage: error",!1,y,I),I.onabort=k(sr,v,"TestLoadImage: abort",!1,y,I),I.ontimeout=k(sr,v,"TestLoadImage: timeout",!1,y,I),f.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=h}else y(!1)}function wr(h,y){const v=new nr,I=new AbortController,U=setTimeout(()=>{I.abort(),sr(v,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:I.signal}).then(Q=>{clearTimeout(U),Q.ok?sr(v,"TestPingServer: ok",!0,y):sr(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(U),sr(v,"TestPingServer: error",!1,y)})}function sr(h,y,v,I,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),I(v)}catch{}}function ya(){this.g=new la}function Lr(h,y,v){const I=v||"";try{Iu(h,function(U,Q){let se=U;g(U)&&(se=Er(U)),y.push(I+Q+"="+encodeURIComponent(se))})}catch(U){throw y.push(I+"type="+encodeURIComponent("_badmap")),U}}function ts(h){this.l=h.Ub||null,this.j=h.eb||!1}K(ts,gu),ts.prototype.g=function(){return new vi(this.l,this.j)},ts.prototype.i=function(h){return function(){return h}}({});function vi(h,y){bt.call(this),this.D=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}K(vi,bt),i=vi.prototype,i.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=y,this.readyState=1,Fr(this)},i.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(y.body=h),(this.D||f).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ur(this)),this.readyState=0},i.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Fr(this)),this.g&&(this.readyState=3,Fr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Cu(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Cu(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}i.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Ur(this):Fr(this),this.readyState==3&&Cu(this)}},i.Ra=function(h){this.g&&(this.response=this.responseText=h,Ur(this))},i.Qa=function(h){this.g&&(this.response=h,Ur(this))},i.ga=function(){this.g&&Ur(this)};function Ur(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Fr(h)}i.setRequestHeader=function(h,y){this.u.append(h,y)},i.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=y.next();return h.join(`\r
`)};function Fr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(vi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Nu(h){let y="";return Ie(h,function(v,I){y+=I,y+=":",y+=v,y+=`\r
`}),y}function Xt(h,y,v){e:{for(I in v){var I=!1;break e}I=!0}I||(v=Nu(v),typeof h=="string"?v!=null&&encodeURIComponent(String(v)):et(h,y,v))}function Qe(h){bt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}K(Qe,bt);var No=/^https?$/i,_a=["POST","PUT"];i=Qe.prototype,i.Ha=function(h){this.J=h},i.ea=function(h,y,v,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():kr.g(),this.v=this.o?yu(this.o):yu(kr),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(Q){id(this,Q);return}if(h=v||"",v=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var U in I)v.set(U,I[U]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const Q of I.keys())v.set(Q,I.get(Q));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(v.keys()).find(Q=>Q.toLowerCase()=="content-type"),U=f.FormData&&h instanceof f.FormData,!(0<=Array.prototype.indexOf.call(_a,y,void 0))||I||U||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,se]of v)this.g.setRequestHeader(Q,se);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{va(this),this.u=!0,this.g.send(h),this.u=!1}catch(Q){id(this,Q)}};function id(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.m=5,Do(h),jr(h)}function Do(h){h.A||(h.A=!0,Ye(h,"complete"),Ye(h,"error"))}i.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Ye(this,"complete"),Ye(this,"abort"),jr(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jr(this,!0)),Qe.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Po(this):this.bb())},i.bb=function(){Po(this)};function Po(h){if(h.h&&typeof c<"u"&&(!h.v[1]||ar(h)!=4||h.Z()!=2)){if(h.u&&ar(h)==4)gn(h.Ea,0,h);else if(Ye(h,"readystatechange"),ar(h)==4){h.h=!1;try{const se=h.Z();e:switch(se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var I;if(I=se===0){var U=String(h.D).match(da)[1]||null;!U&&f.self&&f.self.location&&(U=f.self.location.protocol.slice(0,-1)),I=!No.test(U?U.toLowerCase():"")}v=I}if(v)Ye(h,"complete"),Ye(h,"success");else{h.m=6;try{var Q=2<ar(h)?h.g.statusText:""}catch{Q=""}h.l=Q+" ["+h.Z()+"]",Do(h)}}finally{jr(h)}}}}function jr(h,y){if(h.g){va(h);const v=h.g,I=h.v[0]?()=>{}:null;h.g=null,h.v=null,y||Ye(h,"ready");try{v.onreadystatechange=I}catch{}}}function va(h){h.I&&(f.clearTimeout(h.I),h.I=null)}i.isActive=function(){return!!this.g};function ar(h){return h.g?h.g.readyState:0}i.Z=function(){try{return 2<ar(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),wo(y)}};function sd(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function ap(h){const y={};h=(h.g&&2<=ar(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<h.length;I++){if(de(h[I]))continue;var v=O(h[I]);const U=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const Q=y[U]||[];y[U]=Q,Q.push(v)}R(y,function(I){return I.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ea(h,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||y}function ko(h){this.Aa=0,this.i=[],this.j=new nr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ea("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ea("baseRetryDelayMs",5e3,h),this.cb=Ea("retryDelaySeedMs",1e4,h),this.Wa=Ea("forwardChannelMaxRetries",2,h),this.wa=Ea("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new mi(h&&h.concurrentRequestLimit),this.Da=new ya,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=ko.prototype,i.la=8,i.G=1,i.connect=function(h,y,v,I){ht(0),this.W=h,this.H=y||{},v&&I!==void 0&&(this.H.OSID=v,this.H.OAID=I),this.F=this.X,this.I=dd(this,null,this.W),Oo(this)};function Du(h){if(ad(h),h.G==3){var y=h.U++,v=Bn(h.I);if(et(v,"SID",h.K),et(v,"RID",y),et(v,"TYPE","terminate"),Ta(h,v),y=new An(h,h.j,y),y.L=2,y.v=ma(Bn(v)),v=!1,f.navigator&&f.navigator.sendBeacon)try{v=f.navigator.sendBeacon(y.v.toString(),"")}catch{}!v&&f.Image&&(new Image().src=y.v,v=!0),v||(y.g=fd(y.j,null),y.g.ea(y.v)),y.F=Date.now(),ca(y)}hd(h)}function Vo(h){h.g&&(wa(h),h.g.cancel(),h.g=null)}function ad(h){Vo(h),h.u&&(f.clearTimeout(h.u),h.u=null),Mo(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&f.clearTimeout(h.s),h.s=null)}function Oo(h){if(!Io(h.h)&&!h.s){h.s=!0;var y=h.Ga;ue||D(),Ee||(ue(),Ee=!0),qe.add(y,h),h.B=0}}function op(h,y){return So(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=y.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Ot(A(h.Ga,h,y),Vu(h,h.B)),h.B++,!0)}i.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const U=new An(this,this.j,h);let Q=this.o;if(this.S&&(Q?(Q=S(Q),V(Q,this.S)):Q=this.S),this.m!==null||this.O||(U.H=Q,Q=null),this.P)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var I=this.i[v];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(y+=I,4096<y){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=od(this,U,y),v=Bn(this.I),et(v,"RID",h),et(v,"CVER",22),this.D&&et(v,"X-HTTP-Session-Id",this.D),Ta(this,v),Q&&(this.O?y="headers="+encodeURIComponent(String(Nu(Q)))+"&"+y:this.m&&Xt(v,this.m,Q)),Ro(this.h,U),this.Ua&&et(v,"TYPE","init"),this.P?(et(v,"$req",y),et(v,"SID","null"),U.T=!0,Tr(U,v,null)):Tr(U,v,y),this.G=2}}else this.G==3&&(h?Pu(this,h):this.i.length==0||Io(this.h)||Pu(this))};function Pu(h,y){var v;y?v=y.l:v=h.U++;const I=Bn(h.I);et(I,"SID",h.K),et(I,"RID",v),et(I,"AID",h.T),Ta(h,I),h.m&&h.o&&Xt(I,h.m,h.o),v=new An(h,h.j,v,h.B+1),h.m===null&&(v.H=h.o),y&&(h.i=y.D.concat(h.i)),y=od(h,v,1e3),v.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Ro(h.h,v),Tr(v,I,y)}function Ta(h,y){h.H&&Ie(h.H,function(v,I){et(y,I,v)}),h.l&&Iu({},function(v,I){et(y,I,v)})}function od(h,y,v){v=Math.min(h.i.length,v);var I=h.l?A(h.l.Na,h.l,h):null;e:{var U=h.i;let Q=-1;for(;;){const se=["count="+v];Q==-1?0<v?(Q=U[0].g,se.push("ofs="+Q)):Q=0:se.push("ofs="+Q);let Fe=!0;for(let Ht=0;Ht<v;Ht++){let je=U[Ht].g;const Jt=U[Ht].map;if(je-=Q,0>je)Q=Math.max(0,U[Ht].g-100),Fe=!1;else try{Lr(Jt,se,"req"+je+"_")}catch{I&&I(Jt)}}if(Fe){I=se.join("&");break e}}}return h=h.i.splice(0,v),y.D=h,I}function ld(h){if(!h.g&&!h.u){h.Y=1;var y=h.Fa;ue||D(),Ee||(ue(),Ee=!0),qe.add(y,h),h.v=0}}function ku(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Ot(A(h.Fa,h),Vu(h,h.v)),h.v++,!0)}i.Fa=function(){if(this.u=null,ud(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Ot(A(this.ab,this),h)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ht(10),Vo(this),ud(this))};function wa(h){h.A!=null&&(f.clearTimeout(h.A),h.A=null)}function ud(h){h.g=new An(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var y=Bn(h.qa);et(y,"RID","rpc"),et(y,"SID",h.K),et(y,"AID",h.T),et(y,"CI",h.F?"0":"1"),!h.F&&h.ja&&et(y,"TO",h.ja),et(y,"TYPE","xmlhttp"),Ta(h,y),h.m&&h.o&&Xt(y,h.m,h.o),h.L&&(h.g.I=h.L);var v=h.g;h=h.ia,v.L=1,v.v=ma(Bn(y)),v.m=null,v.P=!0,fi(v,h)}i.Za=function(){this.C!=null&&(this.C=null,Vo(this),ku(this),ht(19))};function Mo(h){h.C!=null&&(f.clearTimeout(h.C),h.C=null)}function cd(h,y){var v=null;if(h.g==y){Mo(h),wa(h),h.g=null;var I=2}else if(bu(h.h,y))v=y.D,In(h.h,y),I=1;else return;if(h.G!=0){if(y.o)if(I==1){v=y.m?y.m.length:0,y=Date.now()-y.F;var U=h.B;I=Yi(),Ye(I,new Gt(I,v)),Oo(h)}else ld(h);else if(U=y.s,U==3||U==0&&0<y.X||!(I==1&&op(h,y)||I==2&&ku(h)))switch(v&&0<v.length&&(y=h.h,y.i=y.i.concat(v)),U){case 1:Ei(h,5);break;case 4:Ei(h,10);break;case 3:Ei(h,6);break;default:Ei(h,2)}}}function Vu(h,y){let v=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(v*=2),v*y}function Ei(h,y){if(h.j.info("Error code "+y),y==2){var v=A(h.fb,h),I=h.Xa;const U=!I;I=new Mt(I||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||fa(I,"https"),ma(I),U?ga(I.toString(),v):wr(I.toString(),v)}else ht(2);h.G=0,h.l&&h.l.sa(y),hd(h),ad(h)}i.fb=function(h){h?(this.j.info("Successfully pinged google.com"),ht(2)):(this.j.info("Failed to ping google.com"),ht(1))};function hd(h){if(h.G=0,h.ka=[],h.l){const y=Au(h.h);(y.length!=0||h.i.length!=0)&&(W(h.ka,y),W(h.ka,h.i),h.h.i.length=0,G(h.i),h.i.length=0),h.l.ra()}}function dd(h,y,v){var I=v instanceof Mt?Bn(v):new Mt(v);if(I.g!="")y&&(I.g=y+"."+I.g),es(I,I.s);else{var U=f.location;I=U.protocol,y=y?y+"."+U.hostname:U.hostname,U=+U.port;var Q=new Mt(null);I&&fa(Q,I),y&&(Q.g=y),U&&es(Q,U),v&&(Q.l=v),I=Q}return v=h.D,y=h.ya,v&&y&&et(I,v,y),et(I,"VER",h.la),Ta(h,I),I}function fd(h,y,v){if(y&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Ca&&!h.pa?new Qe(new ts({eb:v})):new Qe(h.pa),y.Ha(h.J),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function md(){}i=md.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function Lo(){}Lo.prototype.g=function(h,y){return new Sn(h,y)};function Sn(h,y){bt.call(this),this.g=new ko(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(h?h["X-WebChannel-Client-Profile"]=y.va:h={"X-WebChannel-Client-Profile":y.va}),this.g.S=h,(h=y&&y.Sb)&&!de(h)&&(this.g.m=h),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!de(y)&&(this.g.D=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new zr(this)}K(Sn,bt),Sn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Sn.prototype.close=function(){Du(this.g)},Sn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.u&&(v={},v.__data__=Er(h),h=v);y.i.push(new td(y.Ya++,h)),y.G==3&&Oo(y)},Sn.prototype.N=function(){this.g.l=null,delete this.j,Du(this.g),delete this.g,Sn.aa.N.call(this)};function pd(h){hi.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const v in y){h=v;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}K(pd,hi);function gd(){vu.call(this),this.status=1}K(gd,vu);function zr(h){this.g=h}K(zr,md),zr.prototype.ua=function(){Ye(this.g,"a")},zr.prototype.ta=function(h){Ye(this.g,new pd(h))},zr.prototype.sa=function(h){Ye(this.g,new gd)},zr.prototype.ra=function(){Ye(this.g,"b")},Lo.prototype.createWebChannel=Lo.prototype.g,Sn.prototype.send=Sn.prototype.o,Sn.prototype.open=Sn.prototype.m,Sn.prototype.close=Sn.prototype.close,cI=function(){return new Lo},uI=function(){return Yi()},lI=Pr,Ny={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ji.NO_ERROR=0,Ji.TIMEOUT=8,Ji.HTTP_ERROR=6,Rf=Ji,di.COMPLETE="complete",oI=di,_u.EventType=ci,ci.OPEN="a",ci.CLOSE="b",ci.ERROR="c",ci.MESSAGE="d",bt.prototype.listen=bt.prototype.K,kc=_u,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,aI=Qe}).apply(typeof _f<"u"?_f:typeof self<"u"?self:typeof window<"u"?window:{});const O0="@firebase/firestore",M0="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};rn.UNAUTHENTICATED=new rn(null),rn.GOOGLE_CREDENTIALS=new rn("google-credentials-uid"),rn.FIRST_PARTY=new rn("first-party-uid"),rn.MOCK_USER=new rn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nu="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs=new pm("@firebase/firestore");function vl(){return zs.logLevel}function AN(i){zs.setLogLevel(i)}function te(i,...e){if(zs.logLevel<=Me.DEBUG){const t=e.map(S_);zs.debug(`Firestore (${nu}): ${i}`,...t)}}function Pt(i,...e){if(zs.logLevel<=Me.ERROR){const t=e.map(S_);zs.error(`Firestore (${nu}): ${i}`,...t)}}function oi(i,...e){if(zs.logLevel<=Me.WARN){const t=e.map(S_);zs.warn(`Firestore (${nu}): ${i}`,...t)}}function S_(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(i,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,hI(i,n,t)}function hI(i,e,t){let n=`FIRESTORE (${nu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw Pt(n),new Error(n)}function _e(i,e,t,n){let a="Unexpected state";typeof t=="string"?a=t:n=t,i||hI(e,a,n)}function IN(i,e){i||me(57014,e)}function he(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Z extends Nn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class SN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(rn.UNAUTHENTICATED))}shutdown(){}}class RN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class xN{constructor(e){this.t=e,this.currentUser=rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){_e(this.o===void 0,42304);let n=this.i;const a=m=>this.i!==n?(n=this.i,t(m)):Promise.resolve();let l=new mn;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new mn,e.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const m=l;e.enqueueRetryable(async()=>{await m.promise,await a(this.currentUser)})},f=m=>{te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(m=>f(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(te("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new mn)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(n=>this.i!==e?(te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(_e(typeof n.accessToken=="string",31837,{l:n}),new dI(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string",2055,{h:e}),new rn(e)}}class CN{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=rn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class NN{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new CN(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(rn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class L0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class DN{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,mt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){_e(this.o===void 0,3512);const n=l=>{l.error!=null&&te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,te("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>n(l))};const a=l=>{te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new L0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(_e(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new L0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PN(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<i;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const a=PN(40);for(let l=0;l<a.length;++l)n.length<20&&a[l]<t&&(n+=e.charAt(a[l]%62))}return n}}function Ce(i,e){return i<e?-1:i>e?1:0}function Dy(i,e){const t=Math.min(i.length,e.length);for(let n=0;n<t;n++){const a=i.charAt(n),l=e.charAt(n);if(a!==l)return uy(a)===uy(l)?Ce(a,l):uy(a)?1:-1}return Ce(i.length,e.length)}const kN=55296,VN=57343;function uy(i){const e=i.charCodeAt(0);return e>=kN&&e<=VN}function kl(i,e,t){return i.length===e.length&&i.every((n,a)=>t(n,e[a]))}function fI(i){return i+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0="__name__";class Wr{constructor(e,t,n){t===void 0?t=0:t>e.length&&me(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&me(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return Wr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Wr?e.forEach(n=>{t.push(n)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let a=0;a<n;a++){const l=Wr.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Ce(e.length,t.length)}static compareSegments(e,t){const n=Wr.isNumericId(e),a=Wr.isNumericId(t);return n&&!a?-1:!n&&a?1:n&&a?Wr.extractNumericId(e).compare(Wr.extractNumericId(t)):Dy(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ks.fromString(e.substring(4,e.length-2))}}class Le extends Wr{construct(e,t,n){return new Le(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Z(H.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(a=>a.length>0))}return new Le(t)}static emptyPath(){return new Le([])}}const ON=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pt extends Wr{construct(e,t,n){return new pt(e,t,n)}static isValidIdentifier(e){return ON.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===U0}static keyField(){return new pt([U0])}static fromServerFormat(e){const t=[];let n="",a=0;const l=()=>{if(n.length===0)throw new Z(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let c=!1;for(;a<e.length;){const f=e[a];if(f==="\\"){if(a+1===e.length)throw new Z(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new Z(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=m,a+=2}else f==="`"?(c=!c,a++):f!=="."||c?(n+=f,a++):(l(),a++)}if(l(),c)throw new Z(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pt(t)}static emptyPath(){return new pt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.path=e}static fromPath(e){return new oe(Le.fromString(e))}static fromName(e){return new oe(Le.fromString(e).popFirst(5))}static empty(){return new oe(Le.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Le.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Le.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new oe(new Le(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_(i,e,t){if(!t)throw new Z(H.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function mI(i,e,t,n){if(e===!0&&n===!0)throw new Z(H.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function F0(i){if(!oe.isDocumentKey(i))throw new Z(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function j0(i){if(oe.isDocumentKey(i))throw new Z(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function pI(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function gm(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":me(12329,{type:typeof i})}function He(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Z(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=gm(i);throw new Z(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function gI(i,e){if(e<=0)throw new Z(H.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(i,e){const t={typeString:i};return e&&(t.value=e),t}function Ah(i,e){if(!pI(i))throw new Z(H.INVALID_ARGUMENT,"JSON must be an object");let t;for(const n in e)if(e[n]){const a=e[n].typeString,l="value"in e[n]?{value:e[n].value}:void 0;if(!(n in i)){t=`JSON missing required field: '${n}'`;break}const c=i[n];if(a&&typeof c!==a){t=`JSON field '${n}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${n}' field to equal '${l.value}'`;break}}if(t)throw new Z(H.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0=-62135596800,B0=1e6;let Et=class ja{static now(){return ja.fromMillis(Date.now())}static fromDate(e){return ja.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*B0);return new ja(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Z(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Z(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<z0)throw new Z(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Z(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/B0}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ja._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ah(e,ja._jsonSchema))return new ja(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-z0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Et._jsonSchemaVersion="firestore/timestamp/1.0",Et._jsonSchema={type:zt("string",Et._jsonSchemaVersion),seconds:zt("number"),nanoseconds:zt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{static fromTimestamp(e){return new ve(e)}static min(){return new ve(new Et(0,0))}static max(){return new ve(new Et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vl=-1;class Hf{constructor(e,t,n,a){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=a}}function Py(i){return i.fields.find(e=>e.kind===2)}function za(i){return i.fields.filter(e=>e.kind!==2)}Hf.UNKNOWN_ID=-1;class xf{constructor(e,t){this.fieldPath=e,this.kind=t}}class rh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new rh(0,er.min())}}function yI(i,e){const t=i.toTimestamp().seconds,n=i.toTimestamp().nanoseconds+1,a=ve.fromTimestamp(n===1e9?new Et(t+1,0):new Et(t,n));return new er(a,oe.empty(),e)}function _I(i){return new er(i.readTime,i.key,Vl)}class er{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new er(ve.min(),oe.empty(),Vl)}static max(){return new er(ve.max(),oe.empty(),Vl)}}function C_(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=oe.comparator(i.documentKey,e.documentKey),t!==0?t:Ce(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class EI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $s(i){if(i.code!==H.FAILED_PRECONDITION||i.message!==vI)throw i;te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new F((n,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(n,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(n,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof F?t:F.resolve(t)}catch(t){return F.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):F.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):F.reject(t)}static resolve(e){return new F((t,n)=>{t(e)})}static reject(e){return new F((t,n)=>{n(e)})}static waitFor(e){return new F((t,n)=>{let a=0,l=0,c=!1;e.forEach(f=>{++a,f.next(()=>{++l,c&&l===a&&t()},m=>n(m))}),c=!0,l===a&&t()})}static or(e){let t=F.resolve(!1);for(const n of e)t=t.next(a=>a?F.resolve(a):n());return t}static forEach(e,t){const n=[];return e.forEach((a,l)=>{n.push(t.call(this,a,l))}),this.waitFor(n)}static mapArray(e,t){return new F((n,a)=>{const l=e.length,c=new Array(l);let f=0;for(let m=0;m<l;m++){const g=m;t(e[g]).next(_=>{c[g]=_,++f,f===l&&n(c)},_=>a(_))}})}static doWhile(e,t){return new F((n,a)=>{const l=()=>{e()===!0?t().next(()=>{l()},a):n()};l()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $n="SimpleDb";class ym{static open(e,t,n,a){try{return new ym(t,e.transaction(a,n))}catch(l){throw new jc(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new mn,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new jc(e,t.error)):this.S.resolve()},this.transaction.onerror=n=>{const a=N_(n.target.error);this.S.reject(new jc(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(te($n,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new LN(t)}}class ri{static delete(e){return te($n,"Removing database:",e),qa(y_().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!eh())return!1;if(ri.F())return!0;const e=Tt(),t=ri.M(e),n=0<t&&t<10,a=TI(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||l)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,t,n){this.name=e,this.version=t,this.N=n,this.B=null,ri.M(Tt())===12.2&&Pt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(te($n,"Opening database:",this.name),this.db=await new Promise((t,n)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const c=l.target.result;t(c)},a.onblocked=()=>{n(new jc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const c=l.target.error;c.name==="VersionError"?n(new Z(H.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?n(new Z(H.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):n(new jc(e,c))},a.onupgradeneeded=l=>{te($n,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;this.N.k(c,a.transaction,l.oldVersion,this.version).next(()=>{te($n,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,a){const l=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const f=ym.open(this.db,e,l?"readonly":"readwrite",n),m=a(f).next(g=>(f.C(),g)).catch(g=>(f.abort(g),F.reject(g))).toPromise();return m.catch(()=>{}),await f.D,m}catch(f){const m=f,g=m.name!=="FirebaseError"&&c<3;if(te($n,"Transaction failed with error:",m.message,"Retrying:",g),this.close(),!g)return Promise.reject(m)}}}close(){this.db&&this.db.close(),this.db=void 0}}function TI(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class MN{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return qa(this.U.delete())}}class jc extends Z{constructor(e,t){super(H.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Xs(i){return i.name==="IndexedDbTransactionError"}class LN{constructor(e){this.store=e}put(e,t){let n;return t!==void 0?(te($n,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(te($n,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),qa(n)}add(e){return te($n,"ADD",this.store.name,e,e),qa(this.store.add(e))}get(e){return qa(this.store.get(e)).next(t=>(t===void 0&&(t=null),te($n,"GET",this.store.name,e,t),t))}delete(e){return te($n,"DELETE",this.store.name,e),qa(this.store.delete(e))}count(){return te($n,"COUNT",this.store.name),qa(this.store.count())}J(e,t){const n=this.options(e,t),a=n.index?this.store.index(n.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(n.range);return new F((c,f)=>{l.onerror=m=>{f(m.target.error)},l.onsuccess=m=>{c(m.target.result)}})}{const l=this.cursor(n),c=[];return this.H(l,(f,m)=>{c.push(m)}).next(()=>c)}}Y(e,t){const n=this.store.getAll(e,t===null?void 0:t);return new F((a,l)=>{n.onerror=c=>{l(c.target.error)},n.onsuccess=c=>{a(c.target.result)}})}Z(e,t){te($n,"DELETE ALL",this.store.name);const n=this.options(e,t);n.X=!1;const a=this.cursor(n);return this.H(a,(l,c,f)=>f.delete())}ee(e,t){let n;t?n=e:(n={},t=e);const a=this.cursor(n);return this.H(a,t)}te(e){const t=this.cursor({});return new F((n,a)=>{t.onerror=l=>{const c=N_(l.target.error);a(c)},t.onsuccess=l=>{const c=l.target.result;c?e(c.primaryKey,c.value).next(f=>{f?c.continue():n()}):n()}})}H(e,t){const n=[];return new F((a,l)=>{e.onerror=c=>{l(c.target.error)},e.onsuccess=c=>{const f=c.target.result;if(!f)return void a();const m=new MN(f),g=t(f.primaryKey,f.value,m);if(g instanceof F){const _=g.catch(T=>(m.done(),F.reject(T)));n.push(_)}m.isDone?a():m.G===null?f.continue():f.continue(m.G)}}).next(()=>F.waitFor(n))}options(e,t){let n;return e!==void 0&&(typeof e=="string"?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function qa(i){return new F((e,t)=>{i.onsuccess=n=>{const a=n.target.result;e(a)},i.onerror=n=>{const a=N_(n.target.error);t(a)}})}let q0=!1;function N_(i){const e=ri.M(Tt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const n=new Z("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return q0||(q0=!0,setTimeout(()=>{throw n},0)),n}}return i}const zc="IndexBackfiller";class UN{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){te(zc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const t=await this.ne.ie();te(zc,`Documents written: ${t}`)}catch(t){Xs(t)?te(zc,"Ignoring IndexedDB error during index backfill: ",t):await $s(t)}await this.re(6e4)})}}class FN{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.se(t,e))}se(e,t){const n=new Set;let a=t,l=!0;return F.doWhile(()=>l===!0&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(c!==null&&!n.has(c))return te(zc,`Processing collection: ${c}`),this.oe(e,c,a).next(f=>{a-=f,n.add(c)});l=!1})).next(()=>t-a)}oe(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,n).next(l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this._e(a,l)).next(f=>(te(zc,`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>c.size)}))}_e(e,t){let n=e;return t.changes.forEach((a,l)=>{const c=_I(l);C_(c,n)>0&&(n=c)}),new er(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>t.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Un.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs=-1;function Ih(i){return i==null}function ih(i){return i===0&&1/i==-1/0}function wI(i){return typeof i=="number"&&Number.isInteger(i)&&!ih(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kf="";function wn(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=G0(e)),e=jN(i.get(t),e);return G0(e)}function jN(i,e){let t=e;const n=i.length;for(let a=0;a<n;a++){const l=i.charAt(a);switch(l){case"\0":t+="";break;case Kf:t+="";break;default:t+=l}}return t}function G0(i){return i+Kf+""}function ei(i){const e=i.length;if(_e(e>=2,64408,{path:i}),e===2)return _e(i.charAt(0)===Kf&&i.charAt(1)==="",56145,{path:i}),Le.emptyPath();const t=e-2,n=[];let a="";for(let l=0;l<e;){const c=i.indexOf(Kf,l);switch((c<0||c>t)&&me(50515,{path:i}),i.charAt(c+1)){case"":const f=i.substring(l,c);let m;a.length===0?m=f:(a+=f,m=a,a=""),n.push(m);break;case"":a+=i.substring(l,c),a+="\0";break;case"":a+=i.substring(l,c+1);break;default:me(61167,{path:i})}l=c+2}return new Le(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ba="remoteDocuments",Sh="owner",dl="owner",sh="mutationQueues",zN="userId",Sr="mutations",H0="batchId",Wa="userMutationsIndex",K0=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cf(i,e){return[i,wn(e)]}function bI(i,e,t){return[i,wn(e),t]}const BN={},Ol="documentMutations",Qf="remoteDocumentsV14",qN=["prefixPath","collectionGroup","readTime","documentId"],Nf="documentKeyIndex",GN=["prefixPath","collectionGroup","documentId"],AI="collectionGroupIndex",HN=["collectionGroup","readTime","prefixPath","documentId"],ah="remoteDocumentGlobal",ky="remoteDocumentGlobalKey",Ml="targets",II="queryTargetsIndex",KN=["canonicalId","targetId"],Ll="targetDocuments",QN=["targetId","path"],D_="documentTargetsIndex",WN=["path","targetId"],Wf="targetGlobalKey",Ja="targetGlobal",oh="collectionParents",YN=["collectionId","parent"],Ul="clientMetadata",$N="clientId",_m="bundles",XN="bundleId",vm="namedQueries",JN="name",P_="indexConfiguration",ZN="indexId",Vy="collectionGroupIndex",eD="collectionGroup",Bc="indexState",tD=["indexId","uid"],SI="sequenceNumberIndex",nD=["uid","sequenceNumber"],qc="indexEntries",rD=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],RI="documentKeyIndex",iD=["indexId","uid","orderedDocumentKey"],Em="documentOverlays",sD=["userId","collectionPath","documentId"],Oy="collectionPathOverlayIndex",aD=["userId","collectionPath","largestBatchId"],xI="collectionGroupOverlayIndex",oD=["userId","collectionGroup","largestBatchId"],k_="globals",lD="name",CI=[sh,Sr,Ol,Ba,Ml,Sh,Ja,Ll,Ul,ah,oh,_m,vm],uD=[...CI,Em],NI=[sh,Sr,Ol,Qf,Ml,Sh,Ja,Ll,Ul,ah,oh,_m,vm,Em],DI=NI,V_=[...DI,P_,Bc,qc],cD=V_,PI=[...V_,k_],hD=PI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My extends EI{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function $t(i,e){const t=he(i);return ri.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Js(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function kI(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e,t){this.comparator=e,this.root=t||dn.EMPTY}insert(e,t){return new lt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,dn.BLACK,null,null))}remove(e){return new lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return t+n.left.size;a<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vf(this.root,e,this.comparator,!1)}getReverseIterator(){return new vf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vf(this.root,e,this.comparator,!0)}}class vf{constructor(e,t,n,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?n(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dn{constructor(e,t,n,a,l){this.key=e,this.value=t,this.color=n??dn.RED,this.left=a??dn.EMPTY,this.right=l??dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,a,l){return new dn(e??this.key,t??this.value,n??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let a=this;const l=n(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,n),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return dn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return dn.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw me(27949);return e+(this.isRed()?0:1)}}dn.EMPTY=null,dn.RED=!0,dn.BLACK=!1;dn.EMPTY=new class{constructor(){this.size=0}get key(){throw me(57766)}get value(){throw me(16141)}get color(){throw me(16727)}get left(){throw me(29726)}get right(){throw me(36894)}copy(e,t,n,a,l){return this}insert(e,t,n){return new dn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e){this.comparator=e,this.data=new lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new W0(this.data.getIterator())}getIteratorFrom(e){return new W0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(n=>{t=t.add(n)}),t}isEqual(e){if(!(e instanceof Ze)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=n.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ze(this.comparator);return t.data=e,t}}class W0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function fl(i){return i.hasNext()?i.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.fields=e,e.sort(pt.comparator)}static empty(){return new Fn([])}unionWith(e){let t=new Ze(pt.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Fn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return kl(this.fields,e.fields,(t,n)=>t.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dD(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new VI("Invalid base64 string: "+l):l}}(e);return new St(t)}static fromUint8Array(e){const t=function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l}(e);return new St(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const n=new Uint8Array(t.length);for(let a=0;a<t.length;a++)n[a]=t.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}St.EMPTY_BYTE_STRING=new St("");const fD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ji(i){if(_e(!!i,39018),typeof i=="string"){let e=0;const t=fD.exec(i);if(_e(!!t,46558,{timestamp:i}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const n=new Date(i);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:ft(i.seconds),nanos:ft(i.nanos)}}function ft(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function zi(i){return typeof i=="string"?St.fromBase64String(i):St.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI="server_timestamp",MI="__type__",LI="__previous_value__",UI="__local_write_time__";function Tm(i){var t,n;return((n=(((t=i==null?void 0:i.mapValue)==null?void 0:t.fields)||{})[MI])==null?void 0:n.stringValue)===OI}function wm(i){const e=i.mapValue.fields[LI];return Tm(e)?wm(e):e}function lh(i){const e=ji(i.mapValue.fields[UI].timestampValue);return new Et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e,t,n,a,l,c,f,m,g,_){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=_}}const Ly="(default)";class Bs{constructor(e,t){this.projectId=e,this.database=t||Ly}static empty(){return new Bs("","")}get isDefaultDatabase(){return this.database===Ly}isEqual(e){return e instanceof Bs&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_="__type__",FI="__max__",Cs={mapValue:{fields:{__type__:{stringValue:FI}}}},M_="__vector__",Fl="value",Df={nullValue:"NULL_VALUE"};function qs(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Tm(i)?4:jI(i)?9007199254740991:bm(i)?10:11:me(28295,{value:i})}function li(i,e){if(i===e)return!0;const t=qs(i);if(t!==qs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return lh(i).isEqual(lh(e));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=ji(a.timestampValue),f=ji(l.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(a,l){return zi(a.bytesValue).isEqual(zi(l.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(a,l){return ft(a.geoPointValue.latitude)===ft(l.geoPointValue.latitude)&&ft(a.geoPointValue.longitude)===ft(l.geoPointValue.longitude)}(i,e);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return ft(a.integerValue)===ft(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=ft(a.doubleValue),f=ft(l.doubleValue);return c===f?ih(c)===ih(f):isNaN(c)&&isNaN(f)}return!1}(i,e);case 9:return kl(i.arrayValue.values||[],e.arrayValue.values||[],li);case 10:case 11:return function(a,l){const c=a.mapValue.fields||{},f=l.mapValue.fields||{};if(Q0(c)!==Q0(f))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(f[m]===void 0||!li(c[m],f[m])))return!1;return!0}(i,e);default:return me(52216,{left:i})}}function uh(i,e){return(i.values||[]).find(t=>li(t,e))!==void 0}function Gs(i,e){if(i===e)return 0;const t=qs(i),n=qs(e);if(t!==n)return Ce(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ce(i.booleanValue,e.booleanValue);case 2:return function(l,c){const f=ft(l.integerValue||l.doubleValue),m=ft(c.integerValue||c.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1}(i,e);case 3:return Y0(i.timestampValue,e.timestampValue);case 4:return Y0(lh(i),lh(e));case 5:return Dy(i.stringValue,e.stringValue);case 6:return function(l,c){const f=zi(l),m=zi(c);return f.compareTo(m)}(i.bytesValue,e.bytesValue);case 7:return function(l,c){const f=l.split("/"),m=c.split("/");for(let g=0;g<f.length&&g<m.length;g++){const _=Ce(f[g],m[g]);if(_!==0)return _}return Ce(f.length,m.length)}(i.referenceValue,e.referenceValue);case 8:return function(l,c){const f=Ce(ft(l.latitude),ft(c.latitude));return f!==0?f:Ce(ft(l.longitude),ft(c.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return $0(i.arrayValue,e.arrayValue);case 10:return function(l,c){var A,k,K,G;const f=l.fields||{},m=c.fields||{},g=(A=f[Fl])==null?void 0:A.arrayValue,_=(k=m[Fl])==null?void 0:k.arrayValue,T=Ce(((K=g==null?void 0:g.values)==null?void 0:K.length)||0,((G=_==null?void 0:_.values)==null?void 0:G.length)||0);return T!==0?T:$0(g,_)}(i.mapValue,e.mapValue);case 11:return function(l,c){if(l===Cs.mapValue&&c===Cs.mapValue)return 0;if(l===Cs.mapValue)return 1;if(c===Cs.mapValue)return-1;const f=l.fields||{},m=Object.keys(f),g=c.fields||{},_=Object.keys(g);m.sort(),_.sort();for(let T=0;T<m.length&&T<_.length;++T){const A=Dy(m[T],_[T]);if(A!==0)return A;const k=Gs(f[m[T]],g[_[T]]);if(k!==0)return k}return Ce(m.length,_.length)}(i.mapValue,e.mapValue);default:throw me(23264,{he:t})}}function Y0(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Ce(i,e);const t=ji(i),n=ji(e),a=Ce(t.seconds,n.seconds);return a!==0?a:Ce(t.nanos,n.nanos)}function $0(i,e){const t=i.values||[],n=e.values||[];for(let a=0;a<t.length&&a<n.length;++a){const l=Gs(t[a],n[a]);if(l)return l}return Ce(t.length,n.length)}function jl(i){return Uy(i)}function Uy(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(t){const n=ji(t);return`time(${n.seconds},${n.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(t){return zi(t).toBase64()}(i.bytesValue):"referenceValue"in i?function(t){return oe.fromName(t).toString()}(i.referenceValue):"geoPointValue"in i?function(t){return`geo(${t.latitude},${t.longitude})`}(i.geoPointValue):"arrayValue"in i?function(t){let n="[",a=!0;for(const l of t.values||[])a?a=!1:n+=",",n+=Uy(l);return n+"]"}(i.arrayValue):"mapValue"in i?function(t){const n=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of n)l?l=!1:a+=",",a+=`${c}:${Uy(t.fields[c])}`;return a+"}"}(i.mapValue):me(61005,{value:i})}function Pf(i){switch(qs(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=wm(i);return e?16+Pf(e):16;case 5:return 2*i.stringValue.length;case 6:return zi(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((a,l)=>a+Pf(l),0)}(i.arrayValue);case 10:case 11:return function(n){let a=0;return Js(n.fields,(l,c)=>{a+=l.length+Pf(c)}),a}(i.mapValue);default:throw me(13486,{value:i})}}function to(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Fy(i){return!!i&&"integerValue"in i}function ch(i){return!!i&&"arrayValue"in i}function X0(i){return!!i&&"nullValue"in i}function J0(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function kf(i){return!!i&&"mapValue"in i}function bm(i){var t,n;return((n=(((t=i==null?void 0:i.mapValue)==null?void 0:t.fields)||{})[O_])==null?void 0:n.stringValue)===M_}function Gc(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return Js(i.mapValue.fields,(t,n)=>e.mapValue.fields[t]=Gc(n)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Gc(i.arrayValue.values[t]);return e}return{...i}}function jI(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===FI}const zI={mapValue:{fields:{[O_]:{stringValue:M_},[Fl]:{arrayValue:{}}}}};function pD(i){return"nullValue"in i?Df:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?to(Bs.empty(),oe.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?bm(i)?zI:{mapValue:{}}:me(35942,{value:i})}function gD(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?to(Bs.empty(),oe.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?zI:"mapValue"in i?bm(i)?{mapValue:{}}:Cs:me(61959,{value:i})}function Z0(i,e){const t=Gs(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function eb(i,e){const t=Gs(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.value=e}static empty(){return new fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!kf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gc(t)}setAll(e){let t=pt.emptyPath(),n={},a=[];e.forEach((c,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,n,a),n={},a=[],t=f.popLast()}c?n[f.lastSegment()]=Gc(c):a.push(f.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,n,a)}delete(e){const t=this.field(e.popLast());kf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return li(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let a=t.mapValue.fields[e.get(n)];kf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,n){Js(t,(a,l)=>e[a]=l);for(const a of n)delete e[a]}clone(){return new fn(Gc(this.value))}}function BI(i){const e=[];return Js(i.fields,(t,n)=>{const a=new pt([t]);if(kf(n)){const l=BI(n.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)}),new Fn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,t,n,a,l,c,f){this.key=e,this.documentType=t,this.version=n,this.readTime=a,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(e){return new ut(e,0,ve.min(),ve.min(),ve.min(),fn.empty(),0)}static newFoundDocument(e,t,n,a){return new ut(e,1,t,ve.min(),n,a,0)}static newNoDocument(e,t){return new ut(e,2,t,ve.min(),ve.min(),fn.empty(),0)}static newUnknownDocument(e,t){return new ut(e,3,t,ve.min(),ve.min(),fn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,t){this.position=e,this.inclusive=t}}function tb(i,e,t){let n=0;for(let a=0;a<i.position.length;a++){const l=e[a],c=i.position[a];if(l.field.isKeyField()?n=oe.comparator(oe.fromName(c.referenceValue),t.key):n=Gs(c,t.data.field(l.field)),l.dir==="desc"&&(n*=-1),n!==0)break}return n}function nb(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!li(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,t="asc"){this.field=e,this.dir=t}}function yD(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{}class Ue extends qI{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new _D(e,t,n):t==="array-contains"?new TD(e,n):t==="in"?new YI(e,n):t==="not-in"?new wD(e,n):t==="array-contains-any"?new bD(e,n):new Ue(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new vD(e,n):new ED(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Gs(t,this.value)):t!==null&&qs(this.value)===qs(t)&&this.matchesComparison(Gs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Je extends qI{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Je(e,t)}matches(e){return zl(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function zl(i){return i.op==="and"}function jy(i){return i.op==="or"}function L_(i){return GI(i)&&zl(i)}function GI(i){for(const e of i.filters)if(e instanceof Je)return!1;return!0}function zy(i){if(i instanceof Ue)return i.field.canonicalString()+i.op.toString()+jl(i.value);if(L_(i))return i.filters.map(e=>zy(e)).join(",");{const e=i.filters.map(t=>zy(t)).join(",");return`${i.op}(${e})`}}function HI(i,e){return i instanceof Ue?function(n,a){return a instanceof Ue&&n.op===a.op&&n.field.isEqual(a.field)&&li(n.value,a.value)}(i,e):i instanceof Je?function(n,a){return a instanceof Je&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce((l,c,f)=>l&&HI(c,a.filters[f]),!0):!1}(i,e):void me(19439)}function KI(i,e){const t=i.filters.concat(e);return Je.create(t,i.op)}function QI(i){return i instanceof Ue?function(t){return`${t.field.canonicalString()} ${t.op} ${jl(t.value)}`}(i):i instanceof Je?function(t){return t.op.toString()+" {"+t.getFilters().map(QI).join(" ,")+"}"}(i):"Filter"}class _D extends Ue{constructor(e,t,n){super(e,t,n),this.key=oe.fromName(n.referenceValue)}matches(e){const t=oe.comparator(e.key,this.key);return this.matchesComparison(t)}}class vD extends Ue{constructor(e,t){super(e,"in",t),this.keys=WI("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ED extends Ue{constructor(e,t){super(e,"not-in",t),this.keys=WI("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function WI(i,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map(n=>oe.fromName(n.referenceValue))}class TD extends Ue{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ch(t)&&uh(t.arrayValue,this.value)}}class YI extends Ue{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&uh(this.value.arrayValue,t)}}class wD extends Ue{constructor(e,t){super(e,"not-in",t)}matches(e){if(uh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!uh(this.value.arrayValue,t)}}class bD extends Ue{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ch(t)||!t.arrayValue.values)&&t.arrayValue.values.some(n=>uh(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e,t=null,n=[],a=[],l=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=a,this.limit=l,this.startAt=c,this.endAt=f,this.Te=null}}function By(i,e=null,t=[],n=[],a=null,l=null,c=null){return new AD(i,e,t,n,a,l,c)}function no(i){const e=he(i);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(n=>zy(n)).join(","),t+="|ob:",t+=e.orderBy.map(n=>function(l){return l.field.canonicalString()+l.dir}(n)).join(","),Ih(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(n=>jl(n)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(n=>jl(n)).join(",")),e.Te=t}return e.Te}function Rh(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!yD(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!HI(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!nb(i.startAt,e.startAt)&&nb(i.endAt,e.endAt)}function Yf(i){return oe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function $f(i,e){return i.filters.filter(t=>t instanceof Ue&&t.field.isEqual(e))}function rb(i,e,t){let n=Df,a=!0;for(const l of $f(i,e)){let c=Df,f=!0;switch(l.op){case"<":case"<=":c=pD(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,f=!1;break;case"!=":case"not-in":c=Df}Z0({value:n,inclusive:a},{value:c,inclusive:f})<0&&(n=c,a=f)}if(t!==null){for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const c=t.position[l];Z0({value:n,inclusive:a},{value:c,inclusive:t.inclusive})<0&&(n=c,a=t.inclusive);break}}return{value:n,inclusive:a}}function ib(i,e,t){let n=Cs,a=!0;for(const l of $f(i,e)){let c=Cs,f=!0;switch(l.op){case">=":case">":c=gD(l.value),f=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,f=!1;break;case"!=":case"not-in":c=Cs}eb({value:n,inclusive:a},{value:c,inclusive:f})>0&&(n=c,a=f)}if(t!==null){for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const c=t.position[l];eb({value:n,inclusive:a},{value:c,inclusive:t.inclusive})>0&&(n=c,a=t.inclusive);break}}return{value:n,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e,t=null,n=[],a=[],l=null,c="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=a,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function $I(i,e,t,n,a,l,c,f){return new qi(i,e,t,n,a,l,c,f)}function ru(i){return new qi(i)}function sb(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function U_(i){return i.collectionGroup!==null}function Il(i){const e=he(i);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new Ze(pt.comparator);return c.filters.forEach(m=>{m.getFlattenedFilters().forEach(g=>{g.isInequality()&&(f=f.add(g.field))})}),f})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new hh(l,n))}),t.has(pt.keyField().canonicalString())||e.Ie.push(new hh(pt.keyField(),n))}return e.Ie}function Dn(i){const e=he(i);return e.Ee||(e.Ee=ID(e,Il(i))),e.Ee}function ID(i,e){if(i.limitType==="F")return By(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new hh(a.field,l)});const t=i.endAt?new Hs(i.endAt.position,i.endAt.inclusive):null,n=i.startAt?new Hs(i.startAt.position,i.startAt.inclusive):null;return By(i.path,i.collectionGroup,e,i.filters,i.limit,t,n)}}function qy(i,e){const t=i.filters.concat([e]);return new qi(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function Xf(i,e,t){return new qi(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function xh(i,e){return Rh(Dn(i),Dn(e))&&i.limitType===e.limitType}function XI(i){return`${no(Dn(i))}|lt:${i.limitType}`}function El(i){return`Query(target=${function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map(a=>QI(a)).join(", ")}]`),Ih(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(a=>jl(a)).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(a=>jl(a)).join(",")),`Target(${n})`}(Dn(i))}; limitType=${i.limitType})`}function Ch(i,e){return e.isFoundDocument()&&function(n,a){const l=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(l):oe.isDocumentKey(n.path)?n.path.isEqual(l):n.path.isImmediateParentOf(l)}(i,e)&&function(n,a){for(const l of Il(n))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(i,e)&&function(n,a){for(const l of n.filters)if(!l.matches(a))return!1;return!0}(i,e)&&function(n,a){return!(n.startAt&&!function(c,f,m){const g=tb(c,f,m);return c.inclusive?g<=0:g<0}(n.startAt,Il(n),a)||n.endAt&&!function(c,f,m){const g=tb(c,f,m);return c.inclusive?g>=0:g>0}(n.endAt,Il(n),a))}(i,e)}function JI(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function ZI(i){return(e,t)=>{let n=!1;for(const a of Il(i)){const l=SD(a,e,t);if(l!==0)return l;n=n||a.field.isKeyField()}return 0}}function SD(i,e,t){const n=i.field.isKeyField()?oe.comparator(e.key,t.key):function(l,c,f){const m=c.data.field(l),g=f.data.field(l);return m!==null&&g!==null?Gs(m,g):me(42886)}(i.field,e,t);switch(i.dir){case"asc":return n;case"desc":return-1*n;default:return me(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[a,l]of n)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],e))return n.length===1?delete this.inner[t]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Js(this.inner,(t,n)=>{for(const[a,l]of n)e(a,l)})}isEmpty(){return kI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD=new lt(oe.comparator);function jn(){return RD}const eS=new lt(oe.comparator);function Vc(...i){let e=eS;for(const t of i)e=e.insert(t.key,t);return e}function tS(i){let e=eS;return i.forEach((t,n)=>e=e.insert(t,n.overlayedDocument)),e}function ti(){return Hc()}function nS(){return Hc()}function Hc(){return new Gi(i=>i.toString(),(i,e)=>i.isEqual(e))}const xD=new lt(oe.comparator),CD=new Ze(oe.comparator);function Ne(...i){let e=CD;for(const t of i)e=e.add(t);return e}const ND=new Ze(Ce);function F_(){return ND}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ih(e)?"-0":e}}function rS(i){return{integerValue:""+i}}function iS(i,e){return wI(e)?rS(e):j_(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(){this._=void 0}}function DD(i,e,t){return i instanceof Bl?function(a,l){const c={fields:{[MI]:{stringValue:OI},[UI]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Tm(l)&&(l=wm(l)),l&&(c.fields[LI]=l),{mapValue:c}}(t,e):i instanceof ro?aS(i,e):i instanceof io?oS(i,e):function(a,l){const c=sS(a,l),f=ab(c)+ab(a.Ae);return Fy(c)&&Fy(a.Ae)?rS(f):j_(a.serializer,f)}(i,e)}function PD(i,e,t){return i instanceof ro?aS(i,e):i instanceof io?oS(i,e):t}function sS(i,e){return i instanceof ql?function(n){return Fy(n)||function(l){return!!l&&"doubleValue"in l}(n)}(e)?e:{integerValue:0}:null}class Bl extends Am{}class ro extends Am{constructor(e){super(),this.elements=e}}function aS(i,e){const t=lS(e);for(const n of i.elements)t.some(a=>li(a,n))||t.push(n);return{arrayValue:{values:t}}}class io extends Am{constructor(e){super(),this.elements=e}}function oS(i,e){let t=lS(e);for(const n of i.elements)t=t.filter(a=>!li(a,n));return{arrayValue:{values:t}}}class ql extends Am{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function ab(i){return ft(i.integerValue||i.doubleValue)}function lS(i){return ch(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e,t){this.field=e,this.transform=t}}function kD(i,e){return i.field.isEqual(e.field)&&function(n,a){return n instanceof ro&&a instanceof ro||n instanceof io&&a instanceof io?kl(n.elements,a.elements,li):n instanceof ql&&a instanceof ql?li(n.Ae,a.Ae):n instanceof Bl&&a instanceof Bl}(i.transform,e.transform)}class VD{constructor(e,t){this.version=e,this.transformResults=t}}class gt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new gt}static exists(e){return new gt(void 0,e)}static updateTime(e){return new gt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vf(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Im{}function uS(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new su(i.key,gt.none()):new iu(i.key,i.data,gt.none());{const t=i.data,n=fn.empty();let a=new Ze(pt.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?n.delete(l):n.set(l,c),a=a.add(l)}return new Hi(i.key,n,new Fn(a.toArray()),gt.none())}}function OD(i,e,t){i instanceof iu?function(a,l,c){const f=a.value.clone(),m=lb(a.fieldTransforms,l,c.transformResults);f.setAll(m),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()}(i,e,t):i instanceof Hi?function(a,l,c){if(!Vf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const f=lb(a.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(cS(a)),m.setAll(f),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()}(i,e,t):function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function Kc(i,e,t,n){return i instanceof iu?function(l,c,f,m){if(!Vf(l.precondition,c))return f;const g=l.value.clone(),_=ub(l.fieldTransforms,m,c);return g.setAll(_),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null}(i,e,t,n):i instanceof Hi?function(l,c,f,m){if(!Vf(l.precondition,c))return f;const g=ub(l.fieldTransforms,m,c),_=c.data;return _.setAll(cS(l)),_.setAll(g),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(T=>T.field))}(i,e,t,n):function(l,c,f){return Vf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f}(i,e,t)}function MD(i,e){let t=null;for(const n of i.fieldTransforms){const a=e.data.field(n.field),l=sS(n.transform,a||null);l!=null&&(t===null&&(t=fn.empty()),t.set(n.field,l))}return t||null}function ob(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&kl(n,a,(l,c)=>kD(l,c))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class iu extends Im{constructor(e,t,n,a=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Hi extends Im{constructor(e,t,n,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function cS(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const n=i.data.field(t);e.set(t,n)}}),e}function lb(i,e,t){const n=new Map;_e(i.length===t.length,32656,{Re:t.length,Ve:i.length});for(let a=0;a<t.length;a++){const l=i[a],c=l.transform,f=e.data.field(l.field);n.set(l.field,PD(c,f,t[a]))}return n}function ub(i,e,t){const n=new Map;for(const a of i){const l=a.transform,c=t.data.field(a.field);n.set(a.field,DD(l,c,e))}return n}class su extends Im{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class z_ extends Im{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e,t,n,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&OD(l,e,n[a])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Kc(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Kc(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=nS();return this.mutations.forEach(a=>{const l=e.get(a.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=t.has(a.key)?null:f;const m=uS(c,f);m!==null&&n.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(ve.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ne())}isEqual(e){return this.batchId===e.batchId&&kl(this.mutations,e.mutations,(t,n)=>ob(t,n))&&kl(this.baseMutations,e.baseMutations,(t,n)=>ob(t,n))}}class q_{constructor(e,t,n,a){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=a}static from(e,t,n){_e(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let a=function(){return xD}();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,n[c].version);return new q_(e,t,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft,Be;function hS(i){switch(i){case H.OK:return me(64938);case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0;default:return me(15467,{code:i})}}function dS(i){if(i===void 0)return Pt("GRPC error has no .code"),H.UNKNOWN;switch(i){case Ft.OK:return H.OK;case Ft.CANCELLED:return H.CANCELLED;case Ft.UNKNOWN:return H.UNKNOWN;case Ft.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case Ft.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case Ft.INTERNAL:return H.INTERNAL;case Ft.UNAVAILABLE:return H.UNAVAILABLE;case Ft.UNAUTHENTICATED:return H.UNAUTHENTICATED;case Ft.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case Ft.NOT_FOUND:return H.NOT_FOUND;case Ft.ALREADY_EXISTS:return H.ALREADY_EXISTS;case Ft.PERMISSION_DENIED:return H.PERMISSION_DENIED;case Ft.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case Ft.ABORTED:return H.ABORTED;case Ft.OUT_OF_RANGE:return H.OUT_OF_RANGE;case Ft.UNIMPLEMENTED:return H.UNIMPLEMENTED;case Ft.DATA_LOSS:return H.DATA_LOSS;default:return me(39323,{code:i})}}(Be=Ft||(Ft={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fS(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD=new ks([4294967295,4294967295],0);function cb(i){const e=fS().encode(i),t=new sI;return t.update(e),new Uint8Array(t.digest())}function hb(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ks([t,n],0),new ks([a,l],0)]}class H_{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Oc(`Invalid padding: ${t}`);if(n<0)throw new Oc(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Oc(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new Oc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ks.fromNumber(this.ge)}ye(e,t,n){let a=e.add(t.multiply(ks.fromNumber(n)));return a.compare(UD)===1&&(a=new ks([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=cb(e),[n,a]=hb(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(n,a,l);if(!this.we(c))return!1}return!0}static create(e,t,n){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new H_(l,a,t);return n.forEach(f=>c.insert(f)),c}insert(e){if(this.ge===0)return;const t=cb(e),[n,a]=hb(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(n,a,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Oc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,t,n,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const a=new Map;return a.set(e,Ph.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Dh(ve.min(),a,new lt(Ce),jn(),Ne())}}class Ph{constructor(e,t,n,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Ph(n,t,Ne(),Ne(),Ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,t,n,a){this.be=e,this.removedTargetIds=t,this.key=n,this.De=a}}class mS{constructor(e,t){this.targetId=e,this.Ce=t}}class pS{constructor(e,t,n=St.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=a}}class db{constructor(){this.ve=0,this.Fe=fb(),this.Me=St.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ne(),t=Ne(),n=Ne();return this.Fe.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:n=n.add(a);break;default:me(38017,{changeType:l})}}),new Ph(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=fb()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,_e(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class FD{constructor(e){this.Ge=e,this.ze=new Map,this.je=jn(),this.Je=Ef(),this.He=Ef(),this.Ye=new lt(Ce)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:me(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((n,a)=>{this.rt(a)&&t(a)})}st(e){const t=e.targetId,n=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Yf(l))if(n===0){const c=new oe(l.path);this.et(t,c,ut.newNoDocument(c,ve.min()))}else _e(n===1,20013,{expectedCount:n});else{const c=this._t(t);if(c!==n){const f=this.ut(e),m=f?this.ct(f,e,c):1;if(m!==0){this.it(t);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:l=0}=t;let c,f;try{c=zi(n).toUint8Array()}catch(m){if(m instanceof VI)return oi("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new H_(c,a,l)}catch(m){return oi(m instanceof Oc?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.ge===0?null:f}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let a=0;return n.forEach(l=>{const c=this.Ge.ht(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),a++)}),a}Tt(e){const t=new Map;this.ze.forEach((l,c)=>{const f=this.ot(c);if(f){if(l.current&&Yf(f.target)){const m=new oe(f.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,ut.newNoDocument(m,e))}l.Be&&(t.set(c,l.ke()),l.qe())}});let n=Ne();this.He.forEach((l,c)=>{let f=!0;c.forEachWhile(m=>{const g=this.ot(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)}),f&&(n=n.add(l))}),this.je.forEach((l,c)=>c.setReadTime(e));const a=new Dh(e,t,this.Ye,this.je,n);return this.je=jn(),this.Je=Ef(),this.He=Ef(),this.Ye=new lt(Ce),a}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new db,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Ze(Ce),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Ze(Ce),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||te("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new db),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Ef(){return new lt(oe.comparator)}function fb(){return new lt(oe.comparator)}const jD={asc:"ASCENDING",desc:"DESCENDING"},zD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},BD={and:"AND",or:"OR"};class qD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Gy(i,e){return i.useProto3Json||Ih(e)?e:{value:e}}function Gl(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gS(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function GD(i,e){return Gl(i,e.toTimestamp())}function kt(i){return _e(!!i,49232),ve.fromTimestamp(function(t){const n=ji(t);return new Et(n.seconds,n.nanos)}(i))}function K_(i,e){return Hy(i,e).canonicalString()}function Hy(i,e){const t=function(a){return new Le(["projects",a.projectId,"databases",a.database])}(i).child("documents");return e===void 0?t:t.child(e)}function yS(i){const e=Le.fromString(i);return _e(RS(e),10190,{key:e.toString()}),e}function dh(i,e){return K_(i.databaseId,e.path)}function ii(i,e){const t=yS(e);if(t.get(1)!==i.databaseId.projectId)throw new Z(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new Z(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new oe(ES(t))}function _S(i,e){return K_(i.databaseId,e)}function vS(i){const e=yS(i);return e.length===4?Le.emptyPath():ES(e)}function Ky(i){return new Le(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function ES(i){return _e(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function mb(i,e,t){return{name:dh(i,e),fields:t.value.mapValue.fields}}function TS(i,e,t){const n=ii(i,e.name),a=kt(e.updateTime),l=e.createTime?kt(e.createTime):ve.min(),c=new fn({mapValue:{fields:e.fields}}),f=ut.newFoundDocument(n,a,l,c);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function HD(i,e){return"found"in e?function(n,a){_e(!!a.found,43571),a.found.name,a.found.updateTime;const l=ii(n,a.found.name),c=kt(a.found.updateTime),f=a.found.createTime?kt(a.found.createTime):ve.min(),m=new fn({mapValue:{fields:a.found.fields}});return ut.newFoundDocument(l,c,f,m)}(i,e):"missing"in e?function(n,a){_e(!!a.missing,3894),_e(!!a.readTime,22933);const l=ii(n,a.missing),c=kt(a.readTime);return ut.newNoDocument(l,c)}(i,e):me(7234,{result:e})}function KD(i,e){let t;if("targetChange"in e){e.targetChange;const n=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:me(39313,{state:g})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=function(g,_){return g.useProto3Json?(_e(_===void 0||typeof _=="string",58123),St.fromBase64String(_||"")):(_e(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),St.fromUint8Array(_||new Uint8Array))}(i,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&function(g){const _=g.code===void 0?H.UNKNOWN:dS(g.code);return new Z(_,g.message||"")}(c);t=new pS(n,a,l,f||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const a=ii(i,n.document.name),l=kt(n.document.updateTime),c=n.document.createTime?kt(n.document.createTime):ve.min(),f=new fn({mapValue:{fields:n.document.fields}}),m=ut.newFoundDocument(a,l,c,f),g=n.targetIds||[],_=n.removedTargetIds||[];t=new Of(g,_,m.key,m)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const a=ii(i,n.document),l=n.readTime?kt(n.readTime):ve.min(),c=ut.newNoDocument(a,l),f=n.removedTargetIds||[];t=new Of([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const a=ii(i,n.document),l=n.removedTargetIds||[];t=new Of([],l,a,null)}else{if(!("filter"in e))return me(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:a=0,unchangedNames:l}=n,c=new LD(a,l),f=n.targetId;t=new mS(f,c)}}return t}function fh(i,e){let t;if(e instanceof iu)t={update:mb(i,e.key,e.value)};else if(e instanceof su)t={delete:dh(i,e.key)};else if(e instanceof Hi)t={update:mb(i,e.key,e.data),updateMask:JD(e.fieldMask)};else{if(!(e instanceof z_))return me(16599,{Vt:e.type});t={verify:dh(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(n=>function(l,c){const f=c.transform;if(f instanceof Bl)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof ro)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof io)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof ql)return{fieldPath:c.field.canonicalString(),increment:f.Ae};throw me(20930,{transform:c.transform})}(0,n))),e.precondition.isNone||(t.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:GD(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:me(27497)}(i,e.precondition)),t}function Qy(i,e){const t=e.currentDocument?function(l){return l.updateTime!==void 0?gt.updateTime(kt(l.updateTime)):l.exists!==void 0?gt.exists(l.exists):gt.none()}(e.currentDocument):gt.none(),n=e.updateTransforms?e.updateTransforms.map(a=>function(c,f){let m=null;if("setToServerValue"in f)_e(f.setToServerValue==="REQUEST_TIME",16630,{proto:f}),m=new Bl;else if("appendMissingElements"in f){const _=f.appendMissingElements.values||[];m=new ro(_)}else if("removeAllFromArray"in f){const _=f.removeAllFromArray.values||[];m=new io(_)}else"increment"in f?m=new ql(c,f.increment):me(16584,{proto:f});const g=pt.fromServerFormat(f.fieldPath);return new Nh(g,m)}(i,a)):[];if(e.update){e.update.name;const a=ii(i,e.update.name),l=new fn({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=function(m){const g=m.fieldPaths||[];return new Fn(g.map(_=>pt.fromServerFormat(_)))}(e.updateMask);return new Hi(a,l,c,t,n)}return new iu(a,l,t,n)}if(e.delete){const a=ii(i,e.delete);return new su(a,t)}if(e.verify){const a=ii(i,e.verify);return new z_(a,t)}return me(1463,{proto:e})}function QD(i,e){return i&&i.length>0?(_e(e!==void 0,14353),i.map(t=>function(a,l){let c=a.updateTime?kt(a.updateTime):kt(l);return c.isEqual(ve.min())&&(c=kt(l)),new VD(c,a.transformResults||[])}(t,e))):[]}function wS(i,e){return{documents:[_S(i,e.path)]}}function bS(i,e){const t={structuredQuery:{}},n=e.path;let a;e.collectionGroup!==null?(a=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=_S(i,a);const l=function(g){if(g.length!==0)return SS(Je.create(g,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const c=function(g){if(g.length!==0)return g.map(_=>function(A){return{field:Tl(A.field),direction:YD(A.dir)}}(_))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=Gy(i,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{ft:t,parent:a}}function AS(i){let e=vS(i.parent);const t=i.structuredQuery,n=t.from?t.from.length:0;let a=null;if(n>0){_e(n===1,65062);const _=t.from[0];_.allDescendants?a=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=function(T){const A=IS(T);return A instanceof Je&&L_(A)?A.getFilters():[A]}(t.where));let c=[];t.orderBy&&(c=function(T){return T.map(A=>function(K){return new hh(wl(K.field),function(W){switch(W){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(K.direction))}(A))}(t.orderBy));let f=null;t.limit&&(f=function(T){let A;return A=typeof T=="object"?T.value:T,Ih(A)?null:A}(t.limit));let m=null;t.startAt&&(m=function(T){const A=!!T.before,k=T.values||[];return new Hs(k,A)}(t.startAt));let g=null;return t.endAt&&(g=function(T){const A=!T.before,k=T.values||[];return new Hs(k,A)}(t.endAt)),$I(e,a,c,l,f,"F",m,g)}function WD(i,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return me(28987,{purpose:a})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function IS(i){return i.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=wl(t.unaryFilter.field);return Ue.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=wl(t.unaryFilter.field);return Ue.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=wl(t.unaryFilter.field);return Ue.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=wl(t.unaryFilter.field);return Ue.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return me(61313);default:return me(60726)}}(i):i.fieldFilter!==void 0?function(t){return Ue.create(wl(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return me(58110);default:return me(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(t){return Je.create(t.compositeFilter.filters.map(n=>IS(n)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return me(1026)}}(t.compositeFilter.op))}(i):me(30097,{filter:i})}function YD(i){return jD[i]}function $D(i){return zD[i]}function XD(i){return BD[i]}function Tl(i){return{fieldPath:i.canonicalString()}}function wl(i){return pt.fromServerFormat(i.fieldPath)}function SS(i){return i instanceof Ue?function(t){if(t.op==="=="){if(J0(t.value))return{unaryFilter:{field:Tl(t.field),op:"IS_NAN"}};if(X0(t.value))return{unaryFilter:{field:Tl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(J0(t.value))return{unaryFilter:{field:Tl(t.field),op:"IS_NOT_NAN"}};if(X0(t.value))return{unaryFilter:{field:Tl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Tl(t.field),op:$D(t.op),value:t.value}}}(i):i instanceof Je?function(t){const n=t.getFilters().map(a=>SS(a));return n.length===1?n[0]:{compositeFilter:{op:XD(t.op),filters:n}}}(i):me(54877,{filter:i})}function JD(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function RS(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e,t,n,a,l=ve.min(),c=ve.min(),f=St.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new Oi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Oi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e){this.yt=e}}function ZD(i,e){let t;if(e.document)t=TS(i.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=oe.fromSegments(e.noDocument.path),a=ao(e.noDocument.readTime);t=ut.newNoDocument(n,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return me(56709);{const n=oe.fromSegments(e.unknownDocument.path),a=ao(e.unknownDocument.version);t=ut.newUnknownDocument(n,a)}}return e.readTime&&t.setReadTime(function(a){const l=new Et(a[0],a[1]);return ve.fromTimestamp(l)}(e.readTime)),t}function pb(i,e){const t=e.key,n={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Jf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=function(l,c){return{name:dh(l,c.key),fields:c.data.value.mapValue.fields,updateTime:Gl(l,c.version.toTimestamp()),createTime:Gl(l,c.createTime.toTimestamp())}}(i.yt,e);else if(e.isNoDocument())n.noDocument={path:t.path.toArray(),readTime:so(e.version)};else{if(!e.isUnknownDocument())return me(57904,{document:e});n.unknownDocument={path:t.path.toArray(),version:so(e.version)}}return n}function Jf(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function so(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ao(i){const e=new Et(i.seconds,i.nanoseconds);return ve.fromTimestamp(e)}function Ga(i,e){const t=(e.baseMutations||[]).map(l=>Qy(i.yt,l));for(let l=0;l<e.mutations.length-1;++l){const c=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const f=e.mutations[l+1];c.updateTransforms=f.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const n=e.mutations.map(l=>Qy(i.yt,l)),a=Et.fromMillis(e.localWriteTimeMs);return new B_(e.batchId,a,t,n)}function Mc(i){const e=ao(i.readTime),t=i.lastLimboFreeSnapshotVersion!==void 0?ao(i.lastLimboFreeSnapshotVersion):ve.min();let n;return n=function(l){return l.documents!==void 0}(i.query)?function(l){const c=l.documents.length;return _e(c===1,1966,{count:c}),Dn(ru(vS(l.documents[0])))}(i.query):function(l){return Dn(AS(l))}(i.query),new Oi(n,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,t,St.fromBase64String(i.resumeToken))}function CS(i,e){const t=so(e.snapshotVersion),n=so(e.lastLimboFreeSnapshotVersion);let a;a=Yf(e.target)?wS(i.yt,e.target):bS(i.yt,e.target).ft;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:no(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:a}}function Q_(i){const e=AS({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Xf(e,e.limit,"L"):e}function cy(i,e){return new G_(e.largestBatchId,Qy(i.yt,e.overlayMutation))}function gb(i,e){const t=e.path.lastSegment();return[i,wn(e.path.popLast()),t]}function yb(i,e,t,n){return{indexId:i,uid:e,sequenceNumber:t,readTime:so(n.readTime),documentKey:wn(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{getBundleMetadata(e,t){return _b(e).get(t).next(n=>{if(n)return function(l){return{id:l.bundleId,createTime:ao(l.createTime),version:l.version}}(n)})}saveBundleMetadata(e,t){return _b(e).put(function(a){return{bundleId:a.id,createTime:so(kt(a.createTime)),version:a.version}}(t))}getNamedQuery(e,t){return vb(e).get(t).next(n=>{if(n)return function(l){return{name:l.name,query:Q_(l.bundledQuery),readTime:ao(l.readTime)}}(n)})}saveNamedQuery(e,t){return vb(e).put(function(a){return{name:a.name,readTime:so(kt(a.readTime)),bundledQuery:a.bundledQuery}}(t))}}function _b(i){return $t(i,_m)}function vb(i){return $t(i,vm)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const n=t.uid||"";return new Sm(e,n)}getOverlay(e,t){return bc(e).get(gb(this.userId,t)).next(n=>n?cy(this.serializer,n):null)}getOverlays(e,t){const n=ti();return F.forEach(t,a=>this.getOverlay(e,a).next(l=>{l!==null&&n.set(a,l)})).next(()=>n)}saveOverlays(e,t,n){const a=[];return n.forEach((l,c)=>{const f=new G_(t,c);a.push(this.St(e,f))}),F.waitFor(a)}removeOverlaysForBatchId(e,t,n){const a=new Set;t.forEach(c=>a.add(wn(c.getCollectionPath())));const l=[];return a.forEach(c=>{const f=IDBKeyRange.bound([this.userId,c,n],[this.userId,c,n+1],!1,!0);l.push(bc(e).Z(Oy,f))}),F.waitFor(l)}getOverlaysForCollection(e,t,n){const a=ti(),l=wn(t),c=IDBKeyRange.bound([this.userId,l,n],[this.userId,l,Number.POSITIVE_INFINITY],!0);return bc(e).J(Oy,c).next(f=>{for(const m of f){const g=cy(this.serializer,m);a.set(g.getKey(),g)}return a})}getOverlaysForCollectionGroup(e,t,n,a){const l=ti();let c;const f=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return bc(e).ee({index:xI,range:f},(m,g,_)=>{const T=cy(this.serializer,g);l.size()<a||T.largestBatchId===c?(l.set(T.getKey(),T),c=T.largestBatchId):_.done()}).next(()=>l)}St(e,t){return bc(e).put(function(a,l,c){const[f,m,g]=gb(l,c.mutation.key);return{userId:l,collectionPath:m,documentId:g,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:fh(a.yt,c.mutation)}}(this.serializer,this.userId,t))}}function bc(i){return $t(i,Em)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{bt(e){return $t(e,k_)}getSessionToken(e){return this.bt(e).get("sessionToken").next(t=>{const n=t==null?void 0:t.value;return n?St.fromUint8Array(n):St.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(ft(e.integerValue));else if("doubleValue"in e){const n=ft(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),ih(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),typeof n=="string"&&(n=ji(n)),t.xt(`${n.seconds||""}`),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(zi(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?jI(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):bm(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):me(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const a of Object.keys(n))this.Ot(a,t),this.Ct(n[a],t)}kt(e,t){var c,f;const n=e.fields||{};this.Ft(t,53);const a=Fl,l=((f=(c=n[a].arrayValue)==null?void 0:c.values)==null?void 0:f.length)||0;this.Ft(t,15),t.Mt(ft(l)),this.Ot(a,t),this.Ct(n[a],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const a of n)this.Ct(a,t)}Lt(e,t){this.Ft(t,37),oe.fromName(e).path.forEach(n=>{this.Ft(t,60),this.Ut(n,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Ha.Kt=new Ha;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ml=255;function nP(i){if(i===0)return 8;let e=0;return i>>4||(e+=4,i<<=4),i>>6||(e+=2,i<<=2),i>>7||(e+=1),e}function Eb(i){const e=64-function(n){let a=0;for(let l=0;l<8;++l){const c=nP(255&n[l]);if(a+=c,c!==8)break}return a}(i);return Math.ceil(e/8)}class rP{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Gt(n.value),n=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Jt(n.value),n=t.next();this.Ht()}Yt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Gt(n);else if(n<2048)this.Gt(960|n>>>6),this.Gt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|n>>>12),this.Gt(128|63&n>>>6),this.Gt(128|63&n);else{const a=t.codePointAt(0);this.Gt(240|a>>>18),this.Gt(128|63&a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a)}}this.zt()}Zt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Jt(n);else if(n<2048)this.Jt(960|n>>>6),this.Jt(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|n>>>12),this.Jt(128|63&n>>>6),this.Jt(128|63&n);else{const a=t.codePointAt(0);this.Jt(240|a>>>18),this.Jt(128|63&a>>>12),this.Jt(128|63&a>>>6),this.Jt(128|63&a)}}this.Ht()}Xt(e){const t=this.en(e),n=Eb(t);this.tn(1+n),this.buffer[this.position++]=255&n;for(let a=t.length-n;a<t.length;++a)this.buffer[this.position++]=255&t[a]}nn(e){const t=this.en(e),n=Eb(t);this.tn(1+n),this.buffer[this.position++]=~(255&n);for(let a=t.length-n;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}rn(){this.sn(ml),this.sn(255)}_n(){this.an(ml),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)}(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let a=1;a<t.length;++a)t[a]^=n?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===ml?(this.sn(ml),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===ml?(this.an(ml),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const a=new Uint8Array(n);a.set(this.buffer),this.buffer=a}}class iP{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class sP{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Ac{constructor(){this.cn=new rP,this.ln=new iP(this.cn),this.hn=new sP(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,t,n,a){this.Tn=e,this.In=t,this.En=n,this.dn=a}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,n=new Uint8Array(t);return n.set(this.dn,0),t!==e?n.set([0],this.dn.length):++n[n.length-1],new Ka(this.Tn,this.In,this.En,n)}Rn(e,t,n){return{indexId:this.Tn,uid:e,arrayValue:Mf(this.En),directionalValue:Mf(this.dn),orderedDocumentKey:Mf(t),documentKey:n.path.toArray()}}Vn(e,t,n){const a=this.Rn(e,t,n);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function bs(i,e){let t=i.Tn-e.Tn;return t!==0?t:(t=Tb(i.En,e.En),t!==0?t:(t=Tb(i.dn,e.dn),t!==0?t:oe.comparator(i.In,e.In)))}function Tb(i,e){for(let t=0;t<i.length&&t<e.length;++t){const n=i[t]-e[t];if(n!==0)return n}return i.length-e.length}function Mf(i){return GA()?function(t){let n="";for(let a=0;a<t.length;a++)n+=String.fromCharCode(t[a]);return n}(i):i}function wb(i){return typeof i!="string"?i:function(t){const n=new Uint8Array(t.length);for(let a=0;a<t.length;a++)n[a]=t.charCodeAt(a);return n}(i)}class bb{constructor(e){this.mn=new Ze((t,n)=>pt.comparator(t.field,n.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const n=t;n.isInequality()?this.mn=this.mn.add(n):this.gn.push(n)}}get pn(){return this.mn.size>1}yn(e){if(_e(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=Py(e);if(t!==void 0&&!this.wn(t))return!1;const n=za(e);let a=new Set,l=0,c=0;for(;l<n.length&&this.wn(n[l]);++l)a=a.add(n[l].fieldPath.canonicalString());if(l===n.length)return!0;if(this.mn.size>0){const f=this.mn.getIterator().getNext();if(!a.has(f.field.canonicalString())){const m=n[l];if(!this.Sn(f,m)||!this.bn(this.fn[c++],m))return!1}++l}for(;l<n.length;++l){const f=n[l];if(c>=this.fn.length||!this.bn(this.fn[c++],f))return!1}return!0}Dn(){if(this.pn)return null;let e=new Ze(pt.comparator);const t=[];for(const n of this.gn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")t.push(new xf(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new xf(n.field,0))}for(const n of this.fn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new xf(n.field,n.dir==="asc"?0:1)));return new Hf(Hf.UNKNOWN_ID,this.collectionId,t,rh.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===n}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(i){var t,n;if(_e(i instanceof Ue||i instanceof Je,20012),i instanceof Ue){if(i instanceof YI){const a=((n=(t=i.value.arrayValue)==null?void 0:t.values)==null?void 0:n.map(l=>Ue.create(i.field,"==",l)))||[];return Je.create(a,"or")}return i}const e=i.filters.map(a=>NS(a));return Je.create(e,i.op)}function aP(i){if(i.getFilters().length===0)return[];const e=$y(NS(i));return _e(DS(e),7391),Wy(e)||Yy(e)?[e]:e.getFilters()}function Wy(i){return i instanceof Ue}function Yy(i){return i instanceof Je&&L_(i)}function DS(i){return Wy(i)||Yy(i)||function(t){if(t instanceof Je&&jy(t)){for(const n of t.getFilters())if(!Wy(n)&&!Yy(n))return!1;return!0}return!1}(i)}function $y(i){if(_e(i instanceof Ue||i instanceof Je,34018),i instanceof Ue)return i;if(i.filters.length===1)return $y(i.filters[0]);const e=i.filters.map(n=>$y(n));let t=Je.create(e,i.op);return t=Zf(t),DS(t)?t:(_e(t instanceof Je,64498),_e(zl(t),40251),_e(t.filters.length>1,57927),t.filters.reduce((n,a)=>W_(n,a)))}function W_(i,e){let t;return _e(i instanceof Ue||i instanceof Je,38388),_e(e instanceof Ue||e instanceof Je,25473),t=i instanceof Ue?e instanceof Ue?function(a,l){return Je.create([a,l],"and")}(i,e):Ab(i,e):e instanceof Ue?Ab(e,i):function(a,l){if(_e(a.filters.length>0&&l.filters.length>0,48005),zl(a)&&zl(l))return KI(a,l.getFilters());const c=jy(a)?a:l,f=jy(a)?l:a,m=c.filters.map(g=>W_(g,f));return Je.create(m,"or")}(i,e),Zf(t)}function Ab(i,e){if(zl(e))return KI(e,i.getFilters());{const t=e.filters.map(n=>W_(i,n));return Je.create(t,"or")}}function Zf(i){if(_e(i instanceof Ue||i instanceof Je,11850),i instanceof Ue)return i;const e=i.getFilters();if(e.length===1)return Zf(e[0]);if(GI(i))return i;const t=e.map(a=>Zf(a)),n=[];return t.forEach(a=>{a instanceof Ue?n.push(a):a instanceof Je&&(a.op===i.op?n.push(...a.filters):n.push(a))}),n.length===1?n[0]:Je.create(n,i.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(){this.Cn=new Y_}addToCollectionParentIndex(e,t){return this.Cn.add(t),F.resolve()}getCollectionParents(e,t){return F.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return F.resolve()}deleteFieldIndex(e,t){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,t){return F.resolve()}getDocumentsMatchingTarget(e,t){return F.resolve(null)}getIndexType(e,t){return F.resolve(0)}getFieldIndexes(e,t){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,t){return F.resolve(er.min())}getMinOffsetFromCollectionGroup(e,t){return F.resolve(er.min())}updateCollectionGroup(e,t,n){return F.resolve()}updateIndexEntries(e,t){return F.resolve()}}class Y_{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),a=this.index[t]||new Ze(Le.comparator),l=!a.has(n);return this.index[t]=a.add(n),l}has(e){const t=e.lastSegment(),n=e.popLast(),a=this.index[t];return a&&a.has(n)}getEntries(e){return(this.index[e]||new Ze(Le.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib="IndexedDbIndexManager",Tf=new Uint8Array(0);class lP{constructor(e,t){this.databaseId=t,this.vn=new Y_,this.Fn=new Gi(n=>no(n),(n,a)=>Rh(n,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const n=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.vn.add(t)});const l={collectionId:n,parent:wn(a)};return Sb(e).put(l)}return F.resolve()}getCollectionParents(e,t){const n=[],a=IDBKeyRange.bound([t,""],[fI(t),""],!1,!0);return Sb(e).J(a).next(l=>{for(const c of l){if(c.collectionId!==t)break;n.push(ei(c.parent))}return n})}addFieldIndex(e,t){const n=Ic(e),a=function(f){return{indexId:f.indexId,collectionGroup:f.collectionGroup,fields:f.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])}}(t);delete a.indexId;const l=n.add(a);if(t.indexState){const c=gl(e);return l.next(f=>{c.put(yb(f,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return l.next()}deleteFieldIndex(e,t){const n=Ic(e),a=gl(e),l=pl(e);return n.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Ic(e),n=pl(e),a=gl(e);return t.Z().next(()=>n.Z()).next(()=>a.Z())}createTargetIndexes(e,t){return F.forEach(this.Mn(t),n=>this.getIndexType(e,n).next(a=>{if(a===0||a===1){const l=new bb(n).Dn();if(l!=null)return this.addFieldIndex(e,l)}}))}getDocumentsMatchingTarget(e,t){const n=pl(e);let a=!0;const l=new Map;return F.forEach(this.Mn(t),c=>this.xn(e,c).next(f=>{a&&(a=!!f),l.set(c,f)})).next(()=>{if(a){let c=Ne();const f=[];return F.forEach(l,(m,g)=>{te(Ib,`Using index ${function(le){return`id=${le.indexId}|cg=${le.collectionGroup}|f=${le.fields.map(we=>`${we.fieldPath}:${we.kind}`).join(",")}`}(m)} to execute ${no(t)}`);const _=function(le,we){const pe=Py(we);if(pe===void 0)return null;for(const Ie of $f(le,pe.fieldPath))switch(Ie.op){case"array-contains-any":return Ie.value.arrayValue.values||[];case"array-contains":return[Ie.value]}return null}(g,m),T=function(le,we){const pe=new Map;for(const Ie of za(we))for(const R of $f(le,Ie.fieldPath))switch(R.op){case"==":case"in":pe.set(Ie.fieldPath.canonicalString(),R.value);break;case"not-in":case"!=":return pe.set(Ie.fieldPath.canonicalString(),R.value),Array.from(pe.values())}return null}(g,m),A=function(le,we){const pe=[];let Ie=!0;for(const R of za(we)){const S=R.kind===0?rb(le,R.fieldPath,le.startAt):ib(le,R.fieldPath,le.startAt);pe.push(S.value),Ie&&(Ie=S.inclusive)}return new Hs(pe,Ie)}(g,m),k=function(le,we){const pe=[];let Ie=!0;for(const R of za(we)){const S=R.kind===0?ib(le,R.fieldPath,le.endAt):rb(le,R.fieldPath,le.endAt);pe.push(S.value),Ie&&(Ie=S.inclusive)}return new Hs(pe,Ie)}(g,m),K=this.On(m,g,A),G=this.On(m,g,k),W=this.Nn(m,g,T),re=this.Bn(m.indexId,_,K,A.inclusive,G,k.inclusive,W);return F.forEach(re,de=>n.Y(de,t.limit).next(le=>{le.forEach(we=>{const pe=oe.fromSegments(we.documentKey);c.has(pe)||(c=c.add(pe),f.push(pe))})}))}).next(()=>f)}return F.resolve(null)})}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=aP(Je.create(e.filters,"and")).map(n=>By(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,t),t)}Bn(e,t,n,a,l,c,f){const m=(t!=null?t.length:1)*Math.max(n.length,l.length),g=m/(t!=null?t.length:1),_=[];for(let T=0;T<m;++T){const A=t?this.Ln(t[T/g]):Tf,k=this.kn(e,A,n[T%g],a),K=this.qn(e,A,l[T%g],c),G=f.map(W=>this.kn(e,A,W,!0));_.push(...this.createRange(k,K,G))}return _}kn(e,t,n,a){const l=new Ka(e,oe.empty(),t,n);return a?l:l.An()}qn(e,t,n,a){const l=new Ka(e,oe.empty(),t,n);return a?l.An():l}xn(e,t){const n=new bb(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(l=>{let c=null;for(const f of l)n.yn(f)&&(!c||f.fields.length>c.fields.length)&&(c=f);return c})}getIndexType(e,t){let n=2;const a=this.Mn(t);return F.forEach(a,l=>this.xn(e,l).next(c=>{c?n!==0&&c.fields.length<function(m){let g=new Ze(pt.comparator),_=!1;for(const T of m.filters)for(const A of T.getFlattenedFilters())A.field.isKeyField()||(A.op==="array-contains"||A.op==="array-contains-any"?_=!0:g=g.add(A.field));for(const T of m.orderBy)T.field.isKeyField()||(g=g.add(T.field));return g.size+(_?1:0)}(l)&&(n=1):n=0})).next(()=>function(c){return c.limit!==null}(t)&&a.length>1&&n===2?1:n)}Qn(e,t){const n=new Ac;for(const a of za(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const c=n.Pn(a.kind);Ha.Kt.Dt(l,c)}return n.un()}Ln(e){const t=new Ac;return Ha.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const n=new Ac;return Ha.Kt.Dt(to(this.databaseId,t),n.Pn(function(l){const c=za(l);return c.length===0?0:c[c.length-1].kind}(e))),n.un()}Nn(e,t,n){if(n===null)return[];let a=[];a.push(new Ac);let l=0;for(const c of za(e)){const f=n[l++];for(const m of a)if(this.Un(t,c.fieldPath)&&ch(f))a=this.Kn(a,c,f);else{const g=m.Pn(c.kind);Ha.Kt.Dt(f,g)}}return this.Wn(a)}On(e,t,n){return this.Nn(e,t,n.position)}Wn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].un();return t}Kn(e,t,n){const a=[...e],l=[];for(const c of n.arrayValue.values||[])for(const f of a){const m=new Ac;m.seed(f.un()),Ha.Kt.Dt(c,m.Pn(t.kind)),l.push(m)}return l}Un(e,t){return!!e.filters.find(n=>n instanceof Ue&&n.field.isEqual(t)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(e,t){const n=Ic(e),a=gl(e);return(t?n.J(Vy,IDBKeyRange.bound(t,t)):n.J()).next(l=>{const c=[];return F.forEach(l,f=>a.get([f.indexId,this.uid]).next(m=>{c.push(function(_,T){const A=T?new rh(T.sequenceNumber,new er(ao(T.readTime),new oe(ei(T.documentKey)),T.largestBatchId)):rh.empty(),k=_.fields.map(([K,G])=>new xf(pt.fromServerFormat(K),G));return new Hf(_.indexId,_.collectionGroup,k,A)}(f,m))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((n,a)=>{const l=n.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:Ce(n.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,n){const a=Ic(e),l=gl(e);return this.Gn(e).next(c=>a.J(Vy,IDBKeyRange.bound(t,t)).next(f=>F.forEach(f,m=>l.put(yb(m.indexId,this.uid,c,n)))))}updateIndexEntries(e,t){const n=new Map;return F.forEach(t,(a,l)=>{const c=n.get(a.collectionGroup);return(c?F.resolve(c):this.getFieldIndexes(e,a.collectionGroup)).next(f=>(n.set(a.collectionGroup,f),F.forEach(f,m=>this.zn(e,a,m).next(g=>{const _=this.jn(l,m);return g.isEqual(_)?F.resolve():this.Jn(e,l,m,g,_)}))))})}Hn(e,t,n,a){return pl(e).put(a.Rn(this.uid,this.$n(n,t.key),t.key))}Yn(e,t,n,a){return pl(e).delete(a.Vn(this.uid,this.$n(n,t.key),t.key))}zn(e,t,n){const a=pl(e);let l=new Ze(bs);return a.ee({index:RI,range:IDBKeyRange.only([n.indexId,this.uid,Mf(this.$n(n,t))])},(c,f)=>{l=l.add(new Ka(n.indexId,t,wb(f.arrayValue),wb(f.directionalValue)))}).next(()=>l)}jn(e,t){let n=new Ze(bs);const a=this.Qn(t,e);if(a==null)return n;const l=Py(t);if(l!=null){const c=e.data.field(l.fieldPath);if(ch(c))for(const f of c.arrayValue.values||[])n=n.add(new Ka(t.indexId,e.key,this.Ln(f),a))}else n=n.add(new Ka(t.indexId,e.key,Tf,a));return n}Jn(e,t,n,a,l){te(Ib,"Updating index entries for document '%s'",t.key);const c=[];return function(m,g,_,T,A){const k=m.getIterator(),K=g.getIterator();let G=fl(k),W=fl(K);for(;G||W;){let re=!1,de=!1;if(G&&W){const le=_(G,W);le<0?de=!0:le>0&&(re=!0)}else G!=null?de=!0:re=!0;re?(T(W),W=fl(K)):de?(A(G),G=fl(k)):(G=fl(k),W=fl(K))}}(a,l,bs,f=>{c.push(this.Hn(e,t,n,f))},f=>{c.push(this.Yn(e,t,n,f))}),F.waitFor(c)}Gn(e){let t=1;return gl(e).ee({index:SI,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,a,l)=>{l.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,n){n=n.sort((c,f)=>bs(c,f)).filter((c,f,m)=>!f||bs(c,m[f-1])!==0);const a=[];a.push(e);for(const c of n){const f=bs(c,e),m=bs(c,t);if(f===0)a[0]=e.An();else if(f>0&&m<0)a.push(c),a.push(c.An());else if(m>0)break}a.push(t);const l=[];for(let c=0;c<a.length;c+=2){if(this.Zn(a[c],a[c+1]))return[];const f=a[c].Vn(this.uid,Tf,oe.empty()),m=a[c+1].Vn(this.uid,Tf,oe.empty());l.push(IDBKeyRange.bound(f,m))}return l}Zn(e,t){return bs(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Rb)}getMinOffset(e,t){return F.mapArray(this.Mn(t),n=>this.xn(e,n).next(a=>a||me(44426))).next(Rb)}}function Sb(i){return $t(i,oh)}function pl(i){return $t(i,qc)}function Ic(i){return $t(i,P_)}function gl(i){return $t(i,Bc)}function Rb(i){_e(i.length!==0,28825);let e=i[0].indexState.offset,t=e.largestBatchId;for(let n=1;n<i.length;n++){const a=i[n].indexState.offset;C_(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new er(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},PS=41943040;class En{static withCacheSize(e){return new En(e,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(i,e,t){const n=i.store(Sr),a=i.store(Ol),l=[],c=IDBKeyRange.only(t.batchId);let f=0;const m=n.ee({range:c},(_,T,A)=>(f++,A.delete()));l.push(m.next(()=>{_e(f===1,47070,{batchId:t.batchId})}));const g=[];for(const _ of t.mutations){const T=bI(e,_.key.path,t.batchId);l.push(a.delete(T)),g.push(_.key)}return F.waitFor(l).next(()=>g)}function em(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw me(14731);e=i.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */En.DEFAULT_COLLECTION_PERCENTILE=10,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,En.DEFAULT=new En(PS,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),En.DISABLED=new En(-1,0,0);class Rm{constructor(e,t,n,a){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=a,this.Xn={}}static wt(e,t,n,a){_e(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new Rm(l,t,n,a)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return As(e).ee({index:Wa,range:n},(a,l,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,n,a){const l=bl(e),c=As(e);return c.add({}).next(f=>{_e(typeof f=="number",49019);const m=new B_(f,t,n,a),g=function(k,K,G){const W=G.baseMutations.map(de=>fh(k.yt,de)),re=G.mutations.map(de=>fh(k.yt,de));return{userId:K,batchId:G.batchId,localWriteTimeMs:G.localWriteTime.toMillis(),baseMutations:W,mutations:re}}(this.serializer,this.userId,m),_=[];let T=new Ze((A,k)=>Ce(A.canonicalString(),k.canonicalString()));for(const A of a){const k=bI(this.userId,A.key.path,f);T=T.add(A.key.path.popLast()),_.push(c.put(g)),_.push(l.put(k,BN))}return T.forEach(A=>{_.push(this.indexManager.addToCollectionParentIndex(e,A))}),e.addOnCommittedListener(()=>{this.Xn[f]=m.keys()}),F.waitFor(_).next(()=>m)})}lookupMutationBatch(e,t){return As(e).get(t).next(n=>n?(_e(n.userId===this.userId,48,"Unexpected user for mutation batch",{userId:n.userId,batchId:t}),Ga(this.serializer,n)):null)}er(e,t){return this.Xn[t]?F.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next(n=>{if(n){const a=n.keys();return this.Xn[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,a=IDBKeyRange.lowerBound([this.userId,n]);let l=null;return As(e).ee({index:Wa,range:a},(c,f,m)=>{f.userId===this.userId&&(_e(f.batchId>=n,47524,{tr:n}),l=Ga(this.serializer,f)),m.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=Vs;return As(e).ee({index:Wa,range:t,reverse:!0},(a,l,c)=>{n=l.batchId,c.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Vs],[this.userId,Number.POSITIVE_INFINITY]);return As(e).J(Wa,t).next(n=>n.map(a=>Ga(this.serializer,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Cf(this.userId,t.path),a=IDBKeyRange.lowerBound(n),l=[];return bl(e).ee({range:a},(c,f,m)=>{const[g,_,T]=c,A=ei(_);if(g===this.userId&&t.path.isEqual(A))return As(e).get(T).next(k=>{if(!k)throw me(61480,{nr:c,batchId:T});_e(k.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:k.userId,batchId:T}),l.push(Ga(this.serializer,k))});m.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ze(Ce);const a=[];return t.forEach(l=>{const c=Cf(this.userId,l.path),f=IDBKeyRange.lowerBound(c),m=bl(e).ee({range:f},(g,_,T)=>{const[A,k,K]=g,G=ei(k);A===this.userId&&l.path.isEqual(G)?n=n.add(K):T.done()});a.push(m)}),F.waitFor(a).next(()=>this.rr(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,a=n.length+1,l=Cf(this.userId,n),c=IDBKeyRange.lowerBound(l);let f=new Ze(Ce);return bl(e).ee({range:c},(m,g,_)=>{const[T,A,k]=m,K=ei(A);T===this.userId&&n.isPrefixOf(K)?K.length===a&&(f=f.add(k)):_.done()}).next(()=>this.rr(e,f))}rr(e,t){const n=[],a=[];return t.forEach(l=>{a.push(As(e).get(l).next(c=>{if(c===null)throw me(35274,{batchId:l});_e(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:l}),n.push(Ga(this.serializer,c))}))}),F.waitFor(a).next(()=>n)}removeMutationBatch(e,t){return kS(e.le,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this.ir(t.batchId)}),F.forEach(n,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return F.resolve();const n=IDBKeyRange.lowerBound(function(c){return[c]}(this.userId)),a=[];return bl(e).ee({range:n},(l,c,f)=>{if(l[0]===this.userId){const m=ei(l[1]);a.push(m)}else f.done()}).next(()=>{_e(a.length===0,56720,{sr:a.map(l=>l.canonicalString())})})})}containsKey(e,t){return VS(e,this.userId,t)}_r(e){return OS(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:Vs,lastStreamToken:""})}}function VS(i,e,t){const n=Cf(e,t.path),a=n[1],l=IDBKeyRange.lowerBound(n);let c=!1;return bl(i).ee({range:l,X:!0},(f,m,g)=>{const[_,T,A]=f;_===e&&T===a&&(c=!0),g.done()}).next(()=>c)}function As(i){return $t(i,Sr)}function bl(i){return $t(i,Ol)}function OS(i){return $t(i,sh)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new oo(0)}static cr(){return new oo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next(t=>{const n=new oo(t.highestTargetId);return t.highestTargetId=n.next(),this.hr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(t=>ve.fromTimestamp(new Et(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.lr(e).next(a=>(a.highestListenSequenceNumber=t,n&&(a.lastRemoteSnapshotVersion=n.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.hr(e,a)))}addTargetData(e,t){return this.Pr(e,t).next(()=>this.lr(e).next(n=>(n.targetCount+=1,this.Tr(t,n),this.hr(e,n))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>yl(e).delete(t.targetId)).next(()=>this.lr(e)).next(n=>(_e(n.targetCount>0,8065),n.targetCount-=1,this.hr(e,n)))}removeTargets(e,t,n){let a=0;const l=[];return yl(e).ee((c,f)=>{const m=Mc(f);m.sequenceNumber<=t&&n.get(m.targetId)===null&&(a++,l.push(this.removeTargetData(e,m)))}).next(()=>F.waitFor(l)).next(()=>a)}forEachTarget(e,t){return yl(e).ee((n,a)=>{const l=Mc(a);t(l)})}lr(e){return Cb(e).get(Wf).next(t=>(_e(t!==null,2888),t))}hr(e,t){return Cb(e).put(Wf,t)}Pr(e,t){return yl(e).put(CS(this.serializer,t))}Tr(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.lr(e).next(t=>t.targetCount)}getTargetData(e,t){const n=no(t),a=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let l=null;return yl(e).ee({range:a,index:II},(c,f,m)=>{const g=Mc(f);Rh(t,g.target)&&(l=g,m.done())}).next(()=>l)}addMatchingKeys(e,t,n){const a=[],l=xs(e);return t.forEach(c=>{const f=wn(c.path);a.push(l.put({targetId:n,path:f})),a.push(this.referenceDelegate.addReference(e,n,c))}),F.waitFor(a)}removeMatchingKeys(e,t,n){const a=xs(e);return F.forEach(t,l=>{const c=wn(l.path);return F.waitFor([a.delete([n,c]),this.referenceDelegate.removeReference(e,n,l)])})}removeMatchingKeysForTargetId(e,t){const n=xs(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(a)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),a=xs(e);let l=Ne();return a.ee({range:n,X:!0},(c,f,m)=>{const g=ei(c[1]),_=new oe(g);l=l.add(_)}).next(()=>l)}containsKey(e,t){const n=wn(t.path),a=IDBKeyRange.bound([n],[fI(n)],!1,!0);let l=0;return xs(e).ee({index:D_,X:!0,range:a},([c,f],m,g)=>{c!==0&&(l++,g.done())}).next(()=>l>0)}At(e,t){return yl(e).get(t).next(n=>n?Mc(n):null)}}function yl(i){return $t(i,Ml)}function Cb(i){return $t(i,Ja)}function xs(i){return $t(i,Ll)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nb="LruGarbageCollector",cP=1048576;function Db([i,e],[t,n]){const a=Ce(i,t);return a===0?Ce(e,n):a}class hP{constructor(e){this.Ir=e,this.buffer=new Ze(Db),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();Db(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class MS{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){te(Nb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Xs(t)?te(Nb,"Ignoring IndexedDB error during garbage collection: ",t):await $s(t)}await this.Vr(3e5)})}}class dP{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(n=>Math.floor(t/100*n))}nthSequenceNumber(e,t){if(t===0)return F.resolve(Un.ce);const n=new hP(t);return this.mr.forEachTarget(e,a=>n.Ar(a.sequenceNumber)).next(()=>this.mr.pr(e,a=>n.Ar(a))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(te("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(xb)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(te("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xb):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,a,l,c,f,m,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),a=this.params.maximumSequenceNumbersToCollect):a=T,c=Date.now(),this.nthSequenceNumber(e,a))).next(T=>(n=T,f=Date.now(),this.removeTargets(e,n,t))).next(T=>(l=T,m=Date.now(),this.removeOrphanedDocuments(e,n))).next(T=>(g=Date.now(),vl()<=Me.DEBUG&&te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${a} in `+(f-c)+`ms
	Removed ${l} targets in `+(m-f)+`ms
	Removed ${T} documents in `+(g-m)+`ms
Total Duration: ${g-_}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:T})))}}function LS(i,e){return new dP(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e,t){this.db=e,this.garbageCollector=LS(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(n=>t.next(a=>n+a))}wr(e){let t=0;return this.pr(e,n=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,(n,a)=>t(a))}addReference(e,t,n){return wf(e,n)}removeReference(e,t,n){return wf(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return wf(e,t)}br(e,t){return function(a,l){let c=!1;return OS(a).te(f=>VS(a,f,l).next(m=>(m&&(c=!0),F.resolve(!m)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.Sr(e,(c,f)=>{if(f<=t){const m=this.br(e,c).next(g=>{if(!g)return l++,n.getEntry(e,c).next(()=>(n.removeEntry(c,ve.min()),xs(e).delete(function(T){return[0,wn(T.path)]}(c))))});a.push(m)}}).next(()=>F.waitFor(a)).next(()=>n.apply(e)).next(()=>l)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return wf(e,t)}Sr(e,t){const n=xs(e);let a,l=Un.ce;return n.ee({index:D_},([c,f],{path:m,sequenceNumber:g})=>{c===0?(l!==Un.ce&&t(new oe(ei(a)),l),l=g,a=m):l=Un.ce}).next(()=>{l!==Un.ce&&t(new oe(ei(a)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function wf(i,e){return xs(i).put(function(n,a){return{targetId:0,path:wn(n.path),sequenceNumber:a}}(e,i.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(){this.changes=new Gi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ut.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?F.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Ua(e).put(n)}removeEntry(e,t,n){return Ua(e).delete(function(l,c){const f=l.path.toArray();return[f.slice(0,f.length-2),f[f.length-2],Jf(c),f[f.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.Dr(e,n)))}getEntry(e,t){let n=ut.newInvalidDocument(t);return Ua(e).ee({index:Nf,range:IDBKeyRange.only(Sc(t))},(a,l)=>{n=this.Cr(t,l)}).next(()=>n)}vr(e,t){let n={size:0,document:ut.newInvalidDocument(t)};return Ua(e).ee({index:Nf,range:IDBKeyRange.only(Sc(t))},(a,l)=>{n={document:this.Cr(t,l),size:em(l)}}).next(()=>n)}getEntries(e,t){let n=jn();return this.Fr(e,t,(a,l)=>{const c=this.Cr(a,l);n=n.insert(a,c)}).next(()=>n)}Mr(e,t){let n=jn(),a=new lt(oe.comparator);return this.Fr(e,t,(l,c)=>{const f=this.Cr(l,c);n=n.insert(l,f),a=a.insert(l,em(c))}).next(()=>({documents:n,Or:a}))}Fr(e,t,n){if(t.isEmpty())return F.resolve();let a=new Ze(Vb);t.forEach(m=>a=a.add(m));const l=IDBKeyRange.bound(Sc(a.first()),Sc(a.last())),c=a.getIterator();let f=c.getNext();return Ua(e).ee({index:Nf,range:l},(m,g,_)=>{const T=oe.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;f&&Vb(f,T)<0;)n(f,null),f=c.getNext();f&&f.isEqual(T)&&(n(f,g),f=c.hasNext()?c.getNext():null),f?_.j(Sc(f)):_.done()}).next(()=>{for(;f;)n(f,null),f=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,n,a,l){const c=t.path,f=[c.popLast().toArray(),c.lastSegment(),Jf(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],m=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ua(e).J(IDBKeyRange.bound(f,m,!0)).next(g=>{l==null||l.incrementDocumentReadCount(g.length);let _=jn();for(const T of g){const A=this.Cr(oe.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);A.isFoundDocument()&&(Ch(t,A)||a.has(A.key))&&(_=_.insert(A.key,A))}return _})}getAllFromCollectionGroup(e,t,n,a){let l=jn();const c=kb(t,n),f=kb(t,er.max());return Ua(e).ee({index:AI,range:IDBKeyRange.bound(c,f,!0)},(m,g,_)=>{const T=this.Cr(oe.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);l=l.insert(T.key,T),l.size===a&&_.done()}).next(()=>l)}newChangeBuffer(e){return new pP(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Pb(e).get(ky).next(t=>(_e(!!t,20021),t))}Dr(e,t){return Pb(e).put(ky,t)}Cr(e,t){if(t){const n=ZD(this.serializer,t);if(!(n.isNoDocument()&&n.version.isEqual(ve.min())))return n}return ut.newInvalidDocument(e)}}function FS(i){return new mP(i)}class pP extends US{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Gi(n=>n.toString(),(n,a)=>n.isEqual(a))}applyChanges(e){const t=[];let n=0,a=new Ze((l,c)=>Ce(l.canonicalString(),c.canonicalString()));return this.changes.forEach((l,c)=>{const f=this.Br.get(l);if(t.push(this.Nr.removeEntry(e,l,f.readTime)),c.isValidDocument()){const m=pb(this.Nr.serializer,c);a=a.add(l.path.popLast());const g=em(m);n+=g-f.size,t.push(this.Nr.addEntry(e,l,m))}else if(n-=f.size,this.trackRemovals){const m=pb(this.Nr.serializer,c.convertToNoDocument(ve.min()));t.push(this.Nr.addEntry(e,l,m))}}),a.forEach(l=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.Nr.updateMetadata(e,n)),F.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next(n=>(this.Br.set(t,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next(({documents:n,Or:a})=>(a.forEach((l,c)=>{this.Br.set(l,{size:c,readTime:n.get(l).readTime})}),n))}}function Pb(i){return $t(i,ah)}function Ua(i){return $t(i,Qf)}function Sc(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function kb(i,e){const t=e.documentKey.path.toArray();return[i,Jf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Vb(i,e){const t=i.path.toArray(),n=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<n.length-2;++l)if(a=Ce(t[l],n[l]),a)return a;return a=Ce(t.length,n.length),a||(a=Ce(t[t.length-2],n[n.length-2]),a||Ce(t[t.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(e,t,n,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=a}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(n=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(n!==null&&Kc(n.mutation,a,Fn.empty(),Et.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.getLocalViewOfDocuments(e,n,Ne()).next(()=>n))}getLocalViewOfDocuments(e,t,n=Ne()){const a=ti();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,n).next(l=>{let c=Vc();return l.forEach((f,m)=>{c=c.insert(f,m.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const n=ti();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Ne()))}populateOverlays(e,t,n){const a=[];return n.forEach(l=>{t.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((c,f)=>{t.set(c,f)})})}computeViews(e,t,n,a){let l=jn();const c=Hc(),f=function(){return Hc()}();return t.forEach((m,g)=>{const _=n.get(g.key);a.has(g.key)&&(_===void 0||_.mutation instanceof Hi)?l=l.insert(g.key,g):_!==void 0?(c.set(g.key,_.mutation.getFieldMask()),Kc(_.mutation,g,_.mutation.getFieldMask(),Et.now())):c.set(g.key,Fn.empty())}),this.recalculateAndSaveOverlays(e,l).next(m=>(m.forEach((g,_)=>c.set(g,_)),t.forEach((g,_)=>f.set(g,new gP(_,c.get(g)??null))),f))}recalculateAndSaveOverlays(e,t){const n=Hc();let a=new lt((c,f)=>c-f),l=Ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const f of c)f.keys().forEach(m=>{const g=t.get(m);if(g===null)return;let _=n.get(m)||Fn.empty();_=f.applyToLocalView(g,_),n.set(m,_);const T=(a.get(f.batchId)||Ne()).add(m);a=a.insert(f.batchId,T)})}).next(()=>{const c=[],f=a.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),g=m.key,_=m.value,T=nS();_.forEach(A=>{if(!l.has(A)){const k=uS(t.get(A),n.get(A));k!==null&&T.set(A,k),l=l.add(A)}}),c.push(this.documentOverlayCache.saveOverlays(e,g,T))}return F.waitFor(c)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,t,n,a){return function(c){return oe.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):U_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,a):this.getDocumentsMatchingCollectionQuery(e,t,n,a)}getNextDocuments(e,t,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,a).next(l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,a-l.size):F.resolve(ti());let f=Vl,m=l;return c.next(g=>F.forEach(g,(_,T)=>(f<T.largestBatchId&&(f=T.largestBatchId),l.get(_)?F.resolve():this.remoteDocumentCache.getEntry(e,_).next(A=>{m=m.insert(_,A)}))).next(()=>this.populateOverlays(e,g,l)).next(()=>this.computeViews(e,m,g,Ne())).next(_=>({batchId:f,changes:tS(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new oe(t)).next(n=>{let a=Vc();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,n,a){const l=t.collectionGroup;let c=Vc();return this.indexManager.getCollectionParents(e,l).next(f=>F.forEach(f,m=>{const g=function(T,A){return new qi(A,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,n,a).next(_=>{_.forEach((T,A)=>{c=c.insert(T,A)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,n,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,l,a))).next(c=>{l.forEach((m,g)=>{const _=g.getKey();c.get(_)===null&&(c=c.insert(_,ut.newInvalidDocument(_)))});let f=Vc();return c.forEach((m,g)=>{const _=l.get(m);_!==void 0&&Kc(_.mutation,g,Fn.empty(),Et.now()),Ch(t,g)&&(f=f.insert(m,g))}),f})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return F.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(a){return{id:a.id,version:a.version,createTime:kt(a.createTime)}}(t)),F.resolve()}getNamedQuery(e,t){return F.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(a){return{name:a.name,query:Q_(a.bundledQuery),readTime:kt(a.readTime)}}(t)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(){this.overlays=new lt(oe.comparator),this.qr=new Map}getOverlay(e,t){return F.resolve(this.overlays.get(t))}getOverlays(e,t){const n=ti();return F.forEach(t,a=>this.getOverlay(e,a).next(l=>{l!==null&&n.set(a,l)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((a,l)=>{this.St(e,t,l)}),F.resolve()}removeOverlaysForBatchId(e,t,n){const a=this.qr.get(n);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.qr.delete(n)),F.resolve()}getOverlaysForCollection(e,t,n){const a=ti(),l=t.length+1,c=new oe(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const m=f.getNext().value,g=m.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&m.largestBatchId>n&&a.set(m.getKey(),m)}return F.resolve(a)}getOverlaysForCollectionGroup(e,t,n,a){let l=new lt((g,_)=>g-_);const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>n){let _=l.get(g.largestBatchId);_===null&&(_=ti(),l=l.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const f=ti(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((g,_)=>f.set(g,_)),!(f.size()>=a)););return F.resolve(f)}St(e,t,n){const a=this.overlays.get(n.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(n.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(n.key,new G_(t,n));let l=this.qr.get(t);l===void 0&&(l=Ne(),this.qr.set(t,l)),this.qr.set(t,l.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(){this.sessionToken=St.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(){this.Qr=new Ze(nn.$r),this.Ur=new Ze(nn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new nn(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(n=>this.addReference(n,t))}removeReference(e,t){this.Gr(new nn(e,t))}zr(e,t){e.forEach(n=>this.removeReference(n,t))}jr(e){const t=new oe(new Le([])),n=new nn(t,e),a=new nn(t,e+1),l=[];return this.Ur.forEachInRange([n,a],c=>{this.Gr(c),l.push(c.key)}),l}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new oe(new Le([])),n=new nn(t,e),a=new nn(t,e+1);let l=Ne();return this.Ur.forEachInRange([n,a],c=>{l=l.add(c.key)}),l}containsKey(e){const t=new nn(e,0),n=this.Qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class nn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return oe.comparator(e.key,t.key)||Ce(e.Yr,t.Yr)}static Kr(e,t){return Ce(e.Yr,t.Yr)||oe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ze(nn.$r)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new B_(l,t,n,a);this.mutationQueue.push(c);for(const f of a)this.Zr=this.Zr.add(new nn(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return F.resolve(c)}lookupMutationBatch(e,t){return F.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,a=this.ei(n),l=a<0?0:a;return F.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?Vs:this.tr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new nn(t,0),a=new nn(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([n,a],c=>{const f=this.Xr(c.Yr);l.push(f)}),F.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ze(Ce);return t.forEach(a=>{const l=new nn(a,0),c=new nn(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],f=>{n=n.add(f.Yr)})}),F.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,a=n.length+1;let l=n;oe.isDocumentKey(l)||(l=l.child(""));const c=new nn(new oe(l),0);let f=new Ze(Ce);return this.Zr.forEachWhile(m=>{const g=m.key.path;return!!n.isPrefixOf(g)&&(g.length===a&&(f=f.add(m.Yr)),!0)},c),F.resolve(this.ti(f))}ti(e){const t=[];return e.forEach(n=>{const a=this.Xr(n);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){_e(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return F.forEach(t.mutations,a=>{const l=new nn(a.key,t.batchId);return n=n.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new nn(t,0),a=this.Zr.firstAfterOrEqual(n);return F.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e){this.ri=e,this.docs=function(){return new lt(oe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,a=this.docs.get(n),l=a?a.size:0,c=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return F.resolve(n?n.document.mutableCopy():ut.newInvalidDocument(t))}getEntries(e,t){let n=jn();return t.forEach(a=>{const l=this.docs.get(a);n=n.insert(a,l?l.document.mutableCopy():ut.newInvalidDocument(a))}),F.resolve(n)}getDocumentsMatchingQuery(e,t,n,a){let l=jn();const c=t.path,f=new oe(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:g,value:{document:_}}=m.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||C_(_I(_),n)<=0||(a.has(_.key)||Ch(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return F.resolve(l)}getAllFromCollectionGroup(e,t,n,a){me(9500)}ii(e,t){return F.forEach(this.docs,n=>t(n))}newChangeBuffer(e){return new wP(this)}getSize(e){return F.resolve(this.size)}}class wP extends US{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(n)}),F.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e){this.persistence=e,this.si=new Gi(t=>no(t),Rh),this.lastRemoteSnapshotVersion=ve.min(),this.highestTargetId=0,this.oi=0,this._i=new $_,this.targetCount=0,this.ai=oo.ur()}forEachTarget(e,t){return this.si.forEach((n,a)=>t(a)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),F.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new oo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,F.resolve()}updateTargetData(e,t){return this.Pr(t),F.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,t,n){let a=0;const l=[];return this.si.forEach((c,f)=>{f.sequenceNumber<=t&&n.get(f.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),a++)}),F.waitFor(l).next(()=>a)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return F.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),F.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(c=>{l.push(a.markPotentiallyOrphaned(e,c))}),F.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),F.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return F.resolve(n)}containsKey(e,t){return F.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e,t){this.ui={},this.overlays={},this.ci=new Un(0),this.li=!1,this.li=!0,this.hi=new vP,this.referenceDelegate=e(this),this.Pi=new bP(this),this.indexManager=new oP,this.remoteDocumentCache=function(a){return new TP(a)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new xS(t),this.Ii=new yP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new _P,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new EP(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){te("MemoryPersistence","Starting transaction:",e);const a=new AP(this.ci.next());return this.referenceDelegate.Ei(),n(a).next(l=>this.referenceDelegate.di(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Ai(e,t){return F.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class AP extends EI{constructor(e){super(),this.currentSequenceNumber=e}}class xm{constructor(e){this.persistence=e,this.Ri=new $_,this.Vi=null}static mi(e){return new xm(e)}get fi(){if(this.Vi)return this.Vi;throw me(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),F.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),F.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),F.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(a=>this.fi.add(a.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.fi.add(l.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.fi,n=>{const a=oe.fromPath(n);return this.gi(e,a).next(l=>{l||t.removeEntry(a,ve.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(n=>{n?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return F.or([()=>F.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class tm{constructor(e,t){this.persistence=e,this.pi=new Gi(n=>wn(n.path),(n,a)=>n.isEqual(a)),this.garbageCollector=LS(this,t)}static mi(e,t){return new tm(e,t)}Ei(){}di(e){return F.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>t.next(a=>n+a))}wr(e){let t=0;return this.pr(e,n=>{t++}).next(()=>t)}pr(e,t){return F.forEach(this.pi,(n,a)=>this.br(e,n,a).next(l=>l?F.resolve():t(a)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,c=>this.br(e,c,t).next(f=>{f||(n++,l.removeEntry(c,ve.min()))})).next(()=>l.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),F.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),F.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),F.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Pf(e.data.value)),t}br(e,t,n){return F.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return F.resolve(a!==void 0&&a>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e){this.serializer=e}k(e,t,n,a){const l=new ym("createOrUpgrade",t);n<1&&a>=1&&(function(m){m.createObjectStore(Sh)}(e),function(m){m.createObjectStore(sh,{keyPath:zN}),m.createObjectStore(Sr,{keyPath:H0,autoIncrement:!0}).createIndex(Wa,K0,{unique:!0}),m.createObjectStore(Ol)}(e),Ob(e),function(m){m.createObjectStore(Ba)}(e));let c=F.resolve();return n<3&&a>=3&&(n!==0&&(function(m){m.deleteObjectStore(Ll),m.deleteObjectStore(Ml),m.deleteObjectStore(Ja)}(e),Ob(e)),c=c.next(()=>function(m){const g=m.store(Ja),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ve.min().toTimestamp(),targetCount:0};return g.put(Wf,_)}(l))),n<4&&a>=4&&(n!==0&&(c=c.next(()=>function(m,g){return g.store(Sr).J().next(T=>{m.deleteObjectStore(Sr),m.createObjectStore(Sr,{keyPath:H0,autoIncrement:!0}).createIndex(Wa,K0,{unique:!0});const A=g.store(Sr),k=T.map(K=>A.put(K));return F.waitFor(k)})}(e,l))),c=c.next(()=>{(function(m){m.createObjectStore(Ul,{keyPath:$N})})(e)})),n<5&&a>=5&&(c=c.next(()=>this.yi(l))),n<6&&a>=6&&(c=c.next(()=>(function(m){m.createObjectStore(ah)}(e),this.wi(l)))),n<7&&a>=7&&(c=c.next(()=>this.Si(l))),n<8&&a>=8&&(c=c.next(()=>this.bi(e,l))),n<9&&a>=9&&(c=c.next(()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(e)})),n<10&&a>=10&&(c=c.next(()=>this.Di(l))),n<11&&a>=11&&(c=c.next(()=>{(function(m){m.createObjectStore(_m,{keyPath:XN})})(e),function(m){m.createObjectStore(vm,{keyPath:JN})}(e)})),n<12&&a>=12&&(c=c.next(()=>{(function(m){const g=m.createObjectStore(Em,{keyPath:sD});g.createIndex(Oy,aD,{unique:!1}),g.createIndex(xI,oD,{unique:!1})})(e)})),n<13&&a>=13&&(c=c.next(()=>function(m){const g=m.createObjectStore(Qf,{keyPath:qN});g.createIndex(Nf,GN),g.createIndex(AI,HN)}(e)).next(()=>this.Ci(e,l)).next(()=>e.deleteObjectStore(Ba))),n<14&&a>=14&&(c=c.next(()=>this.Fi(e,l))),n<15&&a>=15&&(c=c.next(()=>function(m){m.createObjectStore(P_,{keyPath:ZN,autoIncrement:!0}).createIndex(Vy,eD,{unique:!1}),m.createObjectStore(Bc,{keyPath:tD}).createIndex(SI,nD,{unique:!1}),m.createObjectStore(qc,{keyPath:rD}).createIndex(RI,iD,{unique:!1})}(e))),n<16&&a>=16&&(c=c.next(()=>{t.objectStore(Bc).clear()}).next(()=>{t.objectStore(qc).clear()})),n<17&&a>=17&&(c=c.next(()=>{(function(m){m.createObjectStore(k_,{keyPath:lD})})(e)})),n<18&&a>=18&&GA()&&(c=c.next(()=>{t.objectStore(Bc).clear()}).next(()=>{t.objectStore(qc).clear()})),c}wi(e){let t=0;return e.store(Ba).ee((n,a)=>{t+=em(a)}).next(()=>{const n={byteSize:t};return e.store(ah).put(ky,n)})}yi(e){const t=e.store(sh),n=e.store(Sr);return t.J().next(a=>F.forEach(a,l=>{const c=IDBKeyRange.bound([l.userId,Vs],[l.userId,l.lastAcknowledgedBatchId]);return n.J(Wa,c).next(f=>F.forEach(f,m=>{_e(m.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:m.batchId});const g=Ga(this.serializer,m);return kS(e,l.userId,g).next(()=>{})}))}))}Si(e){const t=e.store(Ll),n=e.store(Ba);return e.store(Ja).get(Wf).next(a=>{const l=[];return n.ee((c,f)=>{const m=new Le(c),g=function(T){return[0,wn(T)]}(m);l.push(t.get(g).next(_=>_?F.resolve():(T=>t.put({targetId:0,path:wn(T),sequenceNumber:a.highestListenSequenceNumber}))(m)))}).next(()=>F.waitFor(l))})}bi(e,t){e.createObjectStore(oh,{keyPath:YN});const n=t.store(oh),a=new Y_,l=c=>{if(a.add(c)){const f=c.lastSegment(),m=c.popLast();return n.put({collectionId:f,parent:wn(m)})}};return t.store(Ba).ee({X:!0},(c,f)=>{const m=new Le(c);return l(m.popLast())}).next(()=>t.store(Ol).ee({X:!0},([c,f,m],g)=>{const _=ei(f);return l(_.popLast())}))}Di(e){const t=e.store(Ml);return t.ee((n,a)=>{const l=Mc(a),c=CS(this.serializer,l);return t.put(c)})}Ci(e,t){const n=t.store(Ba),a=[];return n.ee((l,c)=>{const f=t.store(Qf),m=function(T){return T.document?new oe(Le.fromString(T.document.name).popFirst(5)):T.noDocument?oe.fromSegments(T.noDocument.path):T.unknownDocument?oe.fromSegments(T.unknownDocument.path):me(36783)}(c).path.toArray(),g={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(f.put(g))}).next(()=>F.waitFor(a))}Fi(e,t){const n=t.store(Sr),a=FS(this.serializer),l=new X_(xm.mi,this.serializer.yt);return n.J().next(c=>{const f=new Map;return c.forEach(m=>{let g=f.get(m.userId)??Ne();Ga(this.serializer,m).keys().forEach(_=>g=g.add(_)),f.set(m.userId,g)}),F.forEach(f,(m,g)=>{const _=new rn(g),T=Sm.wt(this.serializer,_),A=l.getIndexManager(_),k=Rm.wt(_,this.serializer,A,l.referenceDelegate);return new jS(a,k,T,A).recalculateAndSaveOverlaysForDocumentKeys(new My(t,Un.ce),m).next()})})}}function Ob(i){i.createObjectStore(Ll,{keyPath:QN}).createIndex(D_,WN,{unique:!0}),i.createObjectStore(Ml,{keyPath:"targetId"}).createIndex(II,KN,{unique:!0}),i.createObjectStore(Ja)}const Is="IndexedDbPersistence",hy=18e5,dy=5e3,fy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",zS="main";class J_{constructor(e,t,n,a,l,c,f,m,g,_,T=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Mi=l,this.window=c,this.document=f,this.xi=g,this.Oi=_,this.Ni=T,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=A=>Promise.resolve(),!J_.v())throw new Z(H.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new fP(this,a),this.$i=t+zS,this.serializer=new xS(m),this.Ui=new ri(this.$i,this.Ni,new IP(this.serializer)),this.hi=new tP,this.Pi=new uP(this.referenceDelegate,this.serializer),this.remoteDocumentCache=FS(this.serializer),this.Ii=new eP,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,_===!1&&Pt(Is,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Z(H.FAILED_PRECONDITION,fy);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new Un(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>bf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(t=>this.isPrimary&&!t?this.Zi(e).next(()=>!1):!!t&&this.Xi(e).next(()=>!0))).catch(e=>{if(Xs(e))return te(Is,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return te(Is,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return Rc(e).get(dl).next(t=>F.resolve(this.es(t)))}ts(e){return bf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,hy)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const n=$t(t,Ul);return n.J().next(a=>{const l=this.ss(a,hy),c=a.filter(f=>l.indexOf(f)===-1);return F.forEach(c,f=>n.delete(f.clientId)).next(()=>c)})}).catch(()=>[]);if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?F.resolve(!0):Rc(e).get(dl).next(t=>{if(t!==null&&this.rs(t.leaseTimestampMs,dy)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new Z(H.FAILED_PRECONDITION,fy);return!1}}return!(!this.networkEnabled||!this.inForeground)||bf(e).J().next(n=>this.ss(n,dy).find(a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,f=this.networkEnabled===a.networkEnabled;if(l||c&&f)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&te(Is,`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Sh,Ul],e=>{const t=new My(e,Un.ce);return this.Zi(t).next(()=>this.ts(t))}),this.Ui.close(),this.Ps()}ss(e,t){return e.filter(n=>this.rs(n.updateTimeMs,t)&&!this.us(n.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>bf(e).J().next(t=>this.ss(t,hy).map(n=>n.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return Rm.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new lP(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Sm.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,n){te(Is,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=function(m){return m===18?hD:m===17?PI:m===16?cD:m===15?V_:m===14?DI:m===13?NI:m===12?uD:m===11?CI:void me(60245)}(this.Ni);let c;return this.Ui.runTransaction(e,a,l,f=>(c=new My(f,this.ci?this.ci.next():Un.ce),t==="readwrite-primary"?this.Hi(c).next(m=>!!m||this.Yi(c)).next(m=>{if(!m)throw Pt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new Z(H.FAILED_PRECONDITION,vI);return n(c)}).next(m=>this.Xi(c).next(()=>m)):this.Is(c).next(()=>n(c)))).then(f=>(c.raiseOnCommittedEvent(),f))}Is(e){return Rc(e).get(dl).next(t=>{if(t!==null&&this.rs(t.leaseTimestampMs,dy)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Z(H.FAILED_PRECONDITION,fy)})}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Rc(e).put(dl,t)}static v(){return ri.v()}Zi(e){const t=Rc(e);return t.get(dl).next(n=>this.es(n)?(te(Is,"Releasing primary lease."),t.delete(dl)):F.resolve())}rs(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Pt(`Detected an update time that is in the future: ${e} > ${n}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const t=/(?:Version|Mobile)\/1[456]/;qA()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var t;try{const n=((t=this.Ki)==null?void 0:t.getItem(this._s(e)))!==null;return te(Is,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return Pt(Is,"Failed to get zombied client id.",n),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Pt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Rc(i){return $t(i,Sh)}function bf(i){return $t(i,Ul)}function Z_(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(e,t,n,a){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=a}static As(e,t){let n=Ne(),a=Ne();for(const l of t.docChanges)switch(l.type){case 0:n=n.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new ev(e,t.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return qA()?8:TI(Tt())>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,a){const l={result:null};return this.ys(e,t).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.ws(e,t,a,n).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new SP;return this.Ss(e,t,c).next(f=>{if(l.result=f,this.Vs)return this.bs(e,t,c,f.size)})}).next(()=>l.result)}bs(e,t,n,a){return n.documentReadCount<this.fs?(vl()<=Me.DEBUG&&te("QueryEngine","SDK will not create cache indexes for query:",El(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),F.resolve()):(vl()<=Me.DEBUG&&te("QueryEngine","Query:",El(t),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.gs*a?(vl()<=Me.DEBUG&&te("QueryEngine","The SDK decides to create cache indexes for query:",El(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Dn(t))):F.resolve())}ys(e,t){if(sb(t))return F.resolve(null);let n=Dn(t);return this.indexManager.getIndexType(e,n).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=Xf(t,null,"F"),n=Dn(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(l=>{const c=Ne(...l);return this.ps.getDocuments(e,c).next(f=>this.indexManager.getMinOffset(e,n).next(m=>{const g=this.Ds(t,f);return this.Cs(t,g,c,m.readTime)?this.ys(e,Xf(t,null,"F")):this.vs(e,g,t,m)}))})))}ws(e,t,n,a){return sb(t)||a.isEqual(ve.min())?F.resolve(null):this.ps.getDocuments(e,n).next(l=>{const c=this.Ds(t,l);return this.Cs(t,c,n,a)?F.resolve(null):(vl()<=Me.DEBUG&&te("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),El(t)),this.vs(e,c,t,yI(a,Vl)).next(f=>f))})}Ds(e,t){let n=new Ze(ZI(e));return t.forEach((a,l)=>{Ch(e,l)&&(n=n.add(l))}),n}Cs(e,t,n,a){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,n){return vl()<=Me.DEBUG&&te("QueryEngine","Using full collection scan to execute query:",El(t)),this.ps.getDocumentsMatchingQuery(e,t,er.min(),n)}vs(e,t,n,a){return this.ps.getDocumentsMatchingQuery(e,n,a).next(l=>(t.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv="LocalStore",RP=3e8;class xP{constructor(e,t,n,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new lt(Ce),this.xs=new Gi(l=>no(l),Rh),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function qS(i,e,t,n){return new xP(i,e,t,n)}async function GS(i,e){const t=he(i);return await t.persistence.runTransaction("Handle user change","readonly",n=>{let a;return t.mutationQueue.getAllMutationBatches(n).next(l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(n))).next(l=>{const c=[],f=[];let m=Ne();for(const g of a){c.push(g.batchId);for(const _ of g.mutations)m=m.add(_.key)}for(const g of l){f.push(g.batchId);for(const _ of g.mutations)m=m.add(_.key)}return t.localDocuments.getDocuments(n,m).next(g=>({Ls:g,removedBatchIds:c,addedBatchIds:f}))})})}function CP(i,e){const t=he(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return function(f,m,g,_){const T=g.batch,A=T.keys();let k=F.resolve();return A.forEach(K=>{k=k.next(()=>_.getEntry(m,K)).next(G=>{const W=g.docVersions.get(K);_e(W!==null,48541),G.version.compareTo(W)<0&&(T.applyToRemoteDocument(G,g),G.isValidDocument()&&(G.setReadTime(g.commitVersion),_.addEntry(G)))})}),k.next(()=>f.mutationQueue.removeMutationBatch(m,T))}(t,n,e,l).next(()=>l.apply(n)).next(()=>t.mutationQueue.performConsistencyCheck(n)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(n,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(f){let m=Ne();for(let g=0;g<f.mutationResults.length;++g)f.mutationResults[g].transformResults.length>0&&(m=m.add(f.batch.mutations[g].key));return m}(e))).next(()=>t.localDocuments.getDocuments(n,a))})}function HS(i){const e=he(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function NP(i,e){const t=he(i),n=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const f=[];e.targetChanges.forEach((_,T)=>{const A=a.get(T);if(!A)return;f.push(t.Pi.removeMatchingKeys(l,_.removedDocuments,T).next(()=>t.Pi.addMatchingKeys(l,_.addedDocuments,T)));let k=A.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?k=k.withResumeToken(St.EMPTY_BYTE_STRING,ve.min()).withLastLimboFreeSnapshotVersion(ve.min()):_.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(_.resumeToken,n)),a=a.insert(T,k),function(G,W,re){return G.resumeToken.approximateByteSize()===0||W.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=RP?!0:re.addedDocuments.size+re.modifiedDocuments.size+re.removedDocuments.size>0}(A,k,_)&&f.push(t.Pi.updateTargetData(l,k))});let m=jn(),g=Ne();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))}),f.push(KS(l,c,e.documentUpdates).next(_=>{m=_.ks,g=_.qs})),!n.isEqual(ve.min())){const _=t.Pi.getLastRemoteSnapshotVersion(l).next(T=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,n));f.push(_)}return F.waitFor(f).next(()=>c.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,m,g)).next(()=>m)}).then(l=>(t.Ms=a,l))}function KS(i,e,t){let n=Ne(),a=Ne();return t.forEach(l=>n=n.add(l)),e.getEntries(i,n).next(l=>{let c=jn();return t.forEach((f,m)=>{const g=l.get(f);m.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(f)),m.isNoDocument()&&m.version.isEqual(ve.min())?(e.removeEntry(f,m.readTime),c=c.insert(f,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(m),c=c.insert(f,m)):te(tv,"Ignoring outdated watch update for ",f,". Current version:",g.version," Watch version:",m.version)}),{ks:c,qs:a}})}function DP(i,e){const t=he(i);return t.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=Vs),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function Hl(i,e){const t=he(i);return t.persistence.runTransaction("Allocate target","readwrite",n=>{let a;return t.Pi.getTargetData(n,e).next(l=>l?(a=l,F.resolve(a)):t.Pi.allocateTargetId(n).next(c=>(a=new Oi(e,c,"TargetPurposeListen",n.currentSequenceNumber),t.Pi.addTargetData(n,a).next(()=>a))))}).then(n=>{const a=t.Ms.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(n.targetId,n),t.xs.set(e,n.targetId)),n})}async function Kl(i,e,t){const n=he(i),a=n.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",l,c=>n.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!Xs(c))throw c;te(tv,`Failed to update sequence numbers for target ${e}: ${c}`)}n.Ms=n.Ms.remove(e),n.xs.delete(a.target)}function nm(i,e,t){const n=he(i);let a=ve.min(),l=Ne();return n.persistence.runTransaction("Execute query","readwrite",c=>function(m,g,_){const T=he(m),A=T.xs.get(_);return A!==void 0?F.resolve(T.Ms.get(A)):T.Pi.getTargetData(g,_)}(n,c,Dn(e)).next(f=>{if(f)return a=f.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(c,f.targetId).next(m=>{l=m})}).next(()=>n.Fs.getDocumentsMatchingQuery(c,e,t?a:ve.min(),t?l:Ne())).next(f=>(YS(n,JI(e),f),{documents:f,Qs:l})))}function QS(i,e){const t=he(i),n=he(t.Pi),a=t.Ms.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",l=>n.At(l,e).next(c=>c?c.target:null))}function WS(i,e){const t=he(i),n=t.Os.get(e)||ve.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.Ns.getAllFromCollectionGroup(a,e,yI(n,Vl),Number.MAX_SAFE_INTEGER)).then(a=>(YS(t,e,a),a))}function YS(i,e,t){let n=i.Os.get(e)||ve.min();t.forEach((a,l)=>{l.readTime.compareTo(n)>0&&(n=l.readTime)}),i.Os.set(e,n)}async function PP(i,e,t,n){const a=he(i);let l=Ne(),c=jn();for(const g of t){const _=e.$s(g.metadata.name);g.document&&(l=l.add(_));const T=e.Us(g);T.setReadTime(e.Ks(g.metadata.readTime)),c=c.insert(_,T)}const f=a.Ns.newChangeBuffer({trackRemovals:!0}),m=await Hl(a,function(_){return Dn(ru(Le.fromString(`__bundle__/docs/${_}`)))}(n));return a.persistence.runTransaction("Apply bundle documents","readwrite",g=>KS(g,f,c).next(_=>(f.apply(g),_)).next(_=>a.Pi.removeMatchingKeysForTargetId(g,m.targetId).next(()=>a.Pi.addMatchingKeys(g,l,m.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(g,_.ks,_.qs)).next(()=>_.ks)))}async function kP(i,e,t=Ne()){const n=await Hl(i,Dn(Q_(e.bundledQuery))),a=he(i);return a.persistence.runTransaction("Save named query","readwrite",l=>{const c=kt(e.readTime);if(n.snapshotVersion.compareTo(c)>=0)return a.Ii.saveNamedQuery(l,e);const f=n.withResumeToken(St.EMPTY_BYTE_STRING,c);return a.Ms=a.Ms.insert(f.targetId,f),a.Pi.updateTargetData(l,f).next(()=>a.Pi.removeMatchingKeysForTargetId(l,n.targetId)).next(()=>a.Pi.addMatchingKeys(l,t,n.targetId)).next(()=>a.Ii.saveNamedQuery(l,e))})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S="firestore_clients";function Mb(i,e){return`${$S}_${i}_${e}`}const XS="firestore_mutations";function Lb(i,e,t){let n=`${XS}_${i}_${t}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}const JS="firestore_targets";function my(i,e){return`${JS}_${i}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr="SharedClientState";class rm{constructor(e,t,n,a){this.user=e,this.batchId=t,this.state=n,this.error=a}static Ws(e,t,n){const a=JSON.parse(n);let l,c=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return c&&a.error&&(c=typeof a.error.message=="string"&&typeof a.error.code=="string",c&&(l=new Z(a.error.code,a.error.message))),c?new rm(e,t,a.state,l):(Pt(Yr,`Failed to parse mutation state for ID '${t}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Qc{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Ws(e,t){const n=JSON.parse(t);let a,l=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return l&&n.error&&(l=typeof n.error.message=="string"&&typeof n.error.code=="string",l&&(a=new Z(n.error.code,n.error.message))),l?new Qc(e,n.state,a):(Pt(Yr,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class im{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const n=JSON.parse(t);let a=typeof n=="object"&&n.activeTargetIds instanceof Array,l=F_();for(let c=0;a&&c<n.activeTargetIds.length;++c)a=wI(n.activeTargetIds[c]),l=l.add(n.activeTargetIds[c]);return a?new im(e,l):(Pt(Yr,`Failed to parse client data for instance '${e}': ${t}`),null)}}class nv{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new nv(t.clientId,t.onlineState):(Pt(Yr,`Failed to parse online state: ${e}`),null)}}class Xy{constructor(){this.activeTargetIds=F_()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class py{constructor(e,t,n,a,l){this.window=e,this.Mi=t,this.persistenceKey=n,this.Js=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new lt(Ce),this.started=!1,this.Xs=[];const c=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.eo=Mb(this.persistenceKey,this.Js),this.no=function(m){return`firestore_sequence_number_${m}`}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Xy),this.ro=new RegExp(`^${$S}_${c}_([^_]*)$`),this.io=new RegExp(`^${XS}_${c}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${JS}_${c}_(\\d+)$`),this.oo=function(m){return`firestore_online_state_${m}`}(this.persistenceKey),this._o=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const n of e){if(n===this.Js)continue;const a=this.getItem(Mb(this.persistenceKey,n));if(a){const l=im.Ws(n,a);l&&(this.Zs=this.Zs.insert(l.clientId,l))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const n=this.uo(t);n&&this.co(n)}for(const n of this.Xs)this.Ys(n);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach((n,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,n){this.ho(e,t,n),this.Po(e)}addLocalQueryTarget(e,t=!0){let n="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(my(this.persistenceKey,e));if(a){const l=Qc.Ws(e,a);l&&(n=l.state)}}return t&&this.To.zs(e),this.ao(),n}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(my(this.persistenceKey,e))}updateQueryState(e,t,n){this.Io(e,t,n)}handleUserChange(e,t,n){t.forEach(a=>{this.Po(a)}),this.currentUser=e,n.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return te(Yr,"READ",e,t),t}setItem(e,t){te(Yr,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){te(Yr,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(te(Yr,"EVENT",t.key,t.newValue),t.key===this.eo)return void Pt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const n=this.Ro(t.key);return this.Vo(n,null)}{const n=this.mo(t.key,t.newValue);if(n)return this.Vo(n.clientId,n)}}else if(this.io.test(t.key)){if(t.newValue!==null){const n=this.fo(t.key,t.newValue);if(n)return this.po(n)}}else if(this.so.test(t.key)){if(t.newValue!==null){const n=this.yo(t.key,t.newValue);if(n)return this.wo(n)}}else if(t.key===this.oo){if(t.newValue!==null){const n=this.uo(t.newValue);if(n)return this.co(n)}}else if(t.key===this.no){const n=function(l){let c=Un.ce;if(l!=null)try{const f=JSON.parse(l);_e(typeof f=="number",30636,{So:l}),c=f}catch(f){Pt(Yr,"Failed to read sequence number from WebStorage",f)}return c}(t.newValue);n!==Un.ce&&this.sequenceNumberHandler(n)}else if(t.key===this._o){const n=this.bo(t.newValue);await Promise.all(n.map(a=>this.syncEngine.Do(a)))}}}else this.Xs.push(t)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,n){const a=new rm(this.currentUser,e,t,n),l=Lb(this.persistenceKey,this.currentUser,e);this.setItem(l,a.Gs())}Po(e){const t=Lb(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,n){const a=my(this.persistenceKey,e),l=new Qc(e,t,n);this.setItem(a,l.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const n=this.Ro(e);return im.Ws(n,t)}fo(e,t){const n=this.io.exec(e),a=Number(n[1]),l=n[2]!==void 0?n[2]:null;return rm.Ws(new rn(l),a,t)}yo(e,t){const n=this.so.exec(e),a=Number(n[1]);return Qc.Ws(a,t)}uo(e){return nv.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);te(Yr,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const n=t?this.Zs.insert(e,t):this.Zs.remove(e),a=this.lo(this.Zs),l=this.lo(n),c=[],f=[];return l.forEach(m=>{a.has(m)||c.push(m)}),a.forEach(m=>{l.has(m)||f.push(m)}),this.syncEngine.Fo(c,f).then(()=>{this.Zs=n})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=F_();return e.forEach((n,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class ZS{constructor(){this.Mo=new Xy,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Xy,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub="ConnectivityMonitor";class Fb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){te(Ub,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){te(Ub,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Af=null;function Jy(){return Af===null?Af=function(){return 268435456+Math.round(2147483648*Math.random())}():Af++,"0x"+Af.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy="RestConnection",OP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class MP{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${a}`,this.Wo=this.databaseId.database===Ly?`project_id=${n}`:`project_id=${n}&database_id=${a}`}Go(e,t,n,a,l){const c=Jy(),f=this.zo(e,t.toUriEncodedString());te(gy,`Sending RPC '${e}' ${c}:`,f,n);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,a,l);const{host:g}=new URL(f),_=eu(g);return this.Jo(e,f,m,n,_).then(T=>(te(gy,`Received RPC '${e}' ${c}: `,T),T),T=>{throw oi(gy,`RPC '${e}' ${c} failed with error: `,T,"url: ",f,"request:",n),T})}Ho(e,t,n,a,l,c){return this.Go(e,t,n,a,l)}jo(e,t,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+nu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),n&&n.headers.forEach((a,l)=>e[l]=a)}zo(e,t){const n=OP[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vn="WebChannelConnection";class UP extends MP{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,a,l){const c=Jy();return new Promise((f,m)=>{const g=new aI;g.setWithCredentials(!0),g.listenOnce(oI.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case Rf.NO_ERROR:const T=g.getResponseJson();te(vn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(T)),f(T);break;case Rf.TIMEOUT:te(vn,`RPC '${e}' ${c} timed out`),m(new Z(H.DEADLINE_EXCEEDED,"Request time out"));break;case Rf.HTTP_ERROR:const A=g.getStatus();if(te(vn,`RPC '${e}' ${c} failed with status:`,A,"response text:",g.getResponseText()),A>0){let k=g.getResponseJson();Array.isArray(k)&&(k=k[0]);const K=k==null?void 0:k.error;if(K&&K.status&&K.message){const G=function(re){const de=re.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(de)>=0?de:H.UNKNOWN}(K.status);m(new Z(G,K.message))}else m(new Z(H.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new Z(H.UNAVAILABLE,"Connection failed."));break;default:me(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{te(vn,`RPC '${e}' ${c} completed.`)}});const _=JSON.stringify(a);te(vn,`RPC '${e}' ${c} sending request:`,a),g.send(t,"POST",_,n,15)})}T_(e,t,n){const a=Jy(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=cI(),f=uI(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,n),m.encodeInitMessageHeaders=!0;const _=l.join("");te(vn,`Creating RPC '${e}' stream ${a}: ${_}`,m);const T=c.createWebChannel(_,m);this.I_(T);let A=!1,k=!1;const K=new LP({Yo:W=>{k?te(vn,`Not sending because RPC '${e}' stream ${a} is closed:`,W):(A||(te(vn,`Opening RPC '${e}' stream ${a} transport.`),T.open(),A=!0),te(vn,`RPC '${e}' stream ${a} sending:`,W),T.send(W))},Zo:()=>T.close()}),G=(W,re,de)=>{W.listen(re,le=>{try{de(le)}catch(we){setTimeout(()=>{throw we},0)}})};return G(T,kc.EventType.OPEN,()=>{k||(te(vn,`RPC '${e}' stream ${a} transport opened.`),K.o_())}),G(T,kc.EventType.CLOSE,()=>{k||(k=!0,te(vn,`RPC '${e}' stream ${a} transport closed`),K.a_(),this.E_(T))}),G(T,kc.EventType.ERROR,W=>{k||(k=!0,oi(vn,`RPC '${e}' stream ${a} transport errored. Name:`,W.name,"Message:",W.message),K.a_(new Z(H.UNAVAILABLE,"The operation could not be completed")))}),G(T,kc.EventType.MESSAGE,W=>{var re;if(!k){const de=W.data[0];_e(!!de,16349);const le=de,we=(le==null?void 0:le.error)||((re=le[0])==null?void 0:re.error);if(we){te(vn,`RPC '${e}' stream ${a} received error:`,we);const pe=we.status;let Ie=function(C){const V=Ft[C];if(V!==void 0)return dS(V)}(pe),R=we.message;Ie===void 0&&(Ie=H.INTERNAL,R="Unknown error status: "+pe+" with message "+we.message),k=!0,K.a_(new Z(Ie,R)),T.close()}else te(vn,`RPC '${e}' stream ${a} received:`,de),K.u_(de)}}),G(f,lI.STAT_EVENT,W=>{W.stat===Ny.PROXY?te(vn,`RPC '${e}' stream ${a} detected buffering proxy`):W.stat===Ny.NOPROXY&&te(vn,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{K.__()},0),K}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eR(){return typeof window<"u"?window:null}function Lf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kh(i){return new qD(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e,t,n=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-n);a>0&&te("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jb="PersistentStream";class tR{constructor(e,t,n,a,l,c,f,m){this.Mi=e,this.S_=n,this.b_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new rv(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===H.RESOURCE_EXHAUSTED?(Pt(t.toString()),Pt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,a])=>{this.D_===t&&this.G_(n,a)},n=>{e(()=>{const a=new Z(H.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(a)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(a=>{n(()=>this.z_(a))}),this.stream.onMessage(a=>{n(()=>++this.F_==1?this.J_(a):this.onNext(a))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return te(jb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(te(jb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class FP extends tR{constructor(e,t,n,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=KD(this.serializer,e),n=function(l){if(!("targetChange"in l))return ve.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?ve.min():c.readTime?kt(c.readTime):ve.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=Ky(this.serializer),t.addTarget=function(l,c){let f;const m=c.target;if(f=Yf(m)?{documents:wS(l,m)}:{query:bS(l,m).ft},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=gS(l,c.resumeToken);const g=Gy(l,c.expectedCount);g!==null&&(f.expectedCount=g)}else if(c.snapshotVersion.compareTo(ve.min())>0){f.readTime=Gl(l,c.snapshotVersion.toTimestamp());const g=Gy(l,c.expectedCount);g!==null&&(f.expectedCount=g)}return f}(this.serializer,e);const n=WD(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=Ky(this.serializer),t.removeTarget=e,this.q_(t)}}class jP extends tR{constructor(e,t,n,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,a,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return _e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,_e(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){_e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=QD(e.writeResults,e.commitTime),n=kt(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=Ky(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(n=>fh(this.serializer,n))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{}class BP extends zP{constructor(e,t,n,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Z(H.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Go(e,Hy(t,n),a,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Z(H.UNKNOWN,l.toString())})}Ho(e,t,n,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,f])=>this.connection.Ho(e,Hy(t,n),a,c,f,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Z(H.UNKNOWN,c.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class qP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Pt(t),this.aa=!1):te("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo="RemoteStore";class GP{constructor(e,t,n,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo(c=>{n.enqueueAndForget(async()=>{Zs(this)&&(te(lo,"Restarting streams for network reachability change."),await async function(m){const g=he(m);g.Ea.add(4),await au(g),g.Ra.set("Unknown"),g.Ea.delete(4),await Vh(g)}(this))})}),this.Ra=new qP(n,a)}}async function Vh(i){if(Zs(i))for(const e of i.da)await e(!0)}async function au(i){for(const e of i.da)await e(!1)}function Cm(i,e){const t=he(i);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),av(t)?sv(t):lu(t).O_()&&iv(t,e))}function Ql(i,e){const t=he(i),n=lu(t);t.Ia.delete(e),n.O_()&&nR(t,e),t.Ia.size===0&&(n.O_()?n.L_():Zs(t)&&t.Ra.set("Unknown"))}function iv(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ve.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}lu(i).Y_(e)}function nR(i,e){i.Va.Ue(e),lu(i).Z_(e)}function sv(i){i.Va=new FD({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),lu(i).start(),i.Ra.ua()}function av(i){return Zs(i)&&!lu(i).x_()&&i.Ia.size>0}function Zs(i){return he(i).Ea.size===0}function rR(i){i.Va=void 0}async function HP(i){i.Ra.set("Online")}async function KP(i){i.Ia.forEach((e,t)=>{iv(i,e)})}async function QP(i,e){rR(i),av(i)?(i.Ra.ha(e),sv(i)):i.Ra.set("Unknown")}async function WP(i,e,t){if(i.Ra.set("Online"),e instanceof pS&&e.state===2&&e.cause)try{await async function(a,l){const c=l.cause;for(const f of l.targetIds)a.Ia.has(f)&&(await a.remoteSyncer.rejectListen(f,c),a.Ia.delete(f),a.Va.removeTarget(f))}(i,e)}catch(n){te(lo,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await sm(i,n)}else if(e instanceof Of?i.Va.Ze(e):e instanceof mS?i.Va.st(e):i.Va.tt(e),!t.isEqual(ve.min()))try{const n=await HS(i.localStore);t.compareTo(n)>=0&&await function(l,c){const f=l.Va.Tt(c);return f.targetChanges.forEach((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const _=l.Ia.get(g);_&&l.Ia.set(g,_.withResumeToken(m.resumeToken,c))}}),f.targetMismatches.forEach((m,g)=>{const _=l.Ia.get(m);if(!_)return;l.Ia.set(m,_.withResumeToken(St.EMPTY_BYTE_STRING,_.snapshotVersion)),nR(l,m);const T=new Oi(_.target,m,g,_.sequenceNumber);iv(l,T)}),l.remoteSyncer.applyRemoteEvent(f)}(i,t)}catch(n){te(lo,"Failed to raise snapshot:",n),await sm(i,n)}}async function sm(i,e,t){if(!Xs(e))throw e;i.Ea.add(1),await au(i),i.Ra.set("Offline"),t||(t=()=>HS(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{te(lo,"Retrying IndexedDB access"),await t(),i.Ea.delete(1),await Vh(i)})}function iR(i,e){return e().catch(t=>sm(i,t,e))}async function ou(i){const e=he(i),t=Ks(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Vs;for(;YP(e);)try{const a=await DP(e.localStore,n);if(a===null){e.Ta.length===0&&t.L_();break}n=a.batchId,$P(e,a)}catch(a){await sm(e,a)}sR(e)&&aR(e)}function YP(i){return Zs(i)&&i.Ta.length<10}function $P(i,e){i.Ta.push(e);const t=Ks(i);t.O_()&&t.X_&&t.ea(e.mutations)}function sR(i){return Zs(i)&&!Ks(i).x_()&&i.Ta.length>0}function aR(i){Ks(i).start()}async function XP(i){Ks(i).ra()}async function JP(i){const e=Ks(i);for(const t of i.Ta)e.ea(t.mutations)}async function ZP(i,e,t){const n=i.Ta.shift(),a=q_.from(n,e,t);await iR(i,()=>i.remoteSyncer.applySuccessfulWrite(a)),await ou(i)}async function ek(i,e){e&&Ks(i).X_&&await async function(n,a){if(function(c){return hS(c)&&c!==H.ABORTED}(a.code)){const l=n.Ta.shift();Ks(n).B_(),await iR(n,()=>n.remoteSyncer.rejectFailedWrite(l.batchId,a)),await ou(n)}}(i,e),sR(i)&&aR(i)}async function zb(i,e){const t=he(i);t.asyncQueue.verifyOperationInProgress(),te(lo,"RemoteStore received new credentials");const n=Zs(t);t.Ea.add(3),await au(t),n&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Vh(t)}async function Zy(i,e){const t=he(i);e?(t.Ea.delete(2),await Vh(t)):e||(t.Ea.add(2),await au(t),t.Ra.set("Unknown"))}function lu(i){return i.ma||(i.ma=function(t,n,a){const l=he(t);return l.sa(),new FP(n,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(i.datastore,i.asyncQueue,{Xo:HP.bind(null,i),t_:KP.bind(null,i),r_:QP.bind(null,i),H_:WP.bind(null,i)}),i.da.push(async e=>{e?(i.ma.B_(),av(i)?sv(i):i.Ra.set("Unknown")):(await i.ma.stop(),rR(i))})),i.ma}function Ks(i){return i.fa||(i.fa=function(t,n,a){const l=he(t);return l.sa(),new jP(n,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:XP.bind(null,i),r_:ek.bind(null,i),ta:JP.bind(null,i),na:ZP.bind(null,i)}),i.da.push(async e=>{e?(i.fa.B_(),await ou(i)):(await i.fa.stop(),i.Ta.length>0&&(te(lo,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))})),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(e,t,n,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=a,this.removalCallback=l,this.deferred=new mn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,a,l){const c=Date.now()+n,f=new ov(e,t,c,a,l);return f.start(n),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function uu(i,e){if(Pt("AsyncQueue",`${e}: ${i}`),Xs(i))return new Z(H.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{static emptySet(e){return new Sl(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||oe.comparator(t.key,n.key):(t,n)=>oe.comparator(t.key,n.key),this.keyedMap=Vc(),this.sortedSet=new lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Sl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=n.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new Sl;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(){this.ga=new lt(oe.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):me(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class Wl{constructor(e,t,n,a,l,c,f,m,g){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(e,t,n,a,l){const c=[];return t.forEach(f=>{c.push({type:0,doc:f})}),new Wl(e,t,Sl.emptySet(t),c,n,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==n[a].type||!t[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class nk{constructor(){this.queries=qb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,n){const a=he(t),l=a.queries;a.queries=qb(),l.forEach((c,f)=>{for(const m of f.Sa)m.onError(n)})})(this,new Z(H.ABORTED,"Firestore shutting down"))}}function qb(){return new Gi(i=>XI(i),xh)}async function lv(i,e){const t=he(i);let n=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(n=2):(l=new tk,n=e.Da()?0:1);try{switch(n){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const f=uu(c,`Initialization of query '${El(e.query)}' failed`);return void e.onError(f)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&cv(t)}async function uv(i,e){const t=he(i),n=e.query;let a=3;const l=t.queries.get(n);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function rk(i,e){const t=he(i);let n=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const f of c.Sa)f.Fa(a)&&(n=!0);c.wa=a}}n&&cv(t)}function ik(i,e,t){const n=he(i),a=n.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);n.queries.delete(e)}function cv(i){i.Ca.forEach(e=>{e.next()})}var e_,Gb;(Gb=e_||(e_={})).Ma="default",Gb.Cache="cache";class hv{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const a of e.docChanges)a.type!==3&&n.push(a);e=new Wl(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const n=t!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Wl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==e_.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e,t){this.Qa=e,this.byteLength=t}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e){this.serializer=e}$s(e){return ii(this.serializer,e)}Us(e){return e.metadata.exists?TS(this.serializer,e.document,!1):ut.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return kt(e)}}class ak{constructor(e,t){this.Ua=e,this.serializer=t,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=oR(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++t;const n=Le.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,{...this.progress}):null}za(e){const t=new Map,n=new Hb(this.serializer);for(const a of e)if(a.metadata.queries){const l=n.$s(a.metadata.name);for(const c of a.metadata.queries){const f=(t.get(c)||Ne()).add(l);t.set(c,f)}}return t}async ja(e){const t=await PP(e,new Hb(this.serializer),this.Wa,this.Ua.id),n=this.za(this.documents);for(const a of this.Ka)await kP(e,a,n.get(a.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:t}}}function oR(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e){this.key=e}}class uR{constructor(e){this.key=e}}class cR{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ne(),this.mutatedKeys=Ne(),this.eu=ZI(e),this.tu=new Sl(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new Bb,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,f=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((_,T)=>{const A=a.get(_),k=Ch(this.query,T)?T:null,K=!!A&&this.mutatedKeys.has(A.key),G=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let W=!1;A&&k?A.data.isEqual(k.data)?K!==G&&(n.track({type:3,doc:k}),W=!0):this.su(A,k)||(n.track({type:2,doc:k}),W=!0,(m&&this.eu(k,m)>0||g&&this.eu(k,g)<0)&&(f=!0)):!A&&k?(n.track({type:0,doc:k}),W=!0):A&&!k&&(n.track({type:1,doc:A}),W=!0,(m||g)&&(f=!0)),W&&(k?(c=c.add(k),l=G?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),n.track({type:1,doc:_})}return{tu:c,iu:n,Cs:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort((_,T)=>function(k,K){const G=W=>{switch(W){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me(20277,{Rt:W})}};return G(k)-G(K)}(_.type,T.type)||this.eu(_.doc,T.doc)),this.ou(n),a=a??!1;const f=t&&!a?this._u():[],m=this.Xa.size===0&&this.current&&!a?1:0,g=m!==this.Za;return this.Za=m,c.length!==0||g?{snapshot:new Wl(this.query,e.tu,l,c,e.mutatedKeys,m===0,g,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Bb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ne(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const t=[];return e.forEach(n=>{this.Xa.has(n)||t.push(new uR(n))}),this.Xa.forEach(n=>{e.has(n)||t.push(new lR(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=Ne();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Wl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ea="SyncEngine";class ok{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class lk{constructor(e){this.key=e,this.hu=!1}}class uk{constructor(e,t,n,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Gi(f=>XI(f),xh),this.Iu=new Map,this.Eu=new Set,this.du=new lt(oe.comparator),this.Au=new Map,this.Ru=new $_,this.Vu={},this.mu=new Map,this.fu=oo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function ck(i,e,t=!0){const n=Nm(i);let a;const l=n.Tu.get(e);return l?(n.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await hR(n,e,t,!0),a}async function hk(i,e){const t=Nm(i);await hR(t,e,!0,!1)}async function hR(i,e,t,n){const a=await Hl(i.localStore,Dn(e)),l=a.targetId,c=i.sharedClientState.addLocalQueryTarget(l,t);let f;return n&&(f=await dv(i,e,l,c==="current",a.resumeToken)),i.isPrimaryClient&&t&&Cm(i.remoteStore,a),f}async function dv(i,e,t,n,a){i.pu=(T,A,k)=>async function(G,W,re,de){let le=W.view.ru(re);le.Cs&&(le=await nm(G.localStore,W.query,!1).then(({documents:R})=>W.view.ru(R,le)));const we=de&&de.targetChanges.get(W.targetId),pe=de&&de.targetMismatches.get(W.targetId)!=null,Ie=W.view.applyChanges(le,G.isPrimaryClient,we,pe);return t_(G,W.targetId,Ie.au),Ie.snapshot}(i,T,A,k);const l=await nm(i.localStore,e,!0),c=new cR(e,l.Qs),f=c.ru(l.documents),m=Ph.createSynthesizedTargetChangeForCurrentChange(t,n&&i.onlineState!=="Offline",a),g=c.applyChanges(f,i.isPrimaryClient,m);t_(i,t,g.au);const _=new ok(e,t,c);return i.Tu.set(e,_),i.Iu.has(t)?i.Iu.get(t).push(e):i.Iu.set(t,[e]),g.snapshot}async function dk(i,e,t){const n=he(i),a=n.Tu.get(e),l=n.Iu.get(a.targetId);if(l.length>1)return n.Iu.set(a.targetId,l.filter(c=>!xh(c,e))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await Kl(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),t&&Ql(n.remoteStore,a.targetId),Yl(n,a.targetId)}).catch($s)):(Yl(n,a.targetId),await Kl(n.localStore,a.targetId,!0))}async function fk(i,e){const t=he(i),n=t.Tu.get(e),a=t.Iu.get(n.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),Ql(t.remoteStore,n.targetId))}async function mk(i,e,t){const n=gv(i);try{const a=await function(c,f){const m=he(c),g=Et.now(),_=f.reduce((k,K)=>k.add(K.key),Ne());let T,A;return m.persistence.runTransaction("Locally write mutations","readwrite",k=>{let K=jn(),G=Ne();return m.Ns.getEntries(k,_).next(W=>{K=W,K.forEach((re,de)=>{de.isValidDocument()||(G=G.add(re))})}).next(()=>m.localDocuments.getOverlayedDocuments(k,K)).next(W=>{T=W;const re=[];for(const de of f){const le=MD(de,T.get(de.key).overlayedDocument);le!=null&&re.push(new Hi(de.key,le,BI(le.value.mapValue),gt.exists(!0)))}return m.mutationQueue.addMutationBatch(k,g,re,f)}).next(W=>{A=W;const re=W.applyToLocalDocumentSet(T,G);return m.documentOverlayCache.saveOverlays(k,W.batchId,re)})}).then(()=>({batchId:A.batchId,changes:tS(T)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(a.batchId),function(c,f,m){let g=c.Vu[c.currentUser.toKey()];g||(g=new lt(Ce)),g=g.insert(f,m),c.Vu[c.currentUser.toKey()]=g}(n,a.batchId,t),await Ki(n,a.changes),await ou(n.remoteStore)}catch(a){const l=uu(a,"Failed to persist write");t.reject(l)}}async function dR(i,e){const t=he(i);try{const n=await NP(t.localStore,e);e.targetChanges.forEach((a,l)=>{const c=t.Au.get(l);c&&(_e(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?_e(c.hu,14607):a.removedDocuments.size>0&&(_e(c.hu,42227),c.hu=!1))}),await Ki(t,n,e)}catch(n){await $s(n)}}function Kb(i,e,t){const n=he(i);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const a=[];n.Tu.forEach((l,c)=>{const f=c.view.va(e);f.snapshot&&a.push(f.snapshot)}),function(c,f){const m=he(c);m.onlineState=f;let g=!1;m.queries.forEach((_,T)=>{for(const A of T.Sa)A.va(f)&&(g=!0)}),g&&cv(m)}(n.eventManager,e),a.length&&n.Pu.H_(a),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function pk(i,e,t){const n=he(i);n.sharedClientState.updateQueryState(e,"rejected",t);const a=n.Au.get(e),l=a&&a.key;if(l){let c=new lt(oe.comparator);c=c.insert(l,ut.newNoDocument(l,ve.min()));const f=Ne().add(l),m=new Dh(ve.min(),new Map,new lt(Ce),c,f);await dR(n,m),n.du=n.du.remove(l),n.Au.delete(e),pv(n)}else await Kl(n.localStore,e,!1).then(()=>Yl(n,e,t)).catch($s)}async function gk(i,e){const t=he(i),n=e.batch.batchId;try{const a=await CP(t.localStore,e);mv(t,n,null),fv(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await Ki(t,a)}catch(a){await $s(a)}}async function yk(i,e,t){const n=he(i);try{const a=await function(c,f){const m=he(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let _;return m.mutationQueue.lookupMutationBatch(g,f).next(T=>(_e(T!==null,37113),_=T.keys(),m.mutationQueue.removeMutationBatch(g,T))).next(()=>m.mutationQueue.performConsistencyCheck(g)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(g,_,f)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_)).next(()=>m.localDocuments.getDocuments(g,_))})}(n.localStore,e);mv(n,e,t),fv(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await Ki(n,a)}catch(a){await $s(a)}}async function _k(i,e){const t=he(i);Zs(t.remoteStore)||te(ea,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const n=await function(c){const f=he(c);return f.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>f.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(n===Vs)return void e.resolve();const a=t.mu.get(n)||[];a.push(e),t.mu.set(n,a)}catch(n){const a=uu(n,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}function fv(i,e){(i.mu.get(e)||[]).forEach(t=>{t.resolve()}),i.mu.delete(e)}function mv(i,e,t){const n=he(i);let a=n.Vu[n.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),n.Vu[n.currentUser.toKey()]=a}}function Yl(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const n of i.Iu.get(e))i.Tu.delete(n),t&&i.Pu.yu(n,t);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach(n=>{i.Ru.containsKey(n)||fR(i,n)})}function fR(i,e){i.Eu.delete(e.path.canonicalString());const t=i.du.get(e);t!==null&&(Ql(i.remoteStore,t),i.du=i.du.remove(e),i.Au.delete(t),pv(i))}function t_(i,e,t){for(const n of t)n instanceof lR?(i.Ru.addReference(n.key,e),vk(i,n)):n instanceof uR?(te(ea,"Document no longer in limbo: "+n.key),i.Ru.removeReference(n.key,e),i.Ru.containsKey(n.key)||fR(i,n.key)):me(19791,{wu:n})}function vk(i,e){const t=e.key,n=t.path.canonicalString();i.du.get(t)||i.Eu.has(n)||(te(ea,"New document in limbo: "+t),i.Eu.add(n),pv(i))}function pv(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const t=new oe(Le.fromString(e)),n=i.fu.next();i.Au.set(n,new lk(t)),i.du=i.du.insert(t,n),Cm(i.remoteStore,new Oi(Dn(ru(t.path)),n,"TargetPurposeLimboResolution",Un.ce))}}async function Ki(i,e,t){const n=he(i),a=[],l=[],c=[];n.Tu.isEmpty()||(n.Tu.forEach((f,m)=>{c.push(n.pu(m,e,t).then(g=>{var _;if((g||t)&&n.isPrimaryClient){const T=g?!g.fromCache:(_=t==null?void 0:t.targetChanges.get(m.targetId))==null?void 0:_.current;n.sharedClientState.updateQueryState(m.targetId,T?"current":"not-current")}if(g){a.push(g);const T=ev.As(m.targetId,g);l.push(T)}}))}),await Promise.all(c),n.Pu.H_(a),await async function(m,g){const _=he(m);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>F.forEach(g,A=>F.forEach(A.Es,k=>_.persistence.referenceDelegate.addReference(T,A.targetId,k)).next(()=>F.forEach(A.ds,k=>_.persistence.referenceDelegate.removeReference(T,A.targetId,k)))))}catch(T){if(!Xs(T))throw T;te(tv,"Failed to update sequence numbers: "+T)}for(const T of g){const A=T.targetId;if(!T.fromCache){const k=_.Ms.get(A),K=k.snapshotVersion,G=k.withLastLimboFreeSnapshotVersion(K);_.Ms=_.Ms.insert(A,G)}}}(n.localStore,l))}async function Ek(i,e){const t=he(i);if(!t.currentUser.isEqual(e)){te(ea,"User change. New user:",e.toKey());const n=await GS(t.localStore,e);t.currentUser=e,function(l,c){l.mu.forEach(f=>{f.forEach(m=>{m.reject(new Z(H.CANCELLED,c))})}),l.mu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Ki(t,n.Ls)}}function Tk(i,e){const t=he(i),n=t.Au.get(e);if(n&&n.hu)return Ne().add(n.key);{let a=Ne();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const f=t.Tu.get(c);a=a.unionWith(f.view.nu)}return a}}async function wk(i,e){const t=he(i),n=await nm(t.localStore,e.query,!0),a=e.view.cu(n);return t.isPrimaryClient&&t_(t,e.targetId,a.au),a}async function bk(i,e){const t=he(i);return WS(t.localStore,e).then(n=>Ki(t,n))}async function Ak(i,e,t,n){const a=he(i),l=await function(f,m){const g=he(f),_=he(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",T=>_.er(T,m).next(A=>A?g.localDocuments.getDocuments(T,A):F.resolve(null)))}(a.localStore,e);l!==null?(t==="pending"?await ou(a.remoteStore):t==="acknowledged"||t==="rejected"?(mv(a,e,n||null),fv(a,e),function(f,m){he(he(f).mutationQueue).ir(m)}(a.localStore,e)):me(6720,"Unknown batchState",{Su:t}),await Ki(a,l)):te(ea,"Cannot apply mutation batch with id: "+e)}async function Ik(i,e){const t=he(i);if(Nm(t),gv(t),e===!0&&t.gu!==!0){const n=t.sharedClientState.getAllActiveQueryTargets(),a=await Qb(t,n.toArray());t.gu=!0,await Zy(t.remoteStore,!0);for(const l of a)Cm(t.remoteStore,l)}else if(e===!1&&t.gu!==!1){const n=[];let a=Promise.resolve();t.Iu.forEach((l,c)=>{t.sharedClientState.isLocalQueryTarget(c)?n.push(c):a=a.then(()=>(Yl(t,c),Kl(t.localStore,c,!0))),Ql(t.remoteStore,c)}),await a,await Qb(t,n),function(c){const f=he(c);f.Au.forEach((m,g)=>{Ql(f.remoteStore,g)}),f.Ru.Jr(),f.Au=new Map,f.du=new lt(oe.comparator)}(t),t.gu=!1,await Zy(t.remoteStore,!1)}}async function Qb(i,e,t){const n=he(i),a=[],l=[];for(const c of e){let f;const m=n.Iu.get(c);if(m&&m.length!==0){f=await Hl(n.localStore,Dn(m[0]));for(const g of m){const _=n.Tu.get(g),T=await wk(n,_);T.snapshot&&l.push(T.snapshot)}}else{const g=await QS(n.localStore,c);f=await Hl(n.localStore,g),await dv(n,mR(g),c,!1,f.resumeToken)}a.push(f)}return n.Pu.H_(l),a}function mR(i){return $I(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function Sk(i){return function(t){return he(he(t).persistence).Ts()}(he(i).localStore)}async function Rk(i,e,t,n){const a=he(i);if(a.gu)return void te(ea,"Ignoring unexpected query state notification.");const l=a.Iu.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const c=await WS(a.localStore,JI(l[0])),f=Dh.createSynthesizedRemoteEventForCurrentChange(e,t==="current",St.EMPTY_BYTE_STRING);await Ki(a,c,f);break}case"rejected":await Kl(a.localStore,e,!0),Yl(a,e,n);break;default:me(64155,t)}}async function xk(i,e,t){const n=Nm(i);if(n.gu){for(const a of e){if(n.Iu.has(a)&&n.sharedClientState.isActiveQueryTarget(a)){te(ea,"Adding an already active target "+a);continue}const l=await QS(n.localStore,a),c=await Hl(n.localStore,l);await dv(n,mR(l),c.targetId,!1,c.resumeToken),Cm(n.remoteStore,c)}for(const a of t)n.Iu.has(a)&&await Kl(n.localStore,a,!1).then(()=>{Ql(n.remoteStore,a),Yl(n,a)}).catch($s)}}function Nm(i){const e=he(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=dR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Tk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=pk.bind(null,e),e.Pu.H_=rk.bind(null,e.eventManager),e.Pu.yu=ik.bind(null,e.eventManager),e}function gv(i){const e=he(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yk.bind(null,e),e}function Ck(i,e,t){const n=he(i);(async function(l,c,f){try{const m=await c.getMetadata();if(await function(k,K){const G=he(k),W=kt(K.createTime);return G.persistence.runTransaction("hasNewerBundle","readonly",re=>G.Ii.getBundleMetadata(re,K.id)).then(re=>!!re&&re.createTime.compareTo(W)>=0)}(l.localStore,m))return await c.close(),f._completeWith(function(k){return{taskState:"Success",documentsLoaded:k.totalDocuments,bytesLoaded:k.totalBytes,totalDocuments:k.totalDocuments,totalBytes:k.totalBytes}}(m)),Promise.resolve(new Set);f._updateProgress(oR(m));const g=new ak(m,c.serializer);let _=await c.bu();for(;_;){const A=await g.Ga(_);A&&f._updateProgress(A),_=await c.bu()}const T=await g.ja(l.localStore);return await Ki(l,T.Ha,void 0),await function(k,K){const G=he(k);return G.persistence.runTransaction("Save bundle","readwrite",W=>G.Ii.saveBundleMetadata(W,K))}(l.localStore,m),f._completeWith(T.progress),Promise.resolve(T.Ja)}catch(m){return oi(ea,`Loading bundle failed with ${m}`),f._failWith(m),Promise.resolve(new Set)}})(n,e,t).then(a=>{n.sharedClientState.notifyBundleLoaded(a)})}class mh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=kh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return qS(this.persistence,new BS,e.initialUser,this.serializer)}Cu(e){return new X_(xm.mi,this.serializer)}Du(e){return new ZS}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}mh.provider={build:()=>new mh};class Nk extends mh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){_e(this.persistence.referenceDelegate instanceof tm,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new MS(n,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?En.withCacheSize(this.cacheSizeBytes):En.DEFAULT;return new X_(n=>tm.mi(n,t),this.serializer)}}class pR extends mh{constructor(e,t,n){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await gv(this.xu.syncEngine),await ou(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return qS(this.persistence,new BS,e.initialUser,this.serializer)}Fu(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new MS(n,e.asyncQueue,t)}Mu(e,t){const n=new FN(t,this.persistence);return new UN(e.asyncQueue,n)}Cu(e){const t=Z_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?En.withCacheSize(this.cacheSizeBytes):En.DEFAULT;return new J_(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,eR(),Lf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new ZS}}class Dk extends pR{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof py&&(this.sharedClientState.syncEngine={Co:Ak.bind(null,t),vo:Rk.bind(null,t),Fo:xk.bind(null,t),Ts:Sk.bind(null,t),Do:bk.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji(async n=>{await Ik(this.xu.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())})}Du(e){const t=eR();if(!py.v(t))throw new Z(H.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Z_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new py(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class ph{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>Kb(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ek.bind(null,this.syncEngine),await Zy(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new nk}()}createDatastore(e){const t=kh(e.databaseInfo.databaseId),n=function(l){return new UP(l)}(e.databaseInfo);return function(l,c,f,m){return new BP(l,c,f,m)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(n,a,l,c,f){return new GP(n,a,l,c,f)}(this.localStore,this.datastore,e.asyncQueue,t=>Kb(this.syncEngine,t,0),function(){return Fb.v()?new Fb:new VP}())}createSyncEngine(e,t){return function(a,l,c,f,m,g,_){const T=new uk(a,l,c,f,m,g);return _&&(T.gu=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(a){const l=he(a);te(lo,"RemoteStore shutting down."),l.Ea.add(5),await au(l),l.Aa.shutdown(),l.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}ph.provider={build:()=>new ph};function Wb(i,e=10240){let t=0;return{async read(){if(t<i.byteLength){const n={value:i.slice(t,t+e),done:!1};return t+=e,n}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Pt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e,t){this.Bu=e,this.serializer=t,this.metadata=new mn,this.buffer=new Uint8Array,this.Lu=function(){return new TextDecoder("utf-8")}(),this.ku().then(n=>{n&&n.$a()?this.metadata.resolve(n.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(n==null?void 0:n.Qa)}`))},n=>this.metadata.reject(n))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const t=this.Lu.decode(e),n=Number(t);isNaN(n)&&this.Qu(`length string (${t}) is not valid number`);const a=await this.$u(n);return new sk(JSON.parse(a),e.length+n)}Uu(){return this.buffer.findIndex(e=>e===123)}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const t=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Z(H.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(a,l){const c=he(a),f={documents:l.map(T=>dh(c.serializer,T))},m=await c.Ho("BatchGetDocuments",c.serializer.databaseId,Le.emptyPath(),f,l.length),g=new Map;m.forEach(T=>{const A=HD(c.serializer,T);g.set(A.key.toString(),A)});const _=[];return l.forEach(T=>{const A=g.get(T.toString());_e(!!A,55234,{key:T}),_.push(A)}),_}(this.datastore,e);return t.forEach(n=>this.recordVersion(n)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new su(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,n)=>{const a=oe.fromPath(n);this.mutations.push(new z_(a,this.precondition(a)))}),await async function(n,a){const l=he(n),c={writes:a.map(f=>fh(l.serializer,f))};await l.Go("Commit",l.serializer.databaseId,Le.emptyPath(),c)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw me(50498,{Gu:e.constructor.name});t=ve.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Z(H.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ve.min())?gt.exists(!1):gt.updateTime(t):gt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ve.min()))throw new Z(H.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return gt.updateTime(t)}return gt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e,t,n,a,l){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=a,this.deferred=l,this.zu=n.maxAttempts,this.M_=new rv(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const e=new kk(this.datastore),t=this.Hu(e);t&&t.then(n=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(n)}).catch(a=>{this.Yu(a)}))}).catch(n=>{this.Yu(n)})})}Hu(e){try{const t=this.updateFunction(e);return!Ih(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!hS(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs="FirestoreClient";class Ok{constructor(e,t,n,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=a,this.user=rn.UNAUTHENTICATED,this.clientId=R_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(n,async c=>{te(Qs,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(n,c=>(te(Qs,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new mn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=uu(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function yy(i,e){i.asyncQueue.verifyOperationInProgress(),te(Qs,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let n=t.initialUser;i.setCredentialChangeListener(async a=>{n.isEqual(a)||(await GS(e.localStore,a),n=a)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function Yb(i,e){i.asyncQueue.verifyOperationInProgress();const t=await yv(i);te(Qs,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener(n=>zb(e.remoteStore,n)),i.setAppCheckTokenChangeListener((n,a)=>zb(e.remoteStore,a)),i._onlineComponents=e}async function yv(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){te(Qs,"Using user provided OfflineComponentProvider");try{await yy(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===H.FAILED_PRECONDITION||a.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;oi("Error using user provided cache. Falling back to memory cache: "+t),await yy(i,new mh)}}else te(Qs,"Using default OfflineComponentProvider"),await yy(i,new Nk(void 0));return i._offlineComponents}async function Pm(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(te(Qs,"Using user provided OnlineComponentProvider"),await Yb(i,i._uninitializedComponentsProvider._online)):(te(Qs,"Using default OnlineComponentProvider"),await Yb(i,new ph))),i._onlineComponents}function gR(i){return yv(i).then(e=>e.persistence)}function _v(i){return yv(i).then(e=>e.localStore)}function yR(i){return Pm(i).then(e=>e.remoteStore)}function vv(i){return Pm(i).then(e=>e.syncEngine)}function Mk(i){return Pm(i).then(e=>e.datastore)}async function $l(i){const e=await Pm(i),t=e.eventManager;return t.onListen=ck.bind(null,e.syncEngine),t.onUnlisten=dk.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=hk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=fk.bind(null,e.syncEngine),t}function Lk(i){return i.asyncQueue.enqueue(async()=>{const e=await gR(i),t=await yR(i);return e.setNetworkEnabled(!0),function(a){const l=he(a);return l.Ea.delete(0),Vh(l)}(t)})}function Uk(i){return i.asyncQueue.enqueue(async()=>{const e=await gR(i),t=await yR(i);return e.setNetworkEnabled(!1),async function(a){const l=he(a);l.Ea.add(0),await au(l),l.Ra.set("Offline")}(t)})}function Fk(i,e){const t=new mn;return i.asyncQueue.enqueueAndForget(async()=>async function(a,l,c){try{const f=await function(g,_){const T=he(g);return T.persistence.runTransaction("read document","readonly",A=>T.localDocuments.getDocument(A,_))}(a,l);f.isFoundDocument()?c.resolve(f):f.isNoDocument()?c.resolve(null):c.reject(new Z(H.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const m=uu(f,`Failed to get document '${l} from cache`);c.reject(m)}}(await _v(i),e,t)),t.promise}function _R(i,e,t={}){const n=new mn;return i.asyncQueue.enqueueAndForget(async()=>function(l,c,f,m,g){const _=new Dm({next:A=>{_.Nu(),c.enqueueAndForget(()=>uv(l,T));const k=A.docs.has(f);!k&&A.fromCache?g.reject(new Z(H.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&A.fromCache&&m&&m.source==="server"?g.reject(new Z(H.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(A)},error:A=>g.reject(A)}),T=new hv(ru(f.path),_,{includeMetadataChanges:!0,qa:!0});return lv(l,T)}(await $l(i),i.asyncQueue,e,t,n)),n.promise}function jk(i,e){const t=new mn;return i.asyncQueue.enqueueAndForget(async()=>async function(a,l,c){try{const f=await nm(a,l,!0),m=new cR(l,f.Qs),g=m.ru(f.documents),_=m.applyChanges(g,!1);c.resolve(_.snapshot)}catch(f){const m=uu(f,`Failed to execute query '${l} against cache`);c.reject(m)}}(await _v(i),e,t)),t.promise}function vR(i,e,t={}){const n=new mn;return i.asyncQueue.enqueueAndForget(async()=>function(l,c,f,m,g){const _=new Dm({next:A=>{_.Nu(),c.enqueueAndForget(()=>uv(l,T)),A.fromCache&&m.source==="server"?g.reject(new Z(H.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(A)},error:A=>g.reject(A)}),T=new hv(f,_,{includeMetadataChanges:!0,qa:!0});return lv(l,T)}(await $l(i),i.asyncQueue,e,t,n)),n.promise}function zk(i,e){const t=new Dm(e);return i.asyncQueue.enqueueAndForget(async()=>function(a,l){he(a).Ca.add(l),l.next()}(await $l(i),t)),()=>{t.Nu(),i.asyncQueue.enqueueAndForget(async()=>function(a,l){he(a).Ca.delete(l)}(await $l(i),t))}}function Bk(i,e,t,n){const a=function(c,f){let m;return m=typeof c=="string"?fS().encode(c):c,function(_,T){return new Pk(_,T)}(function(_,T){if(_ instanceof Uint8Array)return Wb(_,T);if(_ instanceof ArrayBuffer)return Wb(new Uint8Array(_),T);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),f)}(t,kh(e));i.asyncQueue.enqueueAndForget(async()=>{Ck(await vv(i),a,n)})}function qk(i,e){return i.asyncQueue.enqueue(async()=>function(n,a){const l=he(n);return l.persistence.runTransaction("Get named query","readonly",c=>l.Ii.getNamedQuery(c,a))}(await _v(i),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ER(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR="firestore.googleapis.com",Xb=!0;class Jb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Z(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=TR,this.ssl=Xb}else this.host=e.host,this.ssl=e.ssl??Xb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=PS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<cP)throw new Z(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ER(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new Z(H.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new Z(H.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new Z(H.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,a){return n.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Oh{constructor(e,t,n,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Z(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Z(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new SN;switch(n.type){case"firstParty":return new NN(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Z(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const n=$b.get(t);n&&(te("ComponentProvider","Removing Datastore"),$b.delete(t),n.terminate())}(this),Promise.resolve()}}function Gk(i,e,t,n={}){var g;i=He(i,Oh);const a=eu(e),l=i._getSettings(),c={...l,emulatorOptions:i._getEmulatorOptions()},f=`${e}:${t}`;a&&(UA(`https://${f}`),FA("Firestore",!0)),l.host!==TR&&l.host!==f&&oi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...l,host:f,ssl:a,emulatorOptions:n};if(!Ls(m,c)&&(i._setSettings(m),n.mockUserToken)){let _,T;if(typeof n.mockUserToken=="string")_=n.mockUserToken,T=rn.MOCK_USER;else{_=qC(n.mockUserToken,(g=i._app)==null?void 0:g.options.projectId);const A=n.mockUserToken.sub||n.mockUserToken.user_id;if(!A)throw new Z(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new rn(A)}i._authCredentials=new RN(new dI(_,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pn=class wR{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new wR(this.firestore,e,this._query)}},ot=class Lc{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Os(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Lc(this.firestore,e,this._key)}toJSON(){return{type:Lc._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Ah(t,Lc._jsonSchema))return new Lc(e,n||null,new oe(Le.fromString(t.referencePath)))}};ot._jsonSchemaVersion="firestore/documentReference/1.0",ot._jsonSchema={type:zt("string",ot._jsonSchemaVersion),referencePath:zt("string")};let Os=class bR extends Pn{constructor(e,t,n){super(e,t,ru(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ot(this.firestore,null,new oe(e))}withConverter(e){return new bR(this.firestore,e,this._path)}};function AR(i,e,...t){if(i=Ae(i),x_("collection","path",e),i instanceof Oh){const n=Le.fromString(e,...t);return j0(n),new Os(i,null,n)}{if(!(i instanceof ot||i instanceof Os))throw new Z(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=i._path.child(Le.fromString(e,...t));return j0(n),new Os(i.firestore,null,n)}}function Hk(i,e){if(i=He(i,Oh),x_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Z(H.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Pn(i,null,function(n){return new qi(Le.emptyPath(),n)}(e))}function am(i,e,...t){if(i=Ae(i),arguments.length===1&&(e=R_.newId()),x_("doc","path",e),i instanceof Oh){const n=Le.fromString(e,...t);return F0(n),new ot(i,null,new oe(n))}{if(!(i instanceof ot||i instanceof Os))throw new Z(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=i._path.child(Le.fromString(e,...t));return F0(n),new ot(i.firestore,i instanceof Os?i.converter:null,new oe(n))}}function IR(i,e){return i=Ae(i),e=Ae(e),(i instanceof ot||i instanceof Os)&&(e instanceof ot||e instanceof Os)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function SR(i,e){return i=Ae(i),e=Ae(e),i instanceof Pn&&e instanceof Pn&&i.firestore===e.firestore&&xh(i._query,e._query)&&i.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb="AsyncQueue";class eA{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new rv(this,"async_queue_retry"),this._c=()=>{const n=Lf();n&&te(Zb,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const t=Lf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Lf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new mn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Xs(e))throw e;te(Zb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(n=>{throw this.nc=n,this.rc=!1,Pt("INTERNAL UNHANDLED ERROR: ",tA(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=ov.createAndSchedule(this,e,t,n,l=>this.hc(l));return this.tc.push(a),a}uc(){this.nc&&me(47125,{Pc:tA(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,n)=>t.targetTimeMs-n.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function tA(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n_(i){return function(t,n){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of n)if(l in a&&typeof a[l]=="function")return!0;return!1}(i,["next","error","complete"])}class Kk{constructor(){this._progressObserver={},this._taskCompletionResolver=new mn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk=-1;let Vt=class extends Oh{constructor(e,t,n,a){super(e,t,n,a),this.type="firestore",this._queue=new eA,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new eA(e),this._firestoreClient=void 0,await e}}};function bn(i){if(i._terminated)throw new Z(H.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||RR(i),i._firestoreClient}function RR(i){var n,a,l;const e=i._freezeSettings(),t=function(f,m,g,_){return new mD(f,m,g,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,ER(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)}(i._databaseId,((n=i._app)==null?void 0:n.options.appId)||"",i._persistenceKey,e);i._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new Ok(i._authCredentials,i._appCheckCredentials,i._queue,t,i._componentsProvider&&function(f){const m=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(m),_online:m}}(i._componentsProvider))}function Wk(i,e){oi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=i._freezeSettings();return xR(i,ph.provider,{build:n=>new pR(n,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function Yk(i){oi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=i._freezeSettings();xR(i,ph.provider,{build:t=>new Dk(t,e.cacheSizeBytes)})}function xR(i,e,t){if((i=He(i,Vt))._firestoreClient||i._terminated)throw new Z(H.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(i._componentsProvider||i._getSettings().localCache)throw new Z(H.FAILED_PRECONDITION,"SDK cache is already specified.");i._componentsProvider={_online:e,_offline:t},RR(i)}function $k(i){if(i._initialized&&!i._terminated)throw new Z(H.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new mn;return i._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(n){if(!ri.v())return Promise.resolve();const a=n+zS;await ri.delete(a)}(Z_(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}}),e.promise}function Xk(i){return function(t){const n=new mn;return t.asyncQueue.enqueueAndForget(async()=>_k(await vv(t),n)),n.promise}(bn(i=He(i,Vt)))}function Jk(i){return Lk(bn(i=He(i,Vt)))}function Zk(i){return Uk(bn(i=He(i,Vt)))}function eV(i,e){const t=bn(i=He(i,Vt)),n=new Kk;return Bk(t,i._databaseId,e,n),n}function tV(i,e){return qk(bn(i=He(i,Vt)),e).then(t=>t?new Pn(i,null,t.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Tn(St.fromBase64String(e))}catch(t){throw new Z(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Tn(St.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Tn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ah(e,Tn._jsonSchema))return Tn.fromBase64String(e.bytes)}}Tn._jsonSchemaVersion="firestore/bytes/1.0",Tn._jsonSchema={type:zt("string",Tn._jsonSchemaVersion),bytes:zt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ws=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Z(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let po=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Z(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Z(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Cr._jsonSchemaVersion}}static fromJSON(e){if(Ah(e,Cr._jsonSchema))return new Cr(e.latitude,e.longitude)}}Cr._jsonSchemaVersion="firestore/geoPoint/1.0",Cr._jsonSchema={type:zt("string",Cr._jsonSchemaVersion),latitude:zt("number"),longitude:zt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,a){if(n.length!==a.length)return!1;for(let l=0;l<n.length;++l)if(n[l]!==a[l])return!1;return!0}(this._values,e._values)}toJSON(){return{type:si._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ah(e,si._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new si(e.vectorValues);throw new Z(H.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}si._jsonSchemaVersion="firestore/vectorValue/1.0",si._jsonSchema={type:zt("string",si._jsonSchemaVersion),vectorValues:zt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nV=/^__.*__$/;class rV{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new Hi(e,this.data,this.fieldMask,t,this.fieldTransforms):new iu(e,this.data,t,this.fieldTransforms)}}class CR{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Hi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function NR(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw me(40011,{Ac:i})}}class km{constructor(e,t,n,a,l,c){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new km({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){var a;const t=(a=this.path)==null?void 0:a.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return om(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(NR(this.Ac)&&nV.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class iV{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||kh(e)}Cc(e,t,n,a=!1){return new km({Ac:e,methodName:t,Dc:n,path:pt.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function go(i){const e=i._freezeSettings(),t=kh(i._databaseId);return new iV(i._databaseId,!!e.ignoreUndefinedProperties,t)}function Vm(i,e,t,n,a,l={}){const c=i.Cc(l.merge||l.mergeFields?2:0,e,t,a);Sv("Data must be an object, but it was:",c,n);const f=kR(n,c);let m,g;if(l.merge)m=new Fn(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const T of l.mergeFields){const A=r_(e,T,t);if(!c.contains(A))throw new Z(H.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);OR(_,A)||_.push(A)}m=new Fn(_),g=c.fieldTransforms.filter(T=>m.covers(T.field))}else m=null,g=c.fieldTransforms;return new rV(new fn(f),m,g)}class Mh extends po{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Mh}}function DR(i,e,t){return new km({Ac:3,Dc:e.settings.Dc,methodName:i._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Ev extends po{_toFieldTransform(e){return new Nh(e.path,new Bl)}isEqual(e){return e instanceof Ev}}class Tv extends po{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=DR(this,e,!0),n=this.vc.map(l=>yo(l,t)),a=new ro(n);return new Nh(e.path,a)}isEqual(e){return e instanceof Tv&&Ls(this.vc,e.vc)}}class wv extends po{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=DR(this,e,!0),n=this.vc.map(l=>yo(l,t)),a=new io(n);return new Nh(e.path,a)}isEqual(e){return e instanceof wv&&Ls(this.vc,e.vc)}}class bv extends po{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new ql(e.serializer,iS(e.serializer,this.Fc));return new Nh(e.path,t)}isEqual(e){return e instanceof bv&&this.Fc===e.Fc}}function Av(i,e,t,n){const a=i.Cc(1,e,t);Sv("Data must be an object, but it was:",a,n);const l=[],c=fn.empty();Js(n,(m,g)=>{const _=Rv(e,m,t);g=Ae(g);const T=a.yc(_);if(g instanceof Mh)l.push(_);else{const A=yo(g,T);A!=null&&(l.push(_),c.set(_,A))}});const f=new Fn(l);return new CR(c,f,a.fieldTransforms)}function Iv(i,e,t,n,a,l){const c=i.Cc(1,e,t),f=[r_(e,n,t)],m=[a];if(l.length%2!=0)throw new Z(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<l.length;A+=2)f.push(r_(e,l[A])),m.push(l[A+1]);const g=[],_=fn.empty();for(let A=f.length-1;A>=0;--A)if(!OR(g,f[A])){const k=f[A];let K=m[A];K=Ae(K);const G=c.yc(k);if(K instanceof Mh)g.push(k);else{const W=yo(K,G);W!=null&&(g.push(k),_.set(k,W))}}const T=new Fn(g);return new CR(_,T,c.fieldTransforms)}function PR(i,e,t,n=!1){return yo(t,i.Cc(n?4:3,e))}function yo(i,e){if(VR(i=Ae(i)))return Sv("Unsupported field value:",e,i),kR(i,e);if(i instanceof po)return function(n,a){if(!NR(a.Ac))throw a.Sc(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${n._methodName}() is not currently supported inside arrays`);const l=n._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(n,a){const l=[];let c=0;for(const f of n){let m=yo(f,a.wc(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}}(i,e)}return function(n,a){if((n=Ae(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return iS(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const l=Et.fromDate(n);return{timestampValue:Gl(a.serializer,l)}}if(n instanceof Et){const l=new Et(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Gl(a.serializer,l)}}if(n instanceof Cr)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Tn)return{bytesValue:gS(a.serializer,n._byteString)};if(n instanceof ot){const l=a.databaseId,c=n.firestore._databaseId;if(!c.isEqual(l))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:K_(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof si)return function(c,f){return{mapValue:{fields:{[O_]:{stringValue:M_},[Fl]:{arrayValue:{values:c.toArray().map(g=>{if(typeof g!="number")throw f.Sc("VectorValues must only contain numeric values.");return j_(f.serializer,g)})}}}}}}(n,a);throw a.Sc(`Unsupported field value: ${gm(n)}`)}(i,e)}function kR(i,e){const t={};return kI(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Js(i,(n,a)=>{const l=yo(a,e.mc(n));l!=null&&(t[n]=l)}),{mapValue:{fields:t}}}function VR(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Et||i instanceof Cr||i instanceof Tn||i instanceof ot||i instanceof po||i instanceof si)}function Sv(i,e,t){if(!VR(t)||!pI(t)){const n=gm(t);throw n==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+n)}}function r_(i,e,t){if((e=Ae(e))instanceof Ws)return e._internalPath;if(typeof e=="string")return Rv(i,e);throw om("Field path arguments must be of type string or ",i,!1,void 0,t)}const sV=new RegExp("[~\\*/\\[\\]]");function Rv(i,e,t){if(e.search(sV)>=0)throw om(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Ws(...e.split("."))._internalPath}catch{throw om(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function om(i,e,t,n,a){const l=n&&!n.isEmpty(),c=a!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${n}`),c&&(m+=` in document ${a}`),m+=")"),new Z(H.INVALID_ARGUMENT,f+i+m)}function OR(i,e){return i.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e,t,n,a,l){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new aV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Om("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class aV extends gh{data(){return super.data()}}function Om(i,e){return typeof e=="string"?Rv(i,e):e instanceof Ws?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MR(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new Z(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xv{}class Lh extends xv{}function Ss(i,e,...t){let n=[];e instanceof xv&&n.push(e),n=n.concat(t),function(l){const c=l.filter(m=>m instanceof Cv).length,f=l.filter(m=>m instanceof Mm).length;if(c>1||c>0&&f>0)throw new Z(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)i=a._apply(i);return i}class Mm extends Lh{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Mm(e,t,n)}_apply(e){const t=this._parse(e);return UR(e._query,t),new Pn(e.firestore,e.converter,qy(e._query,t))}_parse(e){const t=go(e.firestore);return function(l,c,f,m,g,_,T){let A;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new Z(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){rA(T,_);const K=[];for(const G of T)K.push(nA(m,l,G));A={arrayValue:{values:K}}}else A=nA(m,l,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||rA(T,_),A=PR(f,c,T,_==="in"||_==="not-in");return Ue.create(g,_,A)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function oV(i,e,t){const n=e,a=Om("where",i);return Mm._create(a,n,t)}class Cv extends xv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Cv(e,t)}_parse(e){const t=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return t.length===1?t[0]:Je.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(a,l){let c=a;const f=l.getFlattenedFilters();for(const m of f)UR(c,m),c=qy(c,m)}(e._query,t),new Pn(e.firestore,e.converter,qy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Nv extends Lh{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Nv(e,t)}_apply(e){const t=function(a,l,c){if(a.startAt!==null)throw new Z(H.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Z(H.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new hh(l,c)}(e._query,this._field,this._direction);return new Pn(e.firestore,e.converter,function(a,l){const c=a.explicitOrderBy.concat([l]);return new qi(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,t))}}function lV(i,e="asc"){const t=e,n=Om("orderBy",i);return Nv._create(n,t)}class Lm extends Lh{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Lm(e,t,n)}_apply(e){return new Pn(e.firestore,e.converter,Xf(e._query,this._limit,this._limitType))}}function uV(i){return gI("limit",i),Lm._create("limit",i,"F")}function cV(i){return gI("limitToLast",i),Lm._create("limitToLast",i,"L")}class Um extends Lh{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Um(e,t,n)}_apply(e){const t=LR(e,this.type,this._docOrFields,this._inclusive);return new Pn(e.firestore,e.converter,function(a,l){return new qi(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,l,a.endAt)}(e._query,t))}}function hV(...i){return Um._create("startAt",i,!0)}function dV(...i){return Um._create("startAfter",i,!1)}class Fm extends Lh{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Fm(e,t,n)}_apply(e){const t=LR(e,this.type,this._docOrFields,this._inclusive);return new Pn(e.firestore,e.converter,function(a,l){return new qi(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,l)}(e._query,t))}}function fV(...i){return Fm._create("endBefore",i,!1)}function mV(...i){return Fm._create("endAt",i,!0)}function LR(i,e,t,n){if(t[0]=Ae(t[0]),t[0]instanceof gh)return function(l,c,f,m,g){if(!m)throw new Z(H.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${f}().`);const _=[];for(const T of Il(l))if(T.field.isKeyField())_.push(to(c,m.key));else{const A=m.data.field(T.field);if(Tm(A))throw new Z(H.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(A===null){const k=T.field.canonicalString();throw new Z(H.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${k}' (used as the orderBy) does not exist.`)}_.push(A)}return new Hs(_,g)}(i._query,i.firestore._databaseId,e,t[0]._document,n);{const a=go(i.firestore);return function(c,f,m,g,_,T){const A=c.explicitOrderBy;if(_.length>A.length)throw new Z(H.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const k=[];for(let K=0;K<_.length;K++){const G=_[K];if(A[K].field.isKeyField()){if(typeof G!="string")throw new Z(H.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof G}`);if(!U_(c)&&G.indexOf("/")!==-1)throw new Z(H.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${G}' contains a slash.`);const W=c.path.child(Le.fromString(G));if(!oe.isDocumentKey(W))throw new Z(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${W}' is not because it contains an odd number of segments.`);const re=new oe(W);k.push(to(f,re))}else{const W=PR(m,g,G);k.push(W)}}return new Hs(k,T)}(i._query,i.firestore._databaseId,a,e,t,n)}}function nA(i,e,t){if(typeof(t=Ae(t))=="string"){if(t==="")throw new Z(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!U_(e)&&t.indexOf("/")!==-1)throw new Z(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(Le.fromString(t));if(!oe.isDocumentKey(n))throw new Z(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return to(i,new oe(n))}if(t instanceof ot)return to(i,t._key);throw new Z(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gm(t)}.`)}function rA(i,e){if(!Array.isArray(i)||i.length===0)throw new Z(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function UR(i,e){const t=function(a,l){for(const c of a)for(const f of c.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null}(i.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Z(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Z(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Dv{convertValue(e,t="none"){switch(qs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(zi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw me(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Js(e,(a,l)=>{n[a]=this.convertValue(l,t)}),n}convertVectorValue(e){var n,a,l;const t=(l=(a=(n=e.fields)==null?void 0:n[Fl].arrayValue)==null?void 0:a.values)==null?void 0:l.map(c=>ft(c.doubleValue));return new si(t)}convertGeoPoint(e){return new Cr(ft(e.latitude),ft(e.longitude))}convertArray(e,t){return(e.values||[]).map(n=>this.convertValue(n,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=wm(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(lh(e));default:return null}}convertTimestamp(e){const t=ji(e);return new Et(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Le.fromString(e);_e(RS(n),9688,{name:e});const a=new Bs(n.get(1),n.get(3)),l=new oe(n.popFirst(5));return a.isEqual(t)||Pt(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jm(i,e,t){let n;return n=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,n}class pV extends Dv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ot(this.firestore,null,t)}}class Ya{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let pr=class FR extends gh{constructor(e,t,n,a,l,c){super(e,t,n,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Wc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Om("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Z(H.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=FR._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};pr._jsonSchemaVersion="firestore/documentSnapshot/1.0",pr._jsonSchema={type:zt("string",pr._jsonSchemaVersion),bundleSource:zt("string","DocumentSnapshot"),bundleName:zt("string"),bundle:zt("string")};let Wc=class extends pr{data(e={}){return super.data(e)}},Nr=class jR{constructor(e,t,n,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Ya(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Wc(this._firestore,this._userDataWriter,n.key,n,new Ya(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Z(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map(f=>{const m=new Wc(a._firestore,a._userDataWriter,f.doc.key,f.doc,new Ya(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}})}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(f=>l||f.type!==3).map(f=>{const m=new Wc(a._firestore,a._userDataWriter,f.doc.key,f.doc,new Ya(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,_=-1;return f.type!==0&&(g=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),_=c.indexOf(f.doc.key)),{type:gV(f.type),doc:m,oldIndex:g,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Z(H.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=jR._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=R_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],a=[];return this.docs.forEach(l=>{l._document!==null&&(t.push(l._document),n.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function gV(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return me(61501,{type:i})}}function zR(i,e){return i instanceof pr&&e instanceof pr?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(i._document===null?e._document===null:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof Nr&&e instanceof Nr&&i._firestore===e._firestore&&SR(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yV(i){i=He(i,ot);const e=He(i.firestore,Vt);return _R(bn(e),i._key).then(t=>Pv(e,i,t))}Nr._jsonSchemaVersion="firestore/querySnapshot/1.0",Nr._jsonSchema={type:zt("string",Nr._jsonSchemaVersion),bundleSource:zt("string","QuerySnapshot"),bundleName:zt("string"),bundle:zt("string")};class _o extends Dv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ot(this.firestore,null,t)}}function _V(i){i=He(i,ot);const e=He(i.firestore,Vt),t=bn(e),n=new _o(e);return Fk(t,i._key).then(a=>new pr(e,n,i._key,a,new Ya(a!==null&&a.hasLocalMutations,!0),i.converter))}function vV(i){i=He(i,ot);const e=He(i.firestore,Vt);return _R(bn(e),i._key,{source:"server"}).then(t=>Pv(e,i,t))}function EV(i){i=He(i,Pn);const e=He(i.firestore,Vt),t=bn(e),n=new _o(e);return MR(i._query),vR(t,i._query).then(a=>new Nr(e,n,i,a))}function TV(i){i=He(i,Pn);const e=He(i.firestore,Vt),t=bn(e),n=new _o(e);return jk(t,i._query).then(a=>new Nr(e,n,i,a))}function wV(i){i=He(i,Pn);const e=He(i.firestore,Vt),t=bn(e),n=new _o(e);return vR(t,i._query,{source:"server"}).then(a=>new Nr(e,n,i,a))}function iA(i,e,t){i=He(i,ot);const n=He(i.firestore,Vt),a=jm(i.converter,e,t);return Uh(n,[Vm(go(n),"setDoc",i._key,a,i.converter!==null,t).toMutation(i._key,gt.none())])}function sA(i,e,t,...n){i=He(i,ot);const a=He(i.firestore,Vt),l=go(a);let c;return c=typeof(e=Ae(e))=="string"||e instanceof Ws?Iv(l,"updateDoc",i._key,e,t,n):Av(l,"updateDoc",i._key,e),Uh(a,[c.toMutation(i._key,gt.exists(!0))])}function bV(i){return Uh(He(i.firestore,Vt),[new su(i._key,gt.none())])}function AV(i,e){const t=He(i.firestore,Vt),n=am(i),a=jm(i.converter,e);return Uh(t,[Vm(go(i.firestore),"addDoc",n._key,a,i.converter!==null,{}).toMutation(n._key,gt.exists(!1))]).then(()=>n)}function BR(i,...e){var m,g,_;i=Ae(i);let t={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||n_(e[n])||(t=e[n++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(n_(e[n])){const T=e[n];e[n]=(m=T.next)==null?void 0:m.bind(T),e[n+1]=(g=T.error)==null?void 0:g.bind(T),e[n+2]=(_=T.complete)==null?void 0:_.bind(T)}let l,c,f;if(i instanceof ot)c=He(i.firestore,Vt),f=ru(i._key.path),l={next:T=>{e[n]&&e[n](Pv(c,i,T))},error:e[n+1],complete:e[n+2]};else{const T=He(i,Pn);c=He(T.firestore,Vt),f=T._query;const A=new _o(c);l={next:k=>{e[n]&&e[n](new Nr(c,A,T,k))},error:e[n+1],complete:e[n+2]},MR(i._query)}return function(A,k,K,G){const W=new Dm(G),re=new hv(k,W,K);return A.asyncQueue.enqueueAndForget(async()=>lv(await $l(A),re)),()=>{W.Nu(),A.asyncQueue.enqueueAndForget(async()=>uv(await $l(A),re))}}(bn(c),f,a,l)}function IV(i,e){return zk(bn(i=He(i,Vt)),n_(e)?e:{next:e})}function Uh(i,e){return function(n,a){const l=new mn;return n.asyncQueue.enqueueAndForget(async()=>mk(await vv(n),a,l)),l.promise}(bn(i),e)}function Pv(i,e,t){const n=t.docs.get(e._key),a=new _o(i);return new pr(i,a,e._key,n,new Ya(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SV={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let RV=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=go(e)}set(e,t,n){this._verifyNotCommitted();const a=Ns(e,this._firestore),l=jm(a.converter,t,n),c=Vm(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,n);return this._mutations.push(c.toMutation(a._key,gt.none())),this}update(e,t,n,...a){this._verifyNotCommitted();const l=Ns(e,this._firestore);let c;return c=typeof(t=Ae(t))=="string"||t instanceof Ws?Iv(this._dataReader,"WriteBatch.update",l._key,t,n,a):Av(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,gt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ns(e,this._firestore);return this._mutations=this._mutations.concat(new su(t._key,gt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Z(H.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Ns(i,e){if((i=Ae(i)).firestore!==e)throw new Z(H.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=go(e)}get(e){const t=Ns(e,this._firestore),n=new pV(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||a.length!==1)return me(24041);const l=a[0];if(l.isFoundDocument())return new gh(this._firestore,n,l.key,l,t.converter);if(l.isNoDocument())return new gh(this._firestore,n,t._key,null,t.converter);throw me(18433,{doc:l})})}set(e,t,n){const a=Ns(e,this._firestore),l=jm(a.converter,t,n),c=Vm(this._dataReader,"Transaction.set",a._key,l,a.converter!==null,n);return this._transaction.set(a._key,c),this}update(e,t,n,...a){const l=Ns(e,this._firestore);let c;return c=typeof(t=Ae(t))=="string"||t instanceof Ws?Iv(this._dataReader,"Transaction.update",l._key,t,n,a):Av(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,c),this}delete(e){const t=Ns(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let CV=class extends xV{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ns(e,this._firestore),n=new _o(this._firestore);return super.get(e).then(a=>new pr(this._firestore,n,t._key,a._document,new Ya(!1,!1),t.converter))}};function NV(i,e,t){i=He(i,Vt);const n={...SV,...t};return function(l){if(l.maxAttempts<1)throw new Z(H.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function(l,c,f){const m=new mn;return l.asyncQueue.enqueueAndForget(async()=>{const g=await Mk(l);new Vk(l.asyncQueue,g,f,c,m).ju()}),m.promise}(bn(i),a=>e(new CV(i,a)),n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DV(){return new Mh("deleteField")}function PV(){return new Ev("serverTimestamp")}function kV(...i){return new Tv("arrayUnion",i)}function VV(...i){return new wv("arrayRemove",i)}function OV(i){return new bv("increment",i)}(function(e,t=!0){(function(a){nu=a})(Ys),js(new ai("firestore",(n,{instanceIdentifier:a,options:l})=>{const c=n.getProvider("app").getImmediate(),f=new Vt(new xN(n.getProvider("auth-internal")),new DN(c,n.getProvider("app-check-internal")),function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new Z(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bs(g.options.projectId,_)}(c,a),c);return l={useFetchStreams:t,...l},f._setSettings(l),f},"PUBLIC").setMultipleInstances(!0)),xr(O0,M0,e),xr(O0,M0,"esm2020")})();const MV="@firebase/firestore-compat",LV="0.4.0";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kv(i,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new Z("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(){if(typeof Uint8Array>"u")throw new Z("unimplemented","Uint8Arrays are not available in this environment.")}function oA(){if(!dD())throw new Z("unimplemented","Blobs are unavailable in Firestore in this environment.")}class yh{constructor(e){this._delegate=e}static fromBase64String(e){return oA(),new yh(Tn.fromBase64String(e))}static fromUint8Array(e){return aA(),new yh(Tn.fromUint8Array(e))}toBase64(){return oA(),this._delegate.toBase64()}toUint8Array(){return aA(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i_(i){return UV(i,["next","error","complete"])}function UV(i,e){if(typeof i!="object"||i===null)return!1;const t=i;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{enableIndexedDbPersistence(e,t){return Wk(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return Yk(e._delegate)}clearIndexedDbPersistence(e){return $k(e._delegate)}}class qR{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof Bs||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&oi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e={...t,...e},delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,n={}){Gk(this._delegate,e,t,n)}enableNetwork(){return Jk(this._delegate)}disableNetwork(){return Zk(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,mI("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Xk(this._delegate)}onSnapshotsInSync(e){return IV(this._delegate,e)}get app(){if(!this._appCompat)throw new Z("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Xl(this,AR(this._delegate,e))}catch(t){throw Cn(t,"collection()","Firestore.collection()")}}doc(e){try{return new mr(this,am(this._delegate,e))}catch(t){throw Cn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new xn(this,Hk(this._delegate,e))}catch(t){throw Cn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return NV(this._delegate,t=>e(new GR(this,t)))}batch(){return bn(this._delegate),new HR(new RV(this._delegate,e=>Uh(this._delegate,e)))}loadBundle(e){return eV(this._delegate,e)}namedQuery(e){return tV(this._delegate,e).then(t=>t?new xn(this,t):null)}}class zm extends Dv{constructor(e){super(),this.firestore=e}convertBytes(e){return new yh(new Tn(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return mr.forKey(t,this.firestore,null)}}function jV(i){AN(i)}class GR{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new zm(e)}get(e){const t=$a(e);return this._delegate.get(t).then(n=>new _h(this._firestore,new pr(this._firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,t.converter)))}set(e,t,n){const a=$a(e);return n?(kv("Transaction.set",n),this._delegate.set(a,t,n)):this._delegate.set(a,t),this}update(e,t,n,...a){const l=$a(e);return arguments.length===2?this._delegate.update(l,t):this._delegate.update(l,t,n,...a),this}delete(e){const t=$a(e);return this._delegate.delete(t),this}}class HR{constructor(e){this._delegate=e}set(e,t,n){const a=$a(e);return n?(kv("WriteBatch.set",n),this._delegate.set(a,t,n)):this._delegate.set(a,t),this}update(e,t,n,...a){const l=$a(e);return arguments.length===2?this._delegate.update(l,t):this._delegate.update(l,t,n,...a),this}delete(e){const t=$a(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class uo{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new Wc(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new vh(this._firestore,n),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=uo.INSTANCES;let a=n.get(e);a||(a=new WeakMap,n.set(e,a));let l=a.get(t);return l||(l=new uo(e,new zm(e),t),a.set(t,l)),l}}uo.INSTANCES=new WeakMap;class mr{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new zm(e)}static forPath(e,t,n){if(e.length%2!==0)throw new Z("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new mr(t,new ot(t._delegate,n,new oe(e)))}static forKey(e,t,n){return new mr(t,new ot(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new Xl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Xl(this.firestore,AR(this._delegate,e))}catch(t){throw Cn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Ae(e),e instanceof ot?IR(this._delegate,e):!1}set(e,t){t=kv("DocumentReference.set",t);try{return t?iA(this._delegate,e,t):iA(this._delegate,e)}catch(n){throw Cn(n,"setDoc()","DocumentReference.set()")}}update(e,t,...n){try{return arguments.length===1?sA(this._delegate,e):sA(this._delegate,e,t,...n)}catch(a){throw Cn(a,"updateDoc()","DocumentReference.update()")}}delete(){return bV(this._delegate)}onSnapshot(...e){const t=KR(e),n=QR(e,a=>new _h(this.firestore,new pr(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return BR(this._delegate,t,n)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=_V(this._delegate):(e==null?void 0:e.source)==="server"?t=vV(this._delegate):t=yV(this._delegate),t.then(n=>new _h(this.firestore,new pr(this.firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,this._delegate.converter)))}withConverter(e){return new mr(this.firestore,e?this._delegate.withConverter(uo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Cn(i,e,t){return i.message=i.message.replace(e,t),i}function KR(i){for(const e of i)if(typeof e=="object"&&!i_(e))return e;return{}}function QR(i,e){var n,a;let t;return i_(i[0])?t=i[0]:i_(i[1])?t=i[1]:typeof i[0]=="function"?t={next:i[0],error:i[1],complete:i[2]}:t={next:i[1],error:i[2],complete:i[3]},{next:l=>{t.next&&t.next(e(l))},error:(n=t.error)==null?void 0:n.bind(t),complete:(a=t.complete)==null?void 0:a.bind(t)}}class _h{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new mr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return zR(this._delegate,e._delegate)}}class vh extends _h{data(e){const t=this._delegate.data(e);return this._delegate._converter||IN(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}}class xn{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new zm(e)}where(e,t,n){try{return new xn(this.firestore,Ss(this._delegate,oV(e,t,n)))}catch(a){throw Cn(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new xn(this.firestore,Ss(this._delegate,lV(e,t)))}catch(n){throw Cn(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new xn(this.firestore,Ss(this._delegate,uV(e)))}catch(t){throw Cn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new xn(this.firestore,Ss(this._delegate,cV(e)))}catch(t){throw Cn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new xn(this.firestore,Ss(this._delegate,hV(...e)))}catch(t){throw Cn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new xn(this.firestore,Ss(this._delegate,dV(...e)))}catch(t){throw Cn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new xn(this.firestore,Ss(this._delegate,fV(...e)))}catch(t){throw Cn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new xn(this.firestore,Ss(this._delegate,mV(...e)))}catch(t){throw Cn(t,"endAt()","Query.endAt()")}}isEqual(e){return SR(this._delegate,e._delegate)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=TV(this._delegate):(e==null?void 0:e.source)==="server"?t=wV(this._delegate):t=EV(this._delegate),t.then(n=>new s_(this.firestore,new Nr(this.firestore._delegate,this._userDataWriter,this._delegate,n._snapshot)))}onSnapshot(...e){const t=KR(e),n=QR(e,a=>new s_(this.firestore,new Nr(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return BR(this._delegate,t,n)}withConverter(e){return new xn(this.firestore,e?this._delegate.withConverter(uo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class zV{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new vh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class s_{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new xn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new vh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new zV(this._firestore,t))}forEach(e,t){this._delegate.forEach(n=>{e.call(t,new vh(this._firestore,n))})}isEqual(e){return zR(this._delegate,e._delegate)}}class Xl extends xn{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new mr(this.firestore,e):null}doc(e){try{return e===void 0?new mr(this.firestore,am(this._delegate)):new mr(this.firestore,am(this._delegate,e))}catch(t){throw Cn(t,"doc()","CollectionReference.doc()")}}add(e){return AV(this._delegate,e).then(t=>new mr(this.firestore,t))}isEqual(e){return IR(this._delegate,e._delegate)}withConverter(e){return new Xl(this.firestore,e?this._delegate.withConverter(uo.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function $a(i){return He(i,ot)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(...e){this._delegate=new Ws(...e)}static documentId(){return new Vv(pt.keyField().canonicalString())}isEqual(e){return e=Ae(e),e instanceof Ws?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{static serverTimestamp(){const e=PV();return e._methodName="FieldValue.serverTimestamp",new Qa(e)}static delete(){const e=DV();return e._methodName="FieldValue.delete",new Qa(e)}static arrayUnion(...e){const t=kV(...e);return t._methodName="FieldValue.arrayUnion",new Qa(t)}static arrayRemove(...e){const t=VV(...e);return t._methodName="FieldValue.arrayRemove",new Qa(t)}static increment(e){const t=OV(e);return t._methodName="FieldValue.increment",new Qa(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BV={Firestore:qR,GeoPoint:Cr,Timestamp:Et,Blob:yh,Transaction:GR,WriteBatch:HR,DocumentReference:mr,DocumentSnapshot:_h,Query:xn,QueryDocumentSnapshot:vh,QuerySnapshot:s_,CollectionReference:Xl,FieldPath:Vv,FieldValue:Qa,setLogLevel:jV,CACHE_SIZE_UNLIMITED:Qk};function qV(i,e){i.INTERNAL.registerComponent(new ai("firestore-compat",t=>{const n=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(n,a)},"PUBLIC").setServiceProps({...BV}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GV(i){qV(i,(e,t)=>new qR(e,t,new FV)),i.registerVersion(MV,LV)}GV(gr);const xc={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},_l={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HV(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function WR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const KV=HV,QV=WR,YR=new mo("auth","Firebase",WR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lm=new pm("@firebase/auth");function WV(i,...e){lm.logLevel<=Me.WARN&&lm.warn(`Auth (${Ys}): ${i}`,...e)}function Uf(i,...e){lm.logLevel<=Me.ERROR&&lm.error(`Auth (${Ys}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(i,...e){throw Mv(i,...e)}function Yt(i,...e){return Mv(i,...e)}function Ov(i,e,t){const n={...QV(),[e]:t};return new mo("auth","Firebase",n).create(e,{appName:i.name})}function sn(i){return Ov(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cu(i,e,t){const n=t;if(!(e instanceof n))throw n.name!==e.constructor.name&&pn(i,"argument-error"),Ov(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Mv(i,...e){if(typeof i!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=i.name),i._errorFactory.create(t,...n)}return YR.create(i,...e)}function ne(i,e,...t){if(!i)throw Mv(e,...t)}function ni(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Uf(e),new Error(e)}function Dr(i,e){i||ni(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eh(){var i;return typeof self<"u"&&((i=self.location)==null?void 0:i.href)||""}function Lv(){return lA()==="http:"||lA()==="https:"}function lA(){var i;return typeof self<"u"&&((i=self.location)==null?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Lv()||zA()||"connection"in navigator)?navigator.onLine:!0}function $V(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,t){this.shortDelay=e,this.longDelay=t,Dr(t>e,"Short delay should be less than long delay!"),this.isMobile=KC()||E_()}get(){return YV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uv(i,e){Dr(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ni("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ni("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ni("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ZV=new Fh(3e4,6e4);function Rt(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function xt(i,e,t,n,a={}){return XR(i,a,async()=>{let l={},c={};n&&(e==="GET"?c=n:l={body:JSON.stringify(n)});const f=tu({key:i.config.apiKey,...c}).slice(1),m=await i._getAdditionalHeaders();m["Content-Type"]="application/json",i.languageCode&&(m["X-Firebase-Locale"]=i.languageCode);const g={method:e,headers:m,...l};return WC()||(g.referrerPolicy="no-referrer"),i.emulatorConfig&&eu(i.emulatorConfig.host)&&(g.credentials="include"),$R.fetch()(await JR(i,i.config.apiHost,t,f),g)})}async function XR(i,e,t){i._canInitEmulator=!1;const n={...XV,...e};try{const a=new tO(i),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Uc(i,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const f=l.ok?c.errorMessage:c.error.message,[m,g]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Uc(i,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw Uc(i,"email-already-in-use",c);if(m==="USER_DISABLED")throw Uc(i,"user-disabled",c);const _=n[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Ov(i,_,g);pn(i,_)}}catch(a){if(a instanceof Nn)throw a;pn(i,"network-request-failed",{message:String(a)})}}async function Qi(i,e,t,n,a={}){const l=await xt(i,e,t,n,a);return"mfaPendingCredential"in l&&pn(i,"multi-factor-auth-required",{_serverResponse:l}),l}async function JR(i,e,t,n){const a=`${e}${t}?${n}`,l=i,c=l.config.emulator?Uv(i.config,a):`${i.config.apiScheme}://${a}`;return JV.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function eO(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class tO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(Yt(this.auth,"network-request-failed")),ZV.get())})}}function Uc(i,e,t){const n={appName:i.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const a=Yt(i,e,n);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(i){return i!==void 0&&i.getResponse!==void 0}function cA(i){return i!==void 0&&i.enterprise!==void 0}class ZR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return eO(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nO(i){return(await xt(i,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function e1(i,e){return xt(i,"GET","/v2/recaptchaConfig",Rt(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rO(i,e){return xt(i,"POST","/v1/accounts:delete",e)}async function iO(i,e){return xt(i,"POST","/v1/accounts:update",e)}async function um(i,e){return xt(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function sO(i,e=!1){const t=Ae(i),n=await t.getIdToken(e),a=Bm(n);ne(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:a,token:n,authTime:Yc(_y(a.auth_time)),issuedAtTime:Yc(_y(a.iat)),expirationTime:Yc(_y(a.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function _y(i){return Number(i)*1e3}function Bm(i){const[e,t,n]=i.split(".");if(e===void 0||t===void 0||n===void 0)return Uf("JWT malformed, contained fewer than 3 sections"),null;try{const a=g_(t);return a?JSON.parse(a):(Uf("Failed to decode base64 JWT payload"),null)}catch(a){return Uf("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function hA(i){const e=Bm(i);return ne(e,"internal-error"),ne(typeof e.exp<"u","internal-error"),ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bi(i,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof Nn&&aO(n)&&i.auth.currentUser===i&&await i.auth.signOut(),n}}function aO({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yc(this.lastLoginAt),this.creationTime=Yc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Th(i){var T;const e=i.auth,t=await i.getIdToken(),n=await Bi(i,um(e,{idToken:t}));ne(n==null?void 0:n.users.length,e,"internal-error");const a=n.users[0];i._notifyReloadListener(a);const l=(T=a.providerUserInfo)!=null&&T.length?t1(a.providerUserInfo):[],c=uO(i.providerData,l),f=i.isAnonymous,m=!(i.email&&a.passwordHash)&&!(c!=null&&c.length),g=f?m:!1,_={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new a_(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(i,_)}async function lO(i){const e=Ae(i);await Th(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function uO(i,e){return[...i.filter(n=>!e.some(a=>a.providerId===n.providerId)),...e]}function t1(i){return i.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cO(i,e){const t=await XR(i,{},async()=>{const n=tu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=i.config,c=await JR(i,a,"/v1/token",`key=${l}`),f=await i._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:n};return i.emulatorConfig&&eu(i.emulatorConfig.host)&&(m.credentials="include"),$R.fetch()(c,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function hO(i,e){return xt(i,"POST","/v2/accounts:revokeToken",Rt(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ne(e.idToken,"internal-error"),ne(typeof e.idToken<"u","internal-error"),ne(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):hA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ne(e.length!==0,"internal-error");const t=hA(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:a,expiresIn:l}=await cO(e,t);this.updateTokensAndExpiration(n,a,Number(l))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:a,expirationTime:l}=t,c=new Rl;return n&&(ne(typeof n=="string","internal-error",{appName:e}),c.refreshToken=n),a&&(ne(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(ne(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Rl,this.toJSON())}_performRefresh(){return ni("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rs(i,e){ne(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Rr{constructor({uid:e,auth:t,stsTokenManager:n,...a}){this.providerId="firebase",this.proactiveRefresh=new oO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new a_(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Bi(this,this.stsTokenManager.getToken(this.auth,e));return ne(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return sO(this,e)}reload(){return lO(this)}_assign(e){this!==e&&(ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Rr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Th(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(mt(this.auth.app))return Promise.reject(sn(this.auth));const e=await this.getIdToken();return await Bi(this,rO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,f=t.tenantId??void 0,m=t._redirectEventId??void 0,g=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:T,emailVerified:A,isAnonymous:k,providerData:K,stsTokenManager:G}=t;ne(T&&G,e,"internal-error");const W=Rl.fromJSON(this.name,G);ne(typeof T=="string",e,"internal-error"),Rs(n,e.name),Rs(a,e.name),ne(typeof A=="boolean",e,"internal-error"),ne(typeof k=="boolean",e,"internal-error"),Rs(l,e.name),Rs(c,e.name),Rs(f,e.name),Rs(m,e.name),Rs(g,e.name),Rs(_,e.name);const re=new Rr({uid:T,auth:e,email:a,emailVerified:A,displayName:n,isAnonymous:k,photoURL:c,phoneNumber:l,tenantId:f,stsTokenManager:W,createdAt:g,lastLoginAt:_});return K&&Array.isArray(K)&&(re.providerData=K.map(de=>({...de}))),m&&(re._redirectEventId=m),re}static async _fromIdTokenResponse(e,t,n=!1){const a=new Rl;a.updateFromServerResponse(t);const l=new Rr({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:n});return await Th(l),l}static async _fromGetAccountInfoResponse(e,t,n){const a=t.users[0];ne(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?t1(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),f=new Rl;f.updateFromIdToken(n);const m=new Rr({uid:a.localId,auth:e,stsTokenManager:f,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new a_(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,g),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA=new Map;function Jn(i){Dr(i instanceof Function,"Expected a class definition");let e=dA.get(i);return e?(Dr(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,dA.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}n1.type="NONE";const Jl=n1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Za(i,e,t){return`firebase:${i}:${e}:${t}`}class xl{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:a,name:l}=this.auth;this.fullUserKey=Za(this.userKey,a.apiKey,l),this.fullPersistenceKey=Za("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await um(this.auth,{idToken:e}).catch(()=>{});return t?Rr._fromGetAccountInfoResponse(this.auth,t,e):null}return Rr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new xl(Jn(Jl),e,n);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||Jn(Jl);const c=Za(n,e.config.apiKey,e.name);let f=null;for(const g of t)try{const _=await g._get(c);if(_){let T;if(typeof _=="string"){const A=await um(e,{idToken:_}).catch(()=>{});if(!A)break;T=await Rr._fromGetAccountInfoResponse(e,A,_)}else T=Rr._fromJSON(e,_);g!==l&&(f=T),l=g;break}}catch{}const m=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new xl(l,e,n):(l=m[0],f&&await l._set(c,f.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new xl(l,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(a1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(r1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(o1(e))return"Blackberry";if(l1(e))return"Webos";if(i1(e))return"Safari";if((e.includes("chrome/")||s1(e))&&!e.includes("edge/"))return"Chrome";if(jh(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=i.match(t);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function r1(i=Tt()){return/firefox\//i.test(i)}function i1(i=Tt()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function s1(i=Tt()){return/crios\//i.test(i)}function a1(i=Tt()){return/iemobile/i.test(i)}function jh(i=Tt()){return/android/i.test(i)}function o1(i=Tt()){return/blackberry/i.test(i)}function l1(i=Tt()){return/webos/i.test(i)}function zh(i=Tt()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function dO(i=Tt()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(i)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(i)}function fO(i=Tt()){var e;return zh(i)&&!!((e=window.navigator)!=null&&e.standalone)}function mO(){return BA()&&document.documentMode===10}function u1(i=Tt()){return zh(i)||jh(i)||l1(i)||o1(i)||/windows phone/i.test(i)||a1(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1(i,e=[]){let t;switch(i){case"Browser":t=fA(Tt());break;case"Worker":t=`${fA(Tt())}-${i}`;break;default:t=i}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ys}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=l=>new Promise((c,f)=>{try{const m=e(l);c(m)}catch(m){f(m)}});n.onAbort=t,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gO(i,e={}){return xt(i,"GET","/v2/passwordPolicy",Rt(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO=6;class _O{constructor(e){var n;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??yO,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let a=0;a<e.length;a++)n=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(e,t,n,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mA(this),this.idTokenSubscription=new mA(this),this.beforeStateQueue=new pO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=YR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Jn(t)),this._initializationPromise=this.queue(async()=>{var n,a,l;if(!this._deleted&&(this.persistenceManager=await xl.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await um(this,{idToken:e}),n=await Rr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(mt(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,f=n==null?void 0:n._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===f)&&(m!=null&&m.user)&&(n=m.user,a=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(n)}catch(c){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Th(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$V()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(mt(this.app))return Promise.reject(sn(this));const t=e?Ae(e):null;return t&&ne(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return mt(this.app)?Promise.reject(sn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return mt(this.app)?Promise.reject(sn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Jn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await gO(this),t=new _O(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new mo("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await hO(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Jn(e)||this._popupRedirectResolver;ne(t,this,"argument-error"),this.redirectPersistenceManager=await xl.create(this,[Jn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(ne(f,this,"internal-error"),f.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,n,a);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=c1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var t;if(mt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&WV(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function wt(i){return Ae(i)}class mA{constructor(e){this.auth=e,this.observer=null,this.addObserver=HA(t=>this.observer=t)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function EO(i){Bh=i}function Fv(i){return Bh.loadJS(i)}function TO(){return Bh.recaptchaV2Script}function wO(){return Bh.recaptchaEnterpriseScript}function bO(){return Bh.gapiScript}function h1(i){return`__${i}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AO=500,IO=6e4,If=1e12;class SO{constructor(e){this.auth=e,this.counter=If,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new CO(e,this.auth.name,t||{})),this.counter++,n}reset(e){var n;const t=e||If;(n=this._widgets.get(t))==null||n.delete(),this._widgets.delete(t)}getResponse(e){var n;const t=e||If;return((n=this._widgets.get(t))==null?void 0:n.getResponse())||""}async execute(e){var n;const t=e||If;return(n=this._widgets.get(t))==null||n.execute(),""}}class RO{constructor(){this.enterprise=new xO}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class xO{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class CO{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const a=typeof e=="string"?document.getElementById(e):e;ne(a,"argument-error",{appName:t}),this.container=a,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=NO(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},IO)},AO))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function NO(i){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<i;n++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const DO="recaptcha-enterprise",$c="NO_RECAPTCHA";class d1{constructor(e){this.type=DO,this.auth=wt(e)}async verify(e="verify",t=!1){async function n(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,f)=>{e1(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const g=new ZR(m);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,c(g.siteKey)}}).catch(m=>{f(m)})})}function a(l,c,f){const m=window.grecaptcha;cA(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(g=>{c(g)}).catch(()=>{c($c)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new RO().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{n(this.auth).then(f=>{if(!t&&cA(window.grecaptcha))a(f,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=wO();m.length!==0&&(m+=f),Fv(m).then(()=>{a(f,l,c)}).catch(g=>{c(g)})}}).catch(f=>{c(f)})})}}async function Cc(i,e,t,n=!1,a=!1){const l=new d1(i);let c;if(a)c=$c;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const m=f.phoneEnrollmentInfo.phoneNumber,g=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const m=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return n?Object.assign(f,{captchaResp:c}):Object.assign(f,{captchaResponse:c}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Ms(i,e,t,n,a){var l,c;if(a==="EMAIL_PASSWORD_PROVIDER")if((l=i._getRecaptchaConfig())!=null&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const f=await Cc(i,e,t,t==="getOobCode");return n(i,f)}else return n(i,e).catch(async f=>{if(f.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await Cc(i,e,t,t==="getOobCode");return n(i,m)}else return Promise.reject(f)});else if(a==="PHONE_PROVIDER")if((c=i._getRecaptchaConfig())!=null&&c.isProviderEnabled("PHONE_PROVIDER")){const f=await Cc(i,e,t);return n(i,f).catch(async m=>{var g;if(((g=i._getRecaptchaConfig())==null?void 0:g.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(m.code==="auth/missing-recaptcha-token"||m.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const _=await Cc(i,e,t,!1,!0);return n(i,_)}return Promise.reject(m)})}else{const f=await Cc(i,e,t,!1,!0);return n(i,f)}else return Promise.reject(a+" provider is not supported.")}async function PO(i){const e=wt(i),t=await e1(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),n=new ZR(t);e.tenantId==null?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,n.isAnyProviderEnabled()&&new d1(e).verify()}function kO(i,e){const t=(e==null?void 0:e.persistence)||[],n=(Array.isArray(t)?t:[t]).map(Jn);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function VO(i,e,t){const n=wt(i);ne(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const a=!!(t!=null&&t.disableWarnings),l=f1(e),{host:c,port:f}=OO(e),m=f===null?"":`:${f}`,g={url:`${l}//${c}${m}/`},_=Object.freeze({host:c,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!n._canInitEmulator){ne(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),ne(Ls(g,n.config.emulator)&&Ls(_,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=g,n.emulatorConfig=_,n.settings.appVerificationDisabledForTesting=!0,eu(c)?(UA(`${l}//${c}${m}`),FA("Auth",!0)):a||MO()}function f1(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function OO(i){const e=f1(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const l=a[1];return{host:l,port:pA(n.substr(l.length+1))}}else{const[l,c]=n.split(":");return{host:l,port:pA(c)}}}function pA(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function MO(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ni("not implemented")}_getIdTokenResponse(e){return ni("not implemented")}_linkToIdToken(e,t){return ni("not implemented")}_getReauthenticationResolver(e){return ni("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m1(i,e){return xt(i,"POST","/v1/accounts:resetPassword",Rt(i,e))}async function LO(i,e){return xt(i,"POST","/v1/accounts:update",e)}async function UO(i,e){return xt(i,"POST","/v1/accounts:signUp",e)}async function FO(i,e){return xt(i,"POST","/v1/accounts:update",Rt(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jO(i,e){return Qi(i,"POST","/v1/accounts:signInWithPassword",Rt(i,e))}async function qm(i,e){return xt(i,"POST","/v1/accounts:sendOobCode",Rt(i,e))}async function zO(i,e){return qm(i,e)}async function BO(i,e){return qm(i,e)}async function qO(i,e){return qm(i,e)}async function GO(i,e){return qm(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HO(i,e){return Qi(i,"POST","/v1/accounts:signInWithEmailLink",Rt(i,e))}async function KO(i,e){return Qi(i,"POST","/v1/accounts:signInWithEmailLink",Rt(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh extends hu{constructor(e,t,n,a=null){super("password",n),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new wh(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new wh(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ms(e,t,"signInWithPassword",jO,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return HO(e,{email:this._email,oobCode:this._password});default:pn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ms(e,n,"signUpPassword",UO,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return KO(e,{idToken:t,email:this._email,oobCode:this._password});default:pn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ui(i,e){return Qi(i,"POST","/v1/accounts:signInWithIdp",Rt(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QO="http://localhost";class ui extends hu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ui(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):pn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:a,...l}=t;if(!n||!a)return null;const c=new ui(n,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Ui(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ui(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ui(e,t)}buildRequest(){const e={requestUri:QO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=tu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gA(i,e){return xt(i,"POST","/v1/accounts:sendVerificationCode",Rt(i,e))}async function WO(i,e){return Qi(i,"POST","/v1/accounts:signInWithPhoneNumber",Rt(i,e))}async function YO(i,e){const t=await Qi(i,"POST","/v1/accounts:signInWithPhoneNumber",Rt(i,e));if(t.temporaryProof)throw Uc(i,"account-exists-with-different-credential",t);return t}const $O={USER_NOT_FOUND:"user-not-found"};async function XO(i,e){const t={...e,operation:"REAUTH"};return Qi(i,"POST","/v1/accounts:signInWithPhoneNumber",Rt(i,t),$O)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo extends hu{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new eo({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new eo({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return WO(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return YO(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return XO(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:a}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:a}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:a,temporaryProof:l}=e;return!n&&!t&&!a&&!l?null:new eo({verificationId:t,verificationCode:n,phoneNumber:a,temporaryProof:l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JO(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ZO(i){const e=Al(Pc(i)).link,t=e?Al(Pc(e)).deep_link_id:null,n=Al(Pc(i)).deep_link_id;return(n?Al(Pc(n)).link:null)||n||t||e||i}class Gm{constructor(e){const t=Al(Pc(e)),n=t.apiKey??null,a=t.oobCode??null,l=JO(t.mode??null);ne(n&&a&&l,"argument-error"),this.apiKey=n,this.operation=l,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=ZO(e);try{return new Gm(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(){this.providerId=ta.PROVIDER_ID}static credential(e,t){return wh._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Gm.parseLink(t);return ne(n,"argument-error"),wh._fromEmailAndCode(e,n.code,n.tenantId)}}ta.PROVIDER_ID="password";ta.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ta.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du extends Wi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Cl extends du{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return ne("providerId"in t&&"signInMethod"in t,"argument-error"),ui._fromParams(t)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return ne(e.idToken||e.accessToken,"argument-error"),ui._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return Cl.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Cl.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:a,pendingToken:l,nonce:c,providerId:f}=e;if(!n&&!a&&!t&&!l||!f)return null;try{return new Cl(f)._credential({idToken:t,accessToken:n,nonce:c,pendingToken:l})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends du{constructor(){super("facebook.com")}static credential(e){return ui._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $r.credential(e.oauthAccessToken)}catch{return null}}}$r.FACEBOOK_SIGN_IN_METHOD="facebook.com";$r.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr extends du{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ui._fromParams({providerId:Xr.PROVIDER_ID,signInMethod:Xr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Xr.credentialFromTaggedObject(e)}static credentialFromError(e){return Xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Xr.credential(t,n)}catch{return null}}}Xr.GOOGLE_SIGN_IN_METHOD="google.com";Xr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr extends du{constructor(){super("github.com")}static credential(e){return ui._fromParams({providerId:Jr.PROVIDER_ID,signInMethod:Jr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jr.credentialFromTaggedObject(e)}static credentialFromError(e){return Jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Jr.credential(e.oauthAccessToken)}catch{return null}}}Jr.GITHUB_SIGN_IN_METHOD="github.com";Jr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM="http://localhost";class Zl extends hu{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return Ui(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ui(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ui(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:a,pendingToken:l}=t;return!n||!a||!l||n!==a?null:new Zl(n,l)}static _create(e,t){return new Zl(e,t)}buildRequest(){return{requestUri:eM,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM="saml.";class cm extends Wi{constructor(e){ne(e.startsWith(tM),"argument-error"),super(e)}static credentialFromResult(e){return cm.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return cm.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Zl.fromJSON(e);return ne(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:n}=e;if(!t||!n)return null;try{return Zl._create(n,t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr extends du{constructor(){super("twitter.com")}static credential(e,t){return ui._fromParams({providerId:Zr.PROVIDER_ID,signInMethod:Zr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Zr.credentialFromTaggedObject(e)}static credentialFromError(e){return Zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Zr.credential(t,n)}catch{return null}}}Zr.TWITTER_SIGN_IN_METHOD="twitter.com";Zr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p1(i,e){return Qi(i,"POST","/v1/accounts:signUp",Rt(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,a=!1){const l=await Rr._fromIdTokenResponse(e,n,a),c=yA(n);return new yr({user:l,providerId:c,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const a=yA(n);return new yr({user:e,providerId:a,_tokenResponse:n,operationType:t})}}function yA(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nM(i){var a;if(mt(i.app))return Promise.reject(sn(i));const e=wt(i);if(await e._initializationPromise,(a=e.currentUser)!=null&&a.isAnonymous)return new yr({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await p1(e,{returnSecureToken:!0}),n=await yr._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(n.user),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm extends Nn{constructor(e,t,n,a){super(t.code,t.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,hm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,a){return new hm(e,t,n,a)}}function g1(i,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?hm._fromErrorAndOperation(i,l,e,n):l})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(i){return new Set(i.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rM(i,e){const t=Ae(i);await Hm(!0,t,e);const{providerUserInfo:n}=await iO(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),a=y1(n||[]);return t.providerData=t.providerData.filter(l=>a.has(l.providerId)),a.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function jv(i,e,t=!1){const n=await Bi(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return yr._forOperation(i,"link",n)}async function Hm(i,e,t){await Th(e);const n=y1(e.providerData),a=i===!1?"provider-already-linked":"no-such-provider";ne(n.has(t)===i,e.auth,a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _1(i,e,t=!1){const{auth:n}=i;if(mt(n.app))return Promise.reject(sn(n));const a="reauthenticate";try{const l=await Bi(i,g1(n,a,e,i),t);ne(l.idToken,n,"internal-error");const c=Bm(l.idToken);ne(c,n,"internal-error");const{sub:f}=c;return ne(i.uid===f,n,"user-mismatch"),yr._forOperation(i,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&pn(n,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v1(i,e,t=!1){if(mt(i.app))return Promise.reject(sn(i));const n="signIn",a=await g1(i,n,e),l=await yr._fromIdTokenResponse(i,n,a);return t||await i._updateCurrentUser(l.user),l}async function Km(i,e){return v1(wt(i),e)}async function E1(i,e){const t=Ae(i);return await Hm(!1,t,e.providerId),jv(t,e)}async function T1(i,e){return _1(Ae(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iM(i,e){return Qi(i,"POST","/v1/accounts:signInWithCustomToken",Rt(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sM(i,e){if(mt(i.app))return Promise.reject(sn(i));const t=wt(i),n=await iM(t,{token:e,returnSecureToken:!0}),a=await yr._fromIdTokenResponse(t,"signIn",n);return await t._updateCurrentUser(a.user),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?zv._fromServerResponse(e,t):"totpInfo"in t?Bv._fromServerResponse(e,t):pn(e,"internal-error")}}class zv extends qh{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new zv(t)}}class Bv extends qh{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new Bv(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(i,e,t){var n;ne(((n=t.url)==null?void 0:n.length)>0,i,"invalid-continue-uri"),ne(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,i,"invalid-dynamic-link-domain"),ne(typeof t.linkDomain>"u"||t.linkDomain.length>0,i,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(ne(t.iOS.bundleId.length>0,i,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(ne(t.android.packageName.length>0,i,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qv(i){const e=wt(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function aM(i,e,t){const n=wt(i),a={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&Qm(n,a,t),await Ms(n,a,"getOobCode",BO,"EMAIL_PASSWORD_PROVIDER")}async function oM(i,e,t){await m1(Ae(i),{oobCode:e,newPassword:t}).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&qv(i),n})}async function lM(i,e){await FO(Ae(i),{oobCode:e})}async function w1(i,e){const t=Ae(i),n=await m1(t,{oobCode:e}),a=n.requestType;switch(ne(a,t,"internal-error"),a){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ne(n.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ne(n.mfaInfo,t,"internal-error");default:ne(n.email,t,"internal-error")}let l=null;return n.mfaInfo&&(l=qh._fromServerResponse(wt(t),n.mfaInfo)),{data:{email:(n.requestType==="VERIFY_AND_CHANGE_EMAIL"?n.newEmail:n.email)||null,previousEmail:(n.requestType==="VERIFY_AND_CHANGE_EMAIL"?n.email:n.newEmail)||null,multiFactorInfo:l},operation:a}}async function uM(i,e){const{data:t}=await w1(Ae(i),e);return t.email}async function cM(i,e,t){if(mt(i.app))return Promise.reject(sn(i));const n=wt(i),c=await Ms(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",p1,"EMAIL_PASSWORD_PROVIDER").catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&qv(i),m}),f=await yr._fromIdTokenResponse(n,"signIn",c);return await n._updateCurrentUser(f.user),f}function hM(i,e,t){return mt(i.app)?Promise.reject(sn(i)):Km(Ae(i),ta.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&qv(i),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dM(i,e,t){const n=wt(i),a={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function l(c,f){ne(f.handleCodeInApp,n,"argument-error"),f&&Qm(n,c,f)}l(a,t),await Ms(n,a,"getOobCode",qO,"EMAIL_PASSWORD_PROVIDER")}function fM(i,e){const t=Gm.parseLink(e);return(t==null?void 0:t.operation)==="EMAIL_SIGNIN"}async function mM(i,e,t){if(mt(i.app))return Promise.reject(sn(i));const n=Ae(i),a=ta.credentialWithLink(e,t||Eh());return ne(a._tenantId===(n.tenantId||null),n,"tenant-id-mismatch"),Km(n,a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pM(i,e){return xt(i,"POST","/v1/accounts:createAuthUri",Rt(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gM(i,e){const t=Lv()?Eh():"http://localhost",n={identifier:e,continueUri:t},{signinMethods:a}=await pM(Ae(i),n);return a||[]}async function yM(i,e){const t=Ae(i),a={requestType:"VERIFY_EMAIL",idToken:await i.getIdToken()};e&&Qm(t.auth,a,e);const{email:l}=await zO(t.auth,a);l!==i.email&&await i.reload()}async function _M(i,e,t){const n=Ae(i),l={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await i.getIdToken(),newEmail:e};t&&Qm(n.auth,l,t);const{email:c}=await GO(n.auth,l);c!==i.email&&await i.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vM(i,e){return xt(i,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EM(i,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const n=Ae(i),l={idToken:await n.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},c=await Bi(n,vM(n.auth,l));n.displayName=c.displayName||null,n.photoURL=c.photoUrl||null;const f=n.providerData.find(({providerId:m})=>m==="password");f&&(f.displayName=n.displayName,f.photoURL=n.photoURL),await n._updateTokensIfNecessary(c)}function TM(i,e){const t=Ae(i);return mt(t.auth.app)?Promise.reject(sn(t.auth)):b1(t,e,null)}function wM(i,e){return b1(Ae(i),null,e)}async function b1(i,e,t){const{auth:n}=i,l={idToken:await i.getIdToken(),returnSecureToken:!0};e&&(l.email=e),t&&(l.password=t);const c=await Bi(i,LO(n,l));await i._updateTokensIfNecessary(c,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bM(i){var a,l;if(!i)return null;const{providerId:e}=i,t=i.rawUserInfo?JSON.parse(i.rawUserInfo):{},n=i.isNewUser||i.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&(i!=null&&i.idToken)){const c=(l=(a=Bm(i.idToken))==null?void 0:a.firebase)==null?void 0:l.sign_in_provider;if(c){const f=c!=="anonymous"&&c!=="custom"?c:null;return new Nl(n,f)}}if(!e)return null;switch(e){case"facebook.com":return new AM(n,t);case"github.com":return new IM(n,t);case"google.com":return new SM(n,t);case"twitter.com":return new RM(n,t,i.screenName||null);case"custom":case"anonymous":return new Nl(n,null);default:return new Nl(n,e,t)}}class Nl{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class A1 extends Nl{constructor(e,t,n,a){super(e,t,n),this.username=a}}class AM extends Nl{constructor(e,t){super(e,"facebook.com",t)}}class IM extends A1{constructor(e,t){super(e,"github.com",t,typeof(t==null?void 0:t.login)=="string"?t==null?void 0:t.login:null)}}class SM extends Nl{constructor(e,t){super(e,"google.com",t)}}class RM extends A1{constructor(e,t,n){super(e,"twitter.com",t,n)}}function xM(i){const{user:e,_tokenResponse:t}=i;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:bM(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new Xa("enroll",e,t)}static _fromMfaPendingCredential(e){return new Xa("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(e!=null&&e.multiFactorSession){if((t=e.multiFactorSession)!=null&&t.pendingCredential)return Xa._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if((n=e.multiFactorSession)!=null&&n.idToken)return Xa._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=wt(e),a=t.customData._serverResponse,l=(a.mfaInfo||[]).map(f=>qh._fromServerResponse(n,f));ne(a.mfaPendingCredential,n,"internal-error");const c=Xa._fromMfaPendingCredential(a.mfaPendingCredential);return new Gv(c,l,async f=>{const m=await f._process(n,c);delete a.mfaInfo,delete a.mfaPendingCredential;const g={...a,idToken:m.idToken,refreshToken:m.refreshToken};switch(t.operationType){case"signIn":const _=await yr._fromIdTokenResponse(n,t.operationType,g);return await n._updateCurrentUser(_.user),_;case"reauthenticate":return ne(t.user,n,"internal-error"),yr._forOperation(t.user,t.operationType,g);default:pn(n,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function CM(i,e){var a;const t=Ae(i),n=e;return ne(e.customData.operationType,t,"argument-error"),ne((a=n.customData._serverResponse)==null?void 0:a.mfaPendingCredential,t,"argument-error"),Gv._fromError(t,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A(i,e){return xt(i,"POST","/v2/accounts/mfaEnrollment:start",Rt(i,e))}function NM(i,e){return xt(i,"POST","/v2/accounts/mfaEnrollment:finalize",Rt(i,e))}function DM(i,e){return xt(i,"POST","/v2/accounts/mfaEnrollment:withdraw",Rt(i,e))}class Hv{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(n=>qh._fromServerResponse(e.auth,n)))})}static _fromUser(e){return new Hv(e)}async getSession(){return Xa._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,a=await this.getSession(),l=await Bi(this.user,n._process(this.user.auth,a,t));return await this.user._updateTokensIfNecessary(l),this.user.reload()}async unenroll(e){const t=typeof e=="string"?e:e.uid,n=await this.user.getIdToken();try{const a=await Bi(this.user,DM(this.user.auth,{idToken:n,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:l})=>l!==t),await this.user._updateTokensIfNecessary(a),await this.user.reload()}catch(a){throw a}}}const vy=new WeakMap;function PM(i){const e=Ae(i);return vy.has(e)||vy.set(e,Hv._fromUser(e)),vy.get(e)}const dm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(dm,"1"),this.storage.removeItem(dm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM=1e3,VM=10;class S1 extends I1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=u1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),a=this.localCache[t];n!==a&&e(t,a,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,f,m)=>{this.notifyListeners(c,m)});return}const n=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(n);!t&&this.localCache[n]===c||this.notifyListeners(n,c)},l=this.storage.getItem(n);mO()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,VM):a()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},kM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}S1.type="LOCAL";const Kv=S1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1 extends I1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}R1.type="SESSION";const co=R1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OM(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const n=new Wm(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const f=Array.from(c).map(async g=>g(t.origin,l)),m=await OM(f);t.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gh(i="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((f,m)=>{const g=Gh("",20);a.port1.start();const _=setTimeout(()=>{m(new Error("unsupported_event"))},n);c={messageChannel:a,onMessage(T){const A=T;if(A.data.eventId===g)switch(A.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(A.data.response);break;default:clearTimeout(_),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(){return window}function LM(i){jt().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(){return typeof jt().WorkerGlobalScope<"u"&&typeof jt().importScripts=="function"}async function UM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function FM(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)==null?void 0:i.controller)||null}function jM(){return Qv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1="firebaseLocalStorageDb",zM=1,fm="firebaseLocalStorage",C1="fbase_key";class Hh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ym(i,e){return i.transaction([fm],e?"readwrite":"readonly").objectStore(fm)}function BM(){const i=indexedDB.deleteDatabase(x1);return new Hh(i).toPromise()}function o_(){const i=indexedDB.open(x1,zM);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const n=i.result;try{n.createObjectStore(fm,{keyPath:C1})}catch(a){t(a)}}),i.addEventListener("success",async()=>{const n=i.result;n.objectStoreNames.contains(fm)?e(n):(n.close(),await BM(),e(await o_()))})})}async function vA(i,e,t){const n=Ym(i,!0).put({[C1]:e,value:t});return new Hh(n).toPromise()}async function qM(i,e){const t=Ym(i,!1).get(e),n=await new Hh(t).toPromise();return n===void 0?null:n.value}function EA(i,e){const t=Ym(i,!0).delete(e);return new Hh(t).toPromise()}const GM=800,HM=3;class N1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await o_(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>HM)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Qv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wm._getInstance(jM()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await UM(),!this.activeServiceWorker)return;this.sender=new MM(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(n=e[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||FM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await o_();return await vA(e,dm,"1"),await EA(e,dm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>vA(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>qM(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>EA(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Ym(a,!1).getAll();return new Hh(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const a of Array.from(n))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),GM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}N1.type="LOCAL";const bh=N1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(i,e){return xt(i,"POST","/v2/accounts/mfaSignIn:start",Rt(i,e))}function KM(i,e){return xt(i,"POST","/v2/accounts/mfaSignIn:finalize",Rt(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ey=h1("rcb"),QM=new Fh(3e4,6e4);class WM{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=jt().grecaptcha)!=null&&e.render)}load(e,t=""){return ne(YM(t),e,"argument-error"),this.shouldResolveImmediately(t)&&uA(jt().grecaptcha)?Promise.resolve(jt().grecaptcha):new Promise((n,a)=>{const l=jt().setTimeout(()=>{a(Yt(e,"network-request-failed"))},QM.get());jt()[Ey]=()=>{jt().clearTimeout(l),delete jt()[Ey];const f=jt().grecaptcha;if(!f||!uA(f)){a(Yt(e,"internal-error"));return}const m=f.render;f.render=(g,_)=>{const T=m(g,_);return this.counter++,T},this.hostLanguage=t,n(f)};const c=`${TO()}?${tu({onload:Ey,render:"explicit",hl:t})}`;Fv(c).catch(()=>{clearTimeout(l),a(Yt(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!((t=jt().grecaptcha)!=null&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function YM(i){return i.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(i)}class $M{async load(e){return new SO(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xc="recaptcha",XM={theme:"light",type:"image"};let JM=class{constructor(e,t,n={...XM}){this.parameters=n,this.type=Xc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=wt(e),this.isInvisible=this.parameters.size==="invisible",ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const a=typeof t=="string"?document.getElementById(t):t;ne(a,this.auth,"argument-error"),this.container=a,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new $M:new WM,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise(a=>{const l=c=>{c&&(this.tokenChangeListeners.delete(l),a(c))};this.tokenChangeListeners.add(l),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){ne(!this.parameters.sitekey,this.auth,"argument-error"),ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(n=>n(t)),typeof e=="function")e(t);else if(typeof e=="string"){const n=jt()[e];typeof n=="function"&&n(t)}}}assertNotDestroyed(){ne(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){ne(Lv()&&!Qv(),this.auth,"internal-error"),await ZM(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await nO(this.auth);ne(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function ZM(){let i=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}i=()=>e(),window.addEventListener("load",i)}).catch(e=>{throw i&&window.removeEventListener("load",i),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=eo._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function e6(i,e,t){if(mt(i.app))return Promise.reject(sn(i));const n=wt(i),a=await $m(n,e,Ae(t));return new Wv(a,l=>Km(n,l))}async function t6(i,e,t){const n=Ae(i);await Hm(!1,n,"phone");const a=await $m(n.auth,e,Ae(t));return new Wv(a,l=>E1(n,l))}async function n6(i,e,t){const n=Ae(i);if(mt(n.auth.app))return Promise.reject(sn(n.auth));const a=await $m(n.auth,e,Ae(t));return new Wv(a,l=>T1(n,l))}async function $m(i,e,t){var n;if(!i._getRecaptchaConfig())try{await PO(i)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let a;if(typeof e=="string"?a={phoneNumber:e}:a=e,"session"in a){const l=a.session;if("phoneNumber"in a){ne(l.type==="enroll",i,"internal-error");const c={idToken:l.credential,phoneEnrollmentInfo:{phoneNumber:a.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Ms(i,c,"mfaSmsEnrollment",async(_,T)=>{if(T.phoneEnrollmentInfo.captchaResponse===$c){ne((t==null?void 0:t.type)===Xc,_,"argument-error");const A=await Ty(_,T,t);return _A(_,A)}return _A(_,T)},"PHONE_PROVIDER").catch(_=>Promise.reject(_))).phoneSessionInfo.sessionInfo}else{ne(l.type==="signin",i,"internal-error");const c=((n=a.multiFactorHint)==null?void 0:n.uid)||a.multiFactorUid;ne(c,i,"missing-multi-factor-info");const f={mfaPendingCredential:l.credential,mfaEnrollmentId:c,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Ms(i,f,"mfaSmsSignIn",async(T,A)=>{if(A.phoneSignInInfo.captchaResponse===$c){ne((t==null?void 0:t.type)===Xc,T,"argument-error");const k=await Ty(T,A,t);return TA(T,k)}return TA(T,A)},"PHONE_PROVIDER").catch(T=>Promise.reject(T))).phoneResponseInfo.sessionInfo}}else{const l={phoneNumber:a.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Ms(i,l,"sendVerificationCode",async(g,_)=>{if(_.captchaResponse===$c){ne((t==null?void 0:t.type)===Xc,g,"argument-error");const T=await Ty(g,_,t);return gA(g,T)}return gA(g,_)},"PHONE_PROVIDER").catch(g=>Promise.reject(g))).sessionInfo}}finally{t==null||t._reset()}}async function r6(i,e){const t=Ae(i);if(mt(t.auth.app))return Promise.reject(sn(t.auth));await jv(t,e)}async function Ty(i,e,t){ne(t.type===Xc,i,"argument-error");const n=await t.verify();ne(typeof n=="string",i,"argument-error");const a={...e};if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.captchaResponse,f=a.phoneEnrollmentInfo.clientType,m=a.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:n,captchaResponse:c,clientType:f,recaptchaVersion:m}}),a}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.captchaResponse,c=a.phoneSignInInfo.clientType,f=a.phoneSignInInfo.recaptchaVersion;return Object.assign(a,{phoneSignInInfo:{recaptchaToken:n,captchaResponse:l,clientType:c,recaptchaVersion:f}}),a}else return Object.assign(a,{recaptchaToken:n}),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ho=class Ff{constructor(e){this.providerId=Ff.PROVIDER_ID,this.auth=wt(e)}verifyPhoneNumber(e,t){return $m(this.auth,e,Ae(t))}static credential(e,t){return eo._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Ff.credentialFromTaggedObject(t)}static credentialFromError(e){return Ff.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?eo._fromTokenResponse(t,n):null}};ho.PROVIDER_ID="phone";ho.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vo(i,e){return e?Jn(e):(ne(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv extends hu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ui(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ui(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ui(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function i6(i){return v1(i.auth,new Yv(i),i.bypassAuthState)}function s6(i){const{auth:e,user:t}=i;return ne(t,e,"internal-error"),_1(t,new Yv(i),i.bypassAuthState)}async function a6(i){const{auth:e,user:t}=i;return ne(t,e,"internal-error"),jv(t,new Yv(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e,t,n,a,l=!1){this.auth=e,this.resolver=n,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:a,tenantId:l,error:c,type:f}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:n,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return i6;case"linkViaPopup":case"linkViaRedirect":return a6;case"reauthViaPopup":case"reauthViaRedirect":return s6;default:pn(this.auth,"internal-error")}}resolve(e){Dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o6=new Fh(2e3,1e4);async function l6(i,e,t){if(mt(i.app))return Promise.reject(Yt(i,"operation-not-supported-in-this-environment"));const n=wt(i);cu(i,e,Wi);const a=vo(n,t);return new Mi(n,"signInViaPopup",e,a).executeNotNull()}async function u6(i,e,t){const n=Ae(i);if(mt(n.auth.app))return Promise.reject(Yt(n.auth,"operation-not-supported-in-this-environment"));cu(n.auth,e,Wi);const a=vo(n.auth,t);return new Mi(n.auth,"reauthViaPopup",e,a,n).executeNotNull()}async function c6(i,e,t){const n=Ae(i);cu(n.auth,e,Wi);const a=vo(n.auth,t);return new Mi(n.auth,"linkViaPopup",e,a,n).executeNotNull()}class Mi extends D1{constructor(e,t,n,a,l){super(e,t,a,l),this.provider=n,this.authWindow=null,this.pollId=null,Mi.currentPopupAction&&Mi.currentPopupAction.cancel(),Mi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ne(e,this.auth,"internal-error"),e}async onExecution(){Dr(this.filter.length===1,"Popup operations only handle one event");const e=Gh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Yt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Yt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Mi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;if((n=(t=this.authWindow)==null?void 0:t.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Yt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,o6.get())};e()}}Mi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h6="pendingRedirect",Jc=new Map;class d6 extends D1{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Jc.get(this.auth._key());if(!e){try{const n=await f6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Jc.set(this.auth._key(),e)}return this.bypassAuthState||Jc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function f6(i,e){const t=k1(e),n=P1(i);if(!await n._isAvailable())return!1;const a=await n._get(t)==="true";return await n._remove(t),a}async function $v(i,e){return P1(i)._set(k1(e),"true")}function m6(){Jc.clear()}function Xv(i,e){Jc.set(i._key(),e)}function P1(i){return Jn(i._redirectPersistence)}function k1(i){return Za(h6,i.config.apiKey,i.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p6(i,e,t){return g6(i,e,t)}async function g6(i,e,t){if(mt(i.app))return Promise.reject(sn(i));const n=wt(i);cu(i,e,Wi),await n._initializationPromise;const a=vo(n,t);return await $v(a,n),a._openRedirect(n,e,"signInViaRedirect")}function y6(i,e,t){return _6(i,e,t)}async function _6(i,e,t){const n=Ae(i);if(cu(n.auth,e,Wi),mt(n.auth.app))return Promise.reject(sn(n.auth));await n.auth._initializationPromise;const a=vo(n.auth,t);await $v(a,n.auth);const l=await V1(n);return a._openRedirect(n.auth,e,"reauthViaRedirect",l)}function v6(i,e,t){return E6(i,e,t)}async function E6(i,e,t){const n=Ae(i);cu(n.auth,e,Wi),await n.auth._initializationPromise;const a=vo(n.auth,t);await Hm(!1,n,e.providerId),await $v(a,n.auth);const l=await V1(n);return a._openRedirect(n.auth,e,"linkViaRedirect",l)}async function T6(i,e){return await wt(i)._initializationPromise,Xm(i,e,!1)}async function Xm(i,e,t=!1){if(mt(i.app))return Promise.reject(sn(i));const n=wt(i),a=vo(n,e),c=await new d6(n,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await n._persistUserIfCurrent(c.user),await n._setRedirectUser(null,e)),c}async function V1(i){const e=Gh(`${i.uid}:::`);return i._redirectEventId=e,await i.auth._setRedirectUser(i),await i.auth._persistUserIfCurrent(i),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w6=600*1e3;class O1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!b6(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!M1(e)){const a=((n=e.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";t.onError(Yt(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=w6&&this.cachedEventUids.clear(),this.cachedEventUids.has(wA(e))}saveEventToCache(e){this.cachedEventUids.add(wA(e)),this.lastProcessedEventTime=Date.now()}}function wA(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function M1({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function b6(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return M1(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L1(i,e={}){return xt(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,I6=/^https?/;async function S6(i){if(i.config.emulator)return;const{authorizedDomains:e}=await L1(i);for(const t of e)try{if(R6(t))return}catch{}pn(i,"unauthorized-domain")}function R6(i){const e=Eh(),{protocol:t,hostname:n}=new URL(e);if(i.startsWith("chrome-extension://")){const c=new URL(i);return c.hostname===""&&n===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===n}if(!I6.test(t))return!1;if(A6.test(i))return n===i;const a=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x6=new Fh(3e4,6e4);function bA(){const i=jt().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function C6(i){return new Promise((e,t)=>{var a,l,c;function n(){bA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{bA(),t(Yt(i,"network-request-failed"))},timeout:x6.get()})}if((l=(a=jt().gapi)==null?void 0:a.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=jt().gapi)!=null&&c.load)n();else{const f=h1("iframefcb");return jt()[f]=()=>{gapi.load?n():t(Yt(i,"network-request-failed"))},Fv(`${bO()}?onload=${f}`).catch(m=>t(m))}}).catch(e=>{throw jf=null,e})}let jf=null;function N6(i){return jf=jf||C6(i),jf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D6=new Fh(5e3,15e3),P6="__/auth/iframe",k6="emulator/auth/iframe",V6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},O6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function M6(i){const e=i.config;ne(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?Uv(e,k6):`https://${i.config.authDomain}/${P6}`,n={apiKey:e.apiKey,appName:i.name,v:Ys},a=O6.get(i.config.apiHost);a&&(n.eid=a);const l=i._getFrameworks();return l.length&&(n.fw=l.join(",")),`${t}?${tu(n).slice(1)}`}async function L6(i){const e=await N6(i),t=jt().gapi;return ne(t,i,"internal-error"),e.open({where:document.body,url:M6(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:V6,dontclear:!0},n=>new Promise(async(a,l)=>{await n.restyle({setHideOnLeave:!1});const c=Yt(i,"network-request-failed"),f=jt().setTimeout(()=>{l(c)},D6.get());function m(){jt().clearTimeout(f),a(n)}n.ping(m).then(m,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},F6=500,j6=600,z6="_blank",B6="http://localhost";class AA{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function q6(i,e,t,n=F6,a=j6){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-n)/2,0).toString();let f="";const m={...U6,width:n.toString(),height:a.toString(),top:l,left:c},g=Tt().toLowerCase();t&&(f=s1(g)?z6:t),r1(g)&&(e=e||B6,m.scrollbars="yes");const _=Object.entries(m).reduce((A,[k,K])=>`${A}${k}=${K},`,"");if(fO(g)&&f!=="_self")return G6(e||"",f),new AA(null);const T=window.open(e||"",f,_);ne(T,i,"popup-blocked");try{T.focus()}catch{}return new AA(T)}function G6(i,e){const t=document.createElement("a");t.href=i,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H6="__/auth/handler",K6="emulator/auth/handler",Q6=encodeURIComponent("fac");async function l_(i,e,t,n,a,l){ne(i.config.authDomain,i,"auth-domain-config-required"),ne(i.config.apiKey,i,"invalid-api-key");const c={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:n,v:Ys,eventId:a};if(e instanceof Wi){e.setDefaultLanguage(i.languageCode),c.providerId=e.providerId||"",ZC(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,T]of Object.entries(l||{}))c[_]=T}if(e instanceof du){const _=e.getScopes().filter(T=>T!=="");_.length>0&&(c.scopes=_.join(","))}i.tenantId&&(c.tid=i.tenantId);const f=c;for(const _ of Object.keys(f))f[_]===void 0&&delete f[_];const m=await i._getAppCheckToken(),g=m?`#${Q6}=${encodeURIComponent(m)}`:"";return`${W6(i)}?${tu(f).slice(1)}${g}`}function W6({config:i}){return i.emulator?Uv(i,K6):`https://${i.authDomain}/${H6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy="webStorageSupport";class Y6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=co,this._completeRedirectFn=Xm,this._overrideRedirectResult=Xv}async _openPopup(e,t,n,a){var c;Dr((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await l_(e,t,n,Eh(),a);return q6(e,l,Gh())}async _openRedirect(e,t,n,a){await this._originValidation(e);const l=await l_(e,t,n,Eh(),a);return LM(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(Dr(l,"If manager is not set, promise should be"),l)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await L6(e),n=new O1(e);return t.register("authEvent",a=>(ne(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(wy,{type:wy},a=>{var c;const l=(c=a==null?void 0:a[0])==null?void 0:c[wy];l!==void 0&&t(!!l),pn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=S6(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return u1()||i1()||zh()}}const $6=Y6;class X6{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return ni("unexpected MultiFactorSessionType")}}}class Jv extends X6{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Jv(e)}_finalizeEnroll(e,t,n){return NM(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return KM(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class U1{constructor(){}static assertion(e){return Jv._fromCredential(e)}}U1.FACTOR_ID="phone";var IA="@firebase/auth",SA="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z6(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function e4(i){js(new ai("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=n.options;ne(c&&!c.includes(":"),"invalid-api-key",{appName:n.name});const m={apiKey:c,authDomain:f,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:c1(i)},g=new vO(n,a,l,m);return kO(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),js(new ai("auth-internal",e=>{const t=wt(e.getProvider("auth").getImmediate());return(n=>new J6(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),xr(IA,SA,Z6(i)),xr(IA,SA,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t4=300;zC("authIdTokenMaxAge");function n4(){var i;return((i=document.getElementsByTagName("head"))==null?void 0:i[0])??document}EO({loadJS(i){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",i),n.onload=e,n.onerror=a=>{const l=Yt("internal-error");l.customData=a,t(l)},n.type="text/javascript",n.charset="UTF-8",n4().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});e4("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fo(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r4=2e3;async function i4(i,e,t){const{BuildInfo:n}=fo();Dr(e.sessionId,"AuthEvent did not contain a session ID");const a=await u4(e.sessionId),l={};return zh()?l.ibi=n.packageName:jh()?l.apn=n.packageName:pn(i,"operation-not-supported-in-this-environment"),n.displayName&&(l.appDisplayName=n.displayName),l.sessionId=a,l_(i,t,e.type,void 0,e.eventId??void 0,l)}async function s4(i){const{BuildInfo:e}=fo(),t={};zh()?t.iosBundleId=e.packageName:jh()?t.androidPackageName=e.packageName:pn(i,"operation-not-supported-in-this-environment"),await L1(i,t)}function a4(i){const{cordova:e}=fo();return new Promise(t=>{e.plugins.browsertab.isAvailable(n=>{let a=null;n?e.plugins.browsertab.openUrl(i):a=e.InAppBrowser.open(i,dO()?"_blank":"_system","location=yes"),t(a)})})}async function o4(i,e,t){const{cordova:n}=fo();let a=()=>{};try{await new Promise((l,c)=>{let f=null;function m(){var A;l();const T=(A=n.plugins.browsertab)==null?void 0:A.close;typeof T=="function"&&T(),typeof(t==null?void 0:t.close)=="function"&&t.close()}function g(){f||(f=window.setTimeout(()=>{c(Yt(i,"redirect-cancelled-by-user"))},r4))}function _(){(document==null?void 0:document.visibilityState)==="visible"&&g()}e.addPassiveListener(m),document.addEventListener("resume",g,!1),jh()&&document.addEventListener("visibilitychange",_,!1),a=()=>{e.removePassiveListener(m),document.removeEventListener("resume",g,!1),document.removeEventListener("visibilitychange",_,!1),f&&window.clearTimeout(f)}})}finally{a()}}function l4(i){var t,n,a,l,c,f,m,g,_,T;const e=fo();ne(typeof((t=e==null?void 0:e.universalLinks)==null?void 0:t.subscribe)=="function",i,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ne(typeof((n=e==null?void 0:e.BuildInfo)==null?void 0:n.packageName)<"u",i,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ne(typeof((c=(l=(a=e==null?void 0:e.cordova)==null?void 0:a.plugins)==null?void 0:l.browsertab)==null?void 0:c.openUrl)=="function",i,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne(typeof((g=(m=(f=e==null?void 0:e.cordova)==null?void 0:f.plugins)==null?void 0:m.browsertab)==null?void 0:g.isAvailable)=="function",i,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne(typeof((T=(_=e==null?void 0:e.cordova)==null?void 0:_.InAppBrowser)==null?void 0:T.open)=="function",i,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function u4(i){const e=c4(i),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(a=>a.toString(16).padStart(2,"0")).join("")}function c4(i){if(Dr(/[0-9a-zA-Z]+/.test(i),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(i);const e=new ArrayBuffer(i.length),t=new Uint8Array(e);for(let n=0;n<i.length;n++)t[n]=i.charCodeAt(n);return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h4=20;class d4 extends O1{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function f4(i,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:g4(),postBody:null,tenantId:i.tenantId,error:Yt(i,"no-auth-event")}}function m4(i,e){return u_()._set(c_(i),e)}async function RA(i){const e=await u_()._get(c_(i));return e&&await u_()._remove(c_(i)),e}function p4(i,e){var n,a;const t=_4(e);if(t.includes("/__/auth/callback")){const l=zf(t),c=l.firebaseError?y4(decodeURIComponent(l.firebaseError)):null,f=(a=(n=c==null?void 0:c.code)==null?void 0:n.split("auth/"))==null?void 0:a[1],m=f?Yt(f):null;return m?{type:i.type,eventId:i.eventId,tenantId:i.tenantId,error:m,urlResponse:null,sessionId:null,postBody:null}:{type:i.type,eventId:i.eventId,tenantId:i.tenantId,sessionId:i.sessionId,urlResponse:t,postBody:null}}return null}function g4(){const i=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<h4;t++){const n=Math.floor(Math.random()*e.length);i.push(e.charAt(n))}return i.join("")}function u_(){return Jn(Kv)}function c_(i){return Za("authEvent",i.config.apiKey,i.name)}function y4(i){try{return JSON.parse(i)}catch{return null}}function _4(i){const e=zf(i),t=e.link?decodeURIComponent(e.link):void 0,n=zf(t).link,a=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return zf(a).link||a||n||t||i}function zf(i){if(!(i!=null&&i.includes("?")))return{};const[e,...t]=i.split("?");return Al(t.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v4=500;class E4{constructor(){this._redirectPersistence=co,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Xm,this._overrideRedirectResult=Xv}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new d4(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){pn(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,a){l4(e);const l=await this._initialize(e);await l.initialized(),l.resetRedirect(),m6(),await this._originValidation(e);const c=f4(e,n,a);await m4(e,c);const f=await i4(e,c,t),m=await a4(f);return o4(e,l,m)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=s4(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:a,BuildInfo:l}=fo(),c=setTimeout(async()=>{await RA(e),t.onEvent(xA())},v4),f=async _=>{clearTimeout(c);const T=await RA(e);let A=null;T&&(_!=null&&_.url)&&(A=p4(T,_.url)),t.onEvent(A||xA())};typeof n<"u"&&typeof n.subscribe=="function"&&n.subscribe(null,f);const m=a,g=`${l.packageName.toLowerCase()}://`;fo().handleOpenURL=async _=>{if(_.toLowerCase().startsWith(g)&&f({url:_}),typeof m=="function")try{m(_)}catch(T){console.error(T)}}}}const T4=E4;function xA(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Yt("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w4(i,e){wt(i)._logFramework(e)}var b4="@firebase/auth-compat",A4="0.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I4=1e3;function Zc(){var i;return((i=self==null?void 0:self.location)==null?void 0:i.protocol)||null}function S4(){return Zc()==="http:"||Zc()==="https:"}function F1(i=Tt()){return!!((Zc()==="file:"||Zc()==="ionic:"||Zc()==="capacitor:")&&i.toLowerCase().match(/iphone|ipad|ipod|android/))}function R4(){return E_()||mm()}function x4(){return BA()&&(document==null?void 0:document.documentMode)===11}function C4(i=Tt()){return/Edge\/\d+/.test(i)}function N4(i=Tt()){return x4()||C4(i)}function j1(){try{const i=self.localStorage,e=Gh();if(i)return i.setItem(e,"1"),i.removeItem(e),N4()?eh():!0}catch{return Zv()&&eh()}return!1}function Zv(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function by(){return(S4()||zA()||F1())&&!R4()&&j1()&&!Zv()}function z1(){return F1()&&typeof document<"u"}async function D4(){return z1()?new Promise(i=>{const e=setTimeout(()=>{i(!1)},I4);document.addEventListener("deviceready",()=>{clearTimeout(e),i(!0)})}):!1}function P4(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xn={LOCAL:"local",NONE:"none",SESSION:"session"},Nc=ne,B1="persistence";function k4(i,e){if(Nc(Object.values(Xn).includes(e),i,"invalid-persistence-type"),E_()){Nc(e!==Xn.SESSION,i,"unsupported-persistence-type");return}if(mm()){Nc(e===Xn.NONE,i,"unsupported-persistence-type");return}if(Zv()){Nc(e===Xn.NONE||e===Xn.LOCAL&&eh(),i,"unsupported-persistence-type");return}Nc(e===Xn.NONE||j1(),i,"unsupported-persistence-type")}async function h_(i){await i._initializationPromise;const e=q1(),t=Za(B1,i.config.apiKey,i.name);e&&e.setItem(t,i._getPersistenceType())}function V4(i,e){const t=q1();if(!t)return[];const n=Za(B1,i,e);switch(t.getItem(n)){case Xn.NONE:return[Jl];case Xn.LOCAL:return[bh,co];case Xn.SESSION:return[co];default:return[]}}function q1(){var i;try{return((i=P4())==null?void 0:i.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4=ne;class Ds{constructor(){this.browserResolver=Jn($6),this.cordovaResolver=Jn(T4),this.underlyingResolver=null,this._redirectPersistence=co,this._completeRedirectFn=Xm,this._overrideRedirectResult=Xv}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,a){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,a)}async _openRedirect(e,t,n,a){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,a)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return z1()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return O4(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await D4();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(i){return i.unwrap()}function M4(i){return i.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L4(i){return H1(i)}function U4(i,e){var n;const t=(n=e.customData)==null?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const a=e;a.resolver=new F4(i,CM(i,e))}else if(t){const a=H1(e),l=e;a&&(l.credential=a,l.tenantId=t.tenantId||void 0,l.email=t.email||void 0,l.phoneNumber=t.phoneNumber||void 0)}}function H1(i){const{_tokenResponse:e}=i instanceof Nn?i.customData:i;if(!e)return null;if(!(i instanceof Nn)&&"temporaryProof"in e&&"phoneNumber"in e)return ho.credentialFromResult(i);const t=e.providerId;if(!t||t===xc.PASSWORD)return null;let n;switch(t){case xc.GOOGLE:n=Xr;break;case xc.FACEBOOK:n=$r;break;case xc.GITHUB:n=Jr;break;case xc.TWITTER:n=Zr;break;default:const{oauthIdToken:a,oauthAccessToken:l,oauthTokenSecret:c,pendingToken:f,nonce:m}=e;return!l&&!c&&!a&&!f?null:f?t.startsWith("saml.")?Zl._create(t,f):ui._fromParams({providerId:t,signInMethod:t,pendingToken:f,idToken:a,accessToken:l}):new Cl(t).credential({idToken:a,accessToken:l,rawNonce:m})}return i instanceof Nn?n.credentialFromError(i):n.credentialFromResult(i)}function Mn(i,e){return e.catch(t=>{throw t instanceof Nn&&U4(i,t),t}).then(t=>{const n=t.operationType,a=t.user;return{operationType:n,credential:L4(t),additionalUserInfo:xM(t),user:Li.getOrCreate(a)}})}async function d_(i,e){const t=await e;return{verificationId:t.verificationId,confirm:n=>Mn(i,t.confirm(n))}}class F4{constructor(e,t){this.resolver=t,this.auth=M4(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Mn(G1(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e){this._delegate=e,this.multiFactor=PM(e)}static getOrCreate(e){return Li.USER_MAP.has(e)||Li.USER_MAP.set(e,new Li(e)),Li.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Mn(this.auth,E1(this._delegate,e))}async linkWithPhoneNumber(e,t){return d_(this.auth,t6(this._delegate,e,t))}async linkWithPopup(e){return Mn(this.auth,c6(this._delegate,e,Ds))}async linkWithRedirect(e){return await h_(wt(this.auth)),v6(this._delegate,e,Ds)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Mn(this.auth,T1(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return d_(this.auth,n6(this._delegate,e,t))}reauthenticateWithPopup(e){return Mn(this.auth,u6(this._delegate,e,Ds))}async reauthenticateWithRedirect(e){return await h_(wt(this.auth)),y6(this._delegate,e,Ds)}sendEmailVerification(e){return yM(this._delegate,e)}async unlink(e){return await rM(this._delegate,e),this}updateEmail(e){return TM(this._delegate,e)}updatePassword(e){return wM(this._delegate,e)}updatePhoneNumber(e){return r6(this._delegate,e)}updateProfile(e){return EM(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return _M(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Li.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dc=ne;class f_{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:n}=e.options;Dc(n,"invalid-api-key",{appName:e.name}),Dc(n,"invalid-api-key",{appName:e.name});const a=typeof window<"u"?Ds:void 0;this._delegate=t.initialize({options:{persistence:j4(n,e.name),popupRedirectResolver:a}}),this._delegate._updateErrorMap(KV),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Li.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){VO(this._delegate,e,t)}applyActionCode(e){return lM(this._delegate,e)}checkActionCode(e){return w1(this._delegate,e)}confirmPasswordReset(e,t){return oM(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return Mn(this._delegate,cM(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return gM(this._delegate,e)}isSignInWithEmailLink(e){return fM(this._delegate,e)}async getRedirectResult(){Dc(by(),this._delegate,"operation-not-supported-in-this-environment");const e=await T6(this._delegate,Ds);return e?Mn(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){w4(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:a,error:l,complete:c}=CA(e,t,n);return this._delegate.onAuthStateChanged(a,l,c)}onIdTokenChanged(e,t,n){const{next:a,error:l,complete:c}=CA(e,t,n);return this._delegate.onIdTokenChanged(a,l,c)}sendSignInLinkToEmail(e,t){return dM(this._delegate,e,t)}sendPasswordResetEmail(e,t){return aM(this._delegate,e,t||void 0)}async setPersistence(e){k4(this._delegate,e);let t;switch(e){case Xn.SESSION:t=co;break;case Xn.LOCAL:t=await Jn(bh)._isAvailable()?bh:Kv;break;case Xn.NONE:t=Jl;break;default:return pn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Mn(this._delegate,nM(this._delegate))}signInWithCredential(e){return Mn(this._delegate,Km(this._delegate,e))}signInWithCustomToken(e){return Mn(this._delegate,sM(this._delegate,e))}signInWithEmailAndPassword(e,t){return Mn(this._delegate,hM(this._delegate,e,t))}signInWithEmailLink(e,t){return Mn(this._delegate,mM(this._delegate,e,t))}signInWithPhoneNumber(e,t){return d_(this._delegate,e6(this._delegate,e,t))}async signInWithPopup(e){return Dc(by(),this._delegate,"operation-not-supported-in-this-environment"),Mn(this._delegate,l6(this._delegate,e,Ds))}async signInWithRedirect(e){return Dc(by(),this._delegate,"operation-not-supported-in-this-environment"),await h_(this._delegate),p6(this._delegate,e,Ds)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return uM(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}f_.Persistence=Xn;function CA(i,e,t){let n=i;typeof i!="function"&&({next:n,error:e,complete:t}=i);const a=n;return{next:c=>a(c&&Li.getOrCreate(c)),error:e,complete:t}}function j4(i,e){const t=V4(i,e);if(typeof self<"u"&&!t.includes(bh)&&t.push(bh),typeof window<"u")for(const n of[Kv,co])t.includes(n)||t.push(n);return t.includes(Jl)||t.push(Jl),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{static credential(e,t){return ho.credential(e,t)}constructor(){this.providerId="phone",this._delegate=new ho(G1(gr.auth()))}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}eE.PHONE_SIGN_IN_METHOD=ho.PHONE_SIGN_IN_METHOD;eE.PROVIDER_ID=ho.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z4=ne;class B4{constructor(e,t,n=gr.app()){var a;z4((a=n.options)==null?void 0:a.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new JM(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q4="auth-compat";function G4(i){i.INTERNAL.registerComponent(new ai(q4,e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new f_(t,n)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:_l.EMAIL_SIGNIN,PASSWORD_RESET:_l.PASSWORD_RESET,RECOVER_EMAIL:_l.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:_l.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:_l.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:_l.VERIFY_EMAIL}},EmailAuthProvider:ta,FacebookAuthProvider:$r,GithubAuthProvider:Jr,GoogleAuthProvider:Xr,OAuthProvider:Cl,SAMLAuthProvider:cm,PhoneAuthProvider:eE,PhoneMultiFactorGenerator:U1,RecaptchaVerifier:B4,TwitterAuthProvider:Zr,Auth:f_,AuthCredential:hu,Error:Nn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),i.registerVersion(b4,A4)}G4(gr);const H4=({onOpenLocationModal:i})=>w.jsxs("section",{id:"intro",className:"text-center py-20 md:py-32",children:[w.jsx("div",{className:"p-1 rounded-full bg-gradient-to-br from-[#FF8C00] via-[#FFA500] to-[#66FF00] inline-block shadow-2xl shadow-[#66FF00]/20 animate-fade-in-down",children:w.jsx("div",{className:"w-64 h-64 md:w-80 md:h-80 rounded-full bg-[#2A2A2A] flex items-center justify-center overflow-hidden",children:w.jsx("img",{src:"https://iili.io/F4XRcOb.md.png",alt:"NadMaxnet Arena Logo",className:"w-full h-full object-cover scale-[1.4]"})})}),w.jsx("h1",{className:"text-4xl md:text-6xl font-extrabold my-8 animate-fade-in-down animate-text-glow",children:w.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-[#FF8C00] via-[#FFA500] to-[#66FF00]",children:"Witamy w NadMaxnet Arena"})}),w.jsx("p",{className:"text-xl md:text-2xl text-[#F0F0F0]/90 mb-8 max-w-3xl mx-auto animate-fade-in-up",children:"Twoim nowym centrum prywatnych imprez LAN Party dla fanów oldschoolu i nowych hitów!"}),w.jsxs("div",{className:"flex flex-col items-center gap-6",children:[w.jsx("div",{className:"p-0.5 rounded-lg bg-gradient-to-r from-[#FF8C00]/50 to-[#66FF00]/50 max-w-md mx-auto shadow-lg animate-pulse w-full",children:w.jsxs("div",{className:"bg-[#1A1A1A] px-4 py-3 rounded-md",children:[w.jsx("strong",{className:"font-bold text-transparent bg-clip-text bg-gradient-to-r from-[#FFA500] to-[#66FF00]",children:"Ważna informacja! "}),w.jsx("span",{className:"block sm:inline text-[#F0F0F0]/80",children:"Jeśli szukasz turnieju League of Legends, to spierdalaj, źle trafiłeś! Tutaj gramy w Cod'a XD"})]})}),w.jsx("button",{onClick:i,className:"mt-6 inline-flex items-center gap-2 px-8 py-3 bg-transparent border-2 border-[#32CD32] text-white font-bold rounded-lg transition-all duration-300 transform hover:scale-105 hover:bg-[#32CD32]/20 hover:shadow-lg hover:shadow-[#66FF00]/20",children:"Jak do nas dojechać?"})]})]}),na=({id:i,title:e,subtitle:t,children:n,className:a=""})=>w.jsx("section",{id:i,className:`py-16 md:py-24 border-b border-[#32CD32]/20 ${a}`,children:w.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[w.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-[#FFA500] to-[#66FF00] mb-2",children:e}),t&&w.jsx("p",{className:"text-lg text-[#F0F0F0]/70 mb-12",children:t}),w.jsx("div",{className:"mt-8",children:n})]})}),NA=({name:i,title:e,imageUrl:t,alt:n})=>w.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 text-center",children:[w.jsx("div",{className:"p-1 rounded-full bg-gradient-to-br from-[#FF8C00] to-[#66FF00] shadow-lg shadow-[#66FF00]/20",children:w.jsx("div",{className:"w-48 h-48 rounded-full bg-[#2A2A2A] flex items-center justify-center overflow-hidden",children:w.jsx("img",{src:t,alt:n,className:"w-full h-full object-cover"})})}),w.jsxs("div",{children:[w.jsx("p",{className:"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-[#FFA500] to-[#66FF00]",children:i}),w.jsx("p",{className:"text-xl text-[#F0F0F0] mt-1",children:e})]})]}),K4=()=>w.jsx(na,{id:"organizatorzy",title:"Dzięki nim to organizujemy!",children:w.jsxs("div",{className:"flex flex-wrap items-start justify-center gap-12 md:gap-16",children:[w.jsx(NA,{name:"Zbyszard aka Maxnet Daddy",title:"Właściciel NadMaxnet Areny",imageUrl:"https://iili.io/F4X0Lap.md.png",alt:"Zbyszard aka Maxnet Daddy"}),w.jsx(NA,{name:"Zbyszka aka Zwyżka",title:"Patronat",imageUrl:"https://iili.io/F4XO3uf.md.png",alt:"Zbyszka aka Zwyżka"})]})}),Ay=({name:i,title:e,imageUrl:t,alt:n})=>w.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 text-center",children:[w.jsx("div",{className:"p-1 rounded-full bg-gradient-to-br from-[#FF8C00] to-[#66FF00] shadow-lg shadow-[#66FF00]/20",children:w.jsx("div",{className:"w-48 h-48 rounded-full bg-[#2A2A2A] flex items-center justify-center overflow-hidden",children:w.jsx("img",{src:t,alt:n,className:"w-full h-full object-cover"})})}),w.jsxs("div",{children:[w.jsx("p",{className:"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-[#FFA500] to-[#66FF00]",children:i}),w.jsx("p",{className:"text-xl text-[#F0F0F0] mt-1",children:e})]})]}),Q4=()=>w.jsx(na,{id:"administracja",title:"Administracja",children:w.jsxs("div",{className:"flex flex-wrap items-start justify-center gap-12 md:gap-16",children:[w.jsx(Ay,{name:'Patryk "Spoceniec" Czernecki',title:"Head Admin",imageUrl:"https://iili.io/F4Xs81s.md.png",alt:'Patryk "Spoceniec" Czernecki'}),w.jsx(Ay,{name:'Alek "8" Czernecki',title:"Head Admin",imageUrl:"https://iili.io/F4XmiSn.md.png",alt:'Alek "8" Czernecki'}),w.jsx(Ay,{name:'Patryk "Papryk" Papryka',title:"NadMaxnet Arena APP creator",imageUrl:"https://iili.io/F4h9f6B.md.png",alt:'Patryk "Papryk" Papryka'})]})}),W4=i=>{const e=new Date(i).getTime(),[t,n]=fe.useState(e-new Date().getTime());return fe.useEffect(()=>{const a=setInterval(()=>{n(e-new Date().getTime())},1e3);return()=>clearInterval(a)},[e]),Y4(t)},Y4=i=>{if(i<0)return{days:0,hours:0,minutes:0,seconds:0};const e=Math.floor(i/(1e3*60*60*24)),t=Math.floor(i%(1e3*60*60*24)/(1e3*60*60)),n=Math.floor(i%(1e3*60*60)/(1e3*60)),a=Math.floor(i%(1e3*60)/1e3);return{days:e,hours:t,minutes:n,seconds:a}},Sf=({value:i,label:e})=>w.jsx("div",{className:"p-0.5 rounded-lg bg-gradient-to-br from-[#FFA500] to-[#66FF00] shadow-lg shadow-[#66FF00]/20",children:w.jsxs("div",{className:"flex flex-col items-center justify-center bg-[#2A2A2A] p-4 md:p-6 rounded-md w-24 h-24 md:w-32 md:h-32",children:[w.jsx("span",{className:"text-4xl md:text-5xl font-bold text-[#66FF00]",children:String(i).padStart(2,"0")}),w.jsx("span",{className:"text-sm uppercase tracking-widest text-[#F0F0F0]/70",children:e})]})}),$4=({eventName:i,eventDate:e,eventDuration:t})=>{const{days:n,hours:a,minutes:l,seconds:c}=W4(e);return w.jsxs(na,{id:"kalendarz",title:i,subtitle:`Data: ${t}`,children:[w.jsx("p",{className:"text-xl md:text-2xl text-[#F0F0F0] mb-8",children:"Do rozpoczęcia pozostało:"}),w.jsxs("div",{className:"flex justify-center gap-4 md:gap-8",children:[w.jsx(Sf,{value:n,label:"Dni"}),w.jsx(Sf,{value:a,label:"Godzin"}),w.jsx(Sf,{value:l,label:"Minut"}),w.jsx(Sf,{value:c,label:"Sekund"})]})]})},K1=({className:i="h-6 w-6"})=>w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`${i} text-white`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),X4=({game:i})=>{const e=w.jsxs("div",{className:"relative bg-[#2A2A2A] rounded-lg overflow-hidden transform hover:-translate-y-2 transition-transform duration-300 shadow-lg group hover:shadow-[0_0_20px_rgba(102,255,0,0.5)] h-full",children:[w.jsx("img",{src:i.imageUrl,alt:i.name,className:"w-full h-48 object-cover"}),w.jsxs("div",{className:"p-4",children:[w.jsx("h3",{className:"text-xl font-bold text-white group-hover:text-transparent group-hover:bg-clip-text group-hover:bg-gradient-to-r from-[#FFA500] to-[#66FF00] transition-colors",children:i.name}),w.jsx("p",{className:"text-[#F0F0F0]/70 mt-2 text-sm",children:i.description})]}),i.downloadUrl&&w.jsx("div",{className:"absolute top-2 right-2 p-2 bg-black/50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:w.jsx(K1,{})})]});return i.downloadUrl?w.jsx("a",{href:i.downloadUrl,download:!0,target:"_blank",rel:"noopener noreferrer","aria-label":`Pobierz grę ${i.name}`,className:"cursor-pointer",children:e}):e},J4=()=>w.jsxs("div",{className:"relative bg-[#FF8C00]/10 rounded-lg overflow-hidden transform hover:-translate-y-2 transition-transform duration-300 shadow-lg border border-[#FF8C00] flex flex-col items-center justify-center p-4 min-h-[280px] hover:shadow-[0_0_20px_rgba(255,140,0,0.5)]",children:[w.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:w.jsx("svg",{className:"w-32 h-32 text-[#FF8C00] opacity-80",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})})}),w.jsxs("div",{className:"relative z-10 text-center",children:[w.jsx("h3",{className:"text-xl font-bold text-[#FFA500]",children:"League of Legends"}),w.jsx("p",{className:"text-[#FFA500]/80 mt-2 text-sm",children:"Gatunek: MOBA. Lata świetności: Gdzieś indziej!"})]})]}),Z4=({games:i})=>w.jsx(na,{id:"gry",title:"Gry, w które gramy",subtitle:"(i w co na pewno nie gramy!)",children:w.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:[i.map(e=>w.jsx(X4,{game:e},e.id)),w.jsx(J4,{})]})}),e3=({game:i})=>{const e=w.jsxs("div",{className:"relative h-full bg-[#2A2A2A]/70 rounded-lg overflow-hidden transform hover:-translate-y-1 transition-transform duration-300 shadow-md group border border-dashed border-white/10 hover:border-white/30",children:[w.jsx("img",{src:i.imageUrl,alt:i.name,className:"w-full h-32 object-cover"}),w.jsxs("div",{className:"p-3",children:[w.jsx("h3",{className:"text-md font-bold text-white group-hover:text-transparent group-hover:bg-clip-text group-hover:bg-gradient-to-r from-[#FFA500] to-[#66FF00] transition-colors",children:i.name}),w.jsx("p",{className:"text-[#F0F0F0]/60 mt-1 text-xs",children:i.description})]}),i.downloadUrl&&w.jsx("div",{className:"absolute top-1.5 right-1.5 p-1.5 bg-black/50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:w.jsx(K1,{className:"h-5 w-5"})})]});return i.downloadUrl?w.jsx("a",{href:i.downloadUrl,download:!0,target:"_blank",rel:"noopener noreferrer","aria-label":`Pobierz grę ${i.name}`,className:"cursor-pointer",children:e}):e},t3=({games:i})=>i.length===0?null:w.jsx(na,{id:"gry-do-sprawdzenia",title:"Kandydaci do sprawdzenia!",subtitle:"Gry, które rozważamy na przyszłe LANy. Daj znać adminom, jeśli któraś Ci się podoba!",className:"bg-[#1A1A1A] rounded-xl border-y-0",children:w.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:i.map(e=>w.jsx(e3,{game:e},e.id))})}),DA=({count:i,label:e,colorGradient:t})=>w.jsx("div",{className:"p-1 rounded-lg flex-1 shadow-lg shadow-black/20",style:{background:t},children:w.jsxs("div",{className:"bg-[#2A2A2A] p-6 rounded-md h-full",children:[w.jsx("div",{className:"text-5xl font-bold bg-clip-text text-transparent",style:{backgroundImage:t},children:i}),w.jsx("div",{className:"text-lg text-[#F0F0F0] mt-2",children:e})]})}),n3=({confirmed:i,interested:e})=>w.jsx(na,{id:"status",title:"Kto zagra?",children:w.jsxs("div",{className:"flex flex-col md:flex-row gap-8 max-w-2xl mx-auto",children:[w.jsx(DA,{count:i,label:"Potwierdzonych Graczy",colorGradient:"linear-gradient(to right, #32CD32, #66FF00)"}),w.jsx(DA,{count:e,label:"Zainteresowanych Graczy",colorGradient:"linear-gradient(to right, #FF8C00, #FFA500)"})]})}),r3=()=>w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 18.236V6.22c0-.662.538-1.2 1.2-1.2h4.126a2 2 0 011.664.894l2.258 3.18a2 2 0 001.664.894zM7 21V9"})}),i3=()=>w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 14H5.236a2 2 0 01-1.789-2.894l3.5-7A2 2 0 018.738 3h4.017c.163 0 .326.02.485.06L17 5.764V17.78c0 .662-.538 1.2-1.2 1.2h-4.126a2 2 0 01-1.664-.894l-2.258-3.18a2 2 0 00-1.664-.894zM7 4v12"})}),s3=({game:i,onVote:e})=>{const[t,n]=fe.useState(!1),a=fe.useCallback(f=>{t||(e(i.id,f),n(!0))},[t,e,i.id]),l=i.upvotes+i.downvotes,c=l>0?i.upvotes/l*100:50;return w.jsxs("div",{className:"bg-[#2A2A2A] p-4 rounded-lg flex flex-col sm:flex-row items-center gap-4 border border-[#32CD32]/20 hover:border-[#66FF00]/50 hover:shadow-[0_0_15px_rgba(102,255,0,0.3)] transition-all duration-300",children:[w.jsx("img",{src:i.imageUrl,alt:i.name,className:"w-24 h-24 sm:w-16 sm:h-16 object-cover rounded-md"}),w.jsxs("div",{className:"flex-grow text-center sm:text-left",children:[w.jsx("h3",{className:"font-bold text-lg text-white",children:i.name}),w.jsx("div",{className:"w-full bg-[#1A1A1A] rounded-full h-2.5 my-2",children:w.jsx("div",{className:"bg-gradient-to-r from-[#32CD32] to-[#66FF00] h-2.5 rounded-full",style:{width:`${c}%`}})}),w.jsxs("div",{className:"flex justify-between text-xs text-[#F0F0F0]/70",children:[w.jsxs("span",{children:[i.upvotes," Głosów na TAK"]}),w.jsxs("span",{children:[i.downvotes," Głosów na NIE"]})]})]}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx("button",{onClick:()=>a("up"),disabled:t,className:`p-3 rounded-full transition-all duration-300 transform hover:scale-110 ${t?"bg-[#3A3A3A] text-gray-500 cursor-not-allowed":"bg-gradient-to-br from-[#32CD32] to-[#66FF00] hover:brightness-125 text-white"}`,"aria-label":"Głosuj na tak",children:w.jsx(r3,{})}),w.jsx("button",{onClick:()=>a("down"),disabled:t,className:`p-3 rounded-full transition-all duration-300 transform hover:scale-110 ${t?"bg-[#3A3A3A] text-gray-500 cursor-not-allowed":"bg-gradient-to-br from-[#FF8C00] to-[#FFA500] hover:brightness-125 text-white"}`,"aria-label":"Głosuj na nie",children:w.jsx(i3,{})})]})]})},a3=({games:i,onVote:e})=>w.jsx(na,{id:"glosowanie",title:"Zagłosuj na swoją ulubioną grę!",subtitle:"Twój głos ma znaczenie dla kolejności grania!",children:w.jsx("div",{className:"space-y-4 max-w-3xl mx-auto",children:i.map(t=>w.jsx(s3,{game:t,onVote:e},t.id))})}),Q1=()=>w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-6 6-4-4-6 6m12 5l6-6"})}),o3=i=>{const e=[...i];for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e},l3=({games:i})=>{const[e,t]=fe.useState([]),n=fe.useCallback(()=>{t(o3(i))},[i]);return fe.useEffect(()=>{i.length>0&&n()},[i]),w.jsxs(na,{id:"losowanie",title:"Co gramy dalej?",subtitle:"Oto wylosowana kolejność na dzisiejszy wieczór!",children:[w.jsx("ul",{className:"space-y-3 max-w-md mx-auto mb-8",children:e.map((a,l)=>w.jsxs("li",{className:"bg-[#2A2A2A] rounded-md p-4 flex items-center gap-4 text-left border-l-4 border-l-[#66FF00] shadow-lg",children:[w.jsxs("span",{className:"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-b from-[#66FF00] to-[#32CD32] w-8",children:[l+1,"."]}),w.jsx("span",{className:"text-lg text-white",children:a.name})]},a.id))}),w.jsxs("button",{onClick:n,className:"inline-flex items-center gap-2 px-8 py-3 bg-gradient-to-r from-[#FF8C00] via-[#FFA500] to-[#66FF00] bg-[length:200%_auto] hover:bg-[right_center] text-white font-bold rounded-lg transition-all duration-500 transform hover:scale-105 shadow-lg shadow-[#66FF00]/20",children:[w.jsx(Q1,{}),"Wylosuj ponownie"]})]})},u3=({games:i,gamesToCheck:e,eventDetails:t,onVote:n,onOpenLocationModal:a})=>{const l=t.date&&typeof t.date.toDate=="function"?t.date.toDate():new Date;return w.jsxs("main",{className:"container mx-auto px-4 py-8 pt-24 md:pt-32",children:[w.jsx(H4,{onOpenLocationModal:a}),w.jsx($4,{eventName:t.name,eventDate:l,eventDuration:t.duration}),w.jsx(n3,{confirmed:t.confirmedPlayers,interested:t.interestedPlayers}),w.jsx(Z4,{games:i}),w.jsx(t3,{games:e}),w.jsx(a3,{games:i,onVote:n}),w.jsx(l3,{games:i}),w.jsx(K4,{}),w.jsx(Q4,{})]})},c3=({auth:i})=>{const[e,t]=fe.useState(""),[n,a]=fe.useState(""),[l,c]=fe.useState(""),[f,m]=fe.useState(!1),g=async _=>{_.preventDefault(),c(""),m(!0);try{await i.signInWithEmailAndPassword(e,n)}catch(T){switch(T.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":c("Nieprawidłowy e-mail lub hasło.");break;case"auth/invalid-email":c("Nieprawidłowy format adresu e-mail.");break;default:c("Wystąpił błąd logowania. Spróbuj ponownie.");break}}finally{m(!1)}};return w.jsx("div",{className:"flex items-center justify-center bg-transparent p-4 sm:p-8",children:w.jsxs("div",{className:"w-full max-w-md",children:[w.jsxs("div",{className:"text-center mb-8",children:[w.jsx("h1",{className:"text-4xl font-extrabold",children:w.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-[#FF8C00] via-[#FFA500] to-[#66FF00]",children:"Panel Administratora"})}),w.jsx("p",{className:"text-[#F0F0F0]/70 mt-2",children:"Zaloguj się, aby zarządzać stroną."})]}),w.jsx("div",{className:"bg-[#2A2A2A]/50 p-8 rounded-lg shadow-2xl shadow-black/30 border border-[#32CD32]/20",children:w.jsxs("form",{onSubmit:g,className:"space-y-6",children:[w.jsxs("div",{children:[w.jsx("label",{htmlFor:"email",className:"text-sm font-bold text-[#F0F0F0] block mb-2",children:"Adres E-mail"}),w.jsx("input",{type:"email",id:"email",value:e,onChange:_=>t(_.target.value),className:"w-full bg-[#1A1A1A] text-white p-3 rounded-md border border-[#32CD32]/30 focus:border-[#66FF00] focus:ring-2 focus:ring-[#66FF00]/50 outline-none transition-all",placeholder:"admin@example.com",required:!0})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"password",className:"text-sm font-bold text-[#F0F0F0] block mb-2",children:"Hasło"}),w.jsx("input",{type:"password",id:"password",value:n,onChange:_=>a(_.target.value),className:"w-full bg-[#1A1A1A] text-white p-3 rounded-md border border-[#32CD32]/30 focus:border-[#66FF00] focus:ring-2 focus:ring-[#66FF00]/50 outline-none transition-all",placeholder:"••••••••••••",required:!0})]}),l&&w.jsx("p",{className:"text-red-500 text-sm text-center",children:l}),w.jsx("button",{type:"submit",disabled:f,className:"w-full inline-flex items-center justify-center gap-2 px-8 py-3 bg-gradient-to-r from-[#FF8C00] to-[#FFA500] text-white font-bold rounded-lg transition-all transform hover:scale-105 hover:brightness-125 shadow-lg shadow-[#FFA500]/20 disabled:opacity-50 disabled:cursor-not-allowed",children:f?"Logowanie...":"Zaloguj"})]})})]})})},h3=gr.firestore.Timestamp,Ln=({label:i,...e})=>w.jsxs("div",{children:[w.jsx("label",{className:"text-sm font-bold text-[#F0F0F0] block mb-2 text-left",children:i}),w.jsx("input",{...e,className:"w-full bg-[#1A1A1A] text-white p-3 rounded-md border border-[#32CD32]/30 focus:border-[#66FF00] focus:ring-2 focus:ring-[#66FF00]/50 outline-none transition-all"})]}),Kh=({children:i,...e})=>w.jsx("button",{...e,className:"w-full sm:w-auto inline-flex items-center justify-center gap-2 px-6 py-2 bg-gradient-to-r from-[#FF8C00] to-[#FFA500] text-white font-bold rounded-lg transition-all transform hover:scale-105 hover:brightness-125 shadow-lg shadow-[#FFA500]/20 disabled:opacity-50 disabled:cursor-not-allowed",children:i}),d3=({initialPassword:i,onSave:e})=>{const[t,n]=fe.useState(i);fe.useEffect(()=>{n(i)},[i]);const a=async()=>{if(!t){alert("Hasło nie może być puste.");return}await e(t),alert("Sukces: Hasło dostępu do strony zostało zaktualizowane!")};return w.jsxs("div",{className:"bg-[#2A2A2A]/50 border border-[#32CD32]/20 rounded-lg p-6",children:[w.jsx("h3",{className:"font-semibold mb-3",children:"Zarządzanie Hasłem Dostępu do Strony"}),w.jsx("p",{className:"text-sm text-[#F0F0F0]/70 mb-4",children:"To hasło jest wymagane, aby wejść na stronę główną. Zmiana jest zapisywana na stałe w bazie danych."}),w.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:w.jsx(Ln,{label:"Nowe Hasło Strony",name:"sitePassword",type:"text",value:t,onChange:l=>n(l.target.value)})}),w.jsx("div",{className:"mt-6 text-right",children:w.jsx(Kh,{onClick:a,children:"Zapisz Nowe Hasło"})})]})},f3=({initialDetails:i,onSave:e})=>{const[t,n]=fe.useState(i);fe.useEffect(()=>{n(i)},[i]);const a=m=>{const{name:g,value:_}=m.target,T=["confirmedPlayers","interestedPlayers"].includes(g);n(A=>({...A,[g]:T?parseInt(_,10)||0:_}))},l=m=>{n(g=>({...g,date:h3.fromDate(new Date(m.target.value))}))},c=async()=>{await e(t),alert("Sukces: Szczegóły wydarzenia zostały zaktualizowane!")},f=m=>{try{const g=m.toDate();return`${g.getFullYear()}-${String(g.getMonth()+1).padStart(2,"0")}-${String(g.getDate()).padStart(2,"0")}T${String(g.getHours()).padStart(2,"0")}:${String(g.getMinutes()).padStart(2,"0")}`}catch{return""}};return w.jsxs("div",{className:"bg-[#2A2A2A]/50 border border-[#32CD32]/20 rounded-lg p-6",children:[w.jsx("h3",{className:"font-semibold mb-3",children:"Zarządzanie Wydarzeniem"}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[w.jsx(Ln,{label:"Nazwa Wydarzenia",name:"name",type:"text",value:t.name,onChange:a}),w.jsx(Ln,{label:"Data i Czas Trwania (opis)",name:"duration",type:"text",value:t.duration,onChange:a}),w.jsx(Ln,{label:"Data Rozpoczęcia (dla licznika)",name:"date",type:"datetime-local",value:f(t.date),onChange:l}),w.jsx(Ln,{label:"Liczba Potwierdzonych",name:"confirmedPlayers",type:"number",value:t.confirmedPlayers,onChange:a}),w.jsx(Ln,{label:"Liczba Zainteresowanych",name:"interestedPlayers",type:"number",value:t.interestedPlayers,onChange:a})]}),w.jsx("div",{className:"mt-6 text-right",children:w.jsx(Kh,{onClick:c,children:"Zapisz Zmiany Wydarzenia"})})]})},PA={name:"",description:"",imageUrl:"",upvotes:0,downvotes:0,downloadUrl:""},m3=({games:i,onAdd:e,onUpdate:t,onDelete:n})=>{const[a,l]=fe.useState(PA),[c,f]=fe.useState(null),[m,g]=fe.useState(!1),_=G=>{l(W=>({...W,[G.target.name]:G.target.value}))},T=G=>{f(G),l({name:G.name,description:G.description,imageUrl:G.imageUrl,upvotes:G.upvotes,downvotes:G.downvotes,downloadUrl:G.downloadUrl||""})},A=()=>{f(null),l(PA)},k=async()=>{if(!a.name||!a.imageUrl){alert("Błąd: Nazwa gry i URL obrazka są wymagane.");return}g(!0);try{c?(await t({...c,...a}),alert(`Sukces: Gra "${a.name}" została zaktualizowana!`)):(await e(a),alert(`Sukces: Gra "${a.name}" została dodana!`)),A()}catch(G){console.error("Error saving game:",G),alert(G.message||"Wystąpił nieoczekiwany błąd podczas zapisywania gry.")}finally{g(!1)}},K=async G=>{window.confirm(`Czy na pewno chcesz usunąć grę "${G.name}"?`)&&(await n(G.id),alert(`Sukces: Gra "${G.name}" została usunięta!`))};return w.jsxs("div",{className:"bg-[#2A2A2A]/50 border border-[#32CD32]/20 rounded-lg p-6",children:[w.jsxs("div",{className:"mb-8 p-4 bg-[#1A1A1A] rounded-md",children:[w.jsx("h3",{className:"font-semibold mb-3",children:c?"Edytuj Grę":"Dodaj Nową Grę"}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[w.jsx(Ln,{label:"Nazwa Gry",name:"name",type:"text",placeholder:"Np. Quake III Arena",value:a.name,onChange:_}),w.jsx(Ln,{label:"Krótki Opis",name:"description",type:"text",placeholder:"Gatunek: ...",value:a.description,onChange:_}),w.jsx(Ln,{label:"Link do Miniaturki",name:"imageUrl",type:"text",placeholder:"Wymagany URL do obrazka...",value:a.imageUrl,onChange:_}),w.jsx(Ln,{label:"URL do Pobrania Gry (opcjonalnie)",name:"downloadUrl",type:"text",placeholder:"Np. link z archive.org",value:a.downloadUrl||"",onChange:_})]}),w.jsxs("div",{className:"mt-4 text-right flex justify-end gap-4",children:[c&&w.jsx("button",{onClick:A,className:"w-full sm:w-auto inline-flex items-center justify-center gap-2 px-6 py-2 bg-gray-500/20 text-gray-300 font-bold rounded-lg transition-all hover:bg-gray-500/40",children:"Anuluj"}),w.jsx(Kh,{onClick:k,disabled:m,children:m?"Przetwarzanie...":c?"Zaktualizuj Grę":"Dodaj Grę"})]})]}),w.jsx("h3",{className:"font-semibold mb-3",children:"Istniejące Gry Główne"}),w.jsx("div",{className:"space-y-3",children:i.map(G=>w.jsxs("div",{className:"bg-[#1A1A1A] p-3 rounded-md flex items-center justify-between gap-4",children:[w.jsx("p",{className:"font-medium",children:G.name}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx("button",{onClick:()=>T(G),className:"text-xs px-3 py-1 rounded bg-blue-500/20 text-blue-300 hover:bg-blue-500/40 transition",children:"Edytuj"}),w.jsx("button",{onClick:()=>K(G),className:"text-xs px-3 py-1 rounded bg-red-500/20 text-red-300 hover:bg-red-500/40 transition",children:"Usuń"})]})]},G.id))})]})},kA={name:"",description:"",imageUrl:"",upvotes:0,downvotes:0,downloadUrl:""},p3=({games:i,onAdd:e,onUpdate:t,onDelete:n,onMove:a})=>{const[l,c]=fe.useState(kA),[f,m]=fe.useState(null),[g,_]=fe.useState(!1),T=re=>{c(de=>({...de,[re.target.name]:re.target.value}))},A=re=>{m(re),c({name:re.name,description:re.description,imageUrl:re.imageUrl,upvotes:re.upvotes,downvotes:re.downvotes,downloadUrl:re.downloadUrl||""})},k=()=>{m(null),c(kA)},K=async()=>{if(!l.name||!l.imageUrl){alert("Błąd: Nazwa gry i URL obrazka są wymagane.");return}_(!0);try{f?(await t({...f,...l}),alert(`Sukces: Gra do sprawdzenia "${l.name}" została zaktualizowana!`)):(await e(l),alert(`Sukces: Gra do sprawdzenia "${l.name}" została dodana!`)),k()}catch(re){console.error("Error saving game to check:",re),alert(re.message||"Wystąpił nieoczekiwany błąd.")}finally{_(!1)}},G=async re=>{window.confirm(`Czy na pewno chcesz usunąć "${re.name}" z listy do sprawdzenia?`)&&(await n(re.id),alert(`Sukces: Gra "${re.name}" została usunięta z listy do sprawdzenia.`))},W=async re=>{window.confirm(`Czy na pewno chcesz przenieść "${re.name}" do listy gier głównych?`)&&(await a(re),alert(`Sukces: Gra "${re.name}" została przeniesiona do listy głównej!`))};return w.jsxs("div",{className:"bg-[#2A2A2A]/50 border border-[#32CD32]/20 rounded-lg p-6",children:[w.jsxs("div",{className:"mb-8 p-4 bg-[#1A1A1A] rounded-md",children:[w.jsx("h3",{className:"font-semibold mb-3",children:f?"Edytuj Grę do Sprawdzenia":"Dodaj Grę do Sprawdzenia"}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[w.jsx(Ln,{label:"Nazwa Gry",name:"name",value:l.name,onChange:T}),w.jsx(Ln,{label:"Krótki Opis",name:"description",value:l.description,onChange:T}),w.jsx(Ln,{label:"Link do Miniaturki",name:"imageUrl",value:l.imageUrl,placeholder:"Wymagany URL do obrazka...",onChange:T}),w.jsx(Ln,{label:"URL do Pobrania Gry (opcjonalnie)",name:"downloadUrl",type:"text",placeholder:"Np. link z archive.org",value:l.downloadUrl||"",onChange:T})]}),w.jsxs("div",{className:"mt-4 text-right flex justify-end gap-4",children:[f&&w.jsx("button",{onClick:k,className:"w-full sm:w-auto inline-flex items-center justify-center gap-2 px-6 py-2 bg-gray-500/20 text-gray-300 font-bold rounded-lg transition-all hover:bg-gray-500/40",children:"Anuluj"}),w.jsx(Kh,{onClick:K,disabled:g,children:g?"Przetwarzanie...":f?"Zaktualizuj":"Dodaj"})]})]}),w.jsx("h3",{className:"font-semibold mb-3",children:"Istniejące Gry do Sprawdzenia"}),w.jsx("div",{className:"space-y-3",children:i.map(re=>w.jsxs("div",{className:"bg-[#1A1A1A] p-3 rounded-md flex flex-wrap items-center justify-between gap-4",children:[w.jsx("p",{className:"font-medium flex-grow",children:re.name}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx("button",{onClick:()=>W(re),className:"text-xs px-3 py-1 rounded bg-green-500/20 text-green-300 hover:bg-green-500/40 transition",children:"Przenieś do Głównych"}),w.jsx("button",{onClick:()=>A(re),className:"text-xs px-3 py-1 rounded bg-blue-500/20 text-blue-300 hover:bg-blue-500/40 transition",children:"Edytuj"}),w.jsx("button",{onClick:()=>G(re),className:"text-xs px-3 py-1 rounded bg-red-500/20 text-red-300 hover:bg-red-500/40 transition",children:"Usuń"})]})]},re.id))})]})},g3=({games:i,onReset:e})=>{const t=async n=>{window.confirm(`Czy na pewno chcesz zresetować głosy dla gry "${n.name}"?`)&&(await e(n.id),alert(`Sukces: Głosy dla gry "${n.name}" zostały zresetowane!`))};return w.jsxs("div",{className:"bg-[#2A2A2A]/50 border border-[#32CD32]/20 rounded-lg p-6",children:[w.jsx("div",{className:"space-y-3",children:i.map(n=>w.jsxs("div",{className:"bg-[#1A1A1A] p-3 rounded-md flex flex-wrap items-center justify-between gap-4",children:[w.jsx("p",{className:"font-medium flex-1 min-w-[150px]",children:n.name}),w.jsxs("div",{className:"flex gap-4 items-center",children:[w.jsxs("p",{className:"text-sm",children:[w.jsx("span",{className:"text-green-400 font-bold",children:n.upvotes})," Głosów na TAK"]}),w.jsxs("p",{className:"text-sm",children:[w.jsx("span",{className:"text-red-400 font-bold",children:n.downvotes})," Głosów na NIE"]})]}),w.jsx("button",{onClick:()=>t(n),className:"text-xs px-3 py-1 rounded bg-yellow-500/20 text-yellow-300 hover:bg-yellow-500/40 transition",children:"Resetuj Głosy"})]},n.id))}),w.jsx("div",{className:"mt-6 text-right",children:w.jsx(Kh,{disabled:!0,children:"Dodaj Nową Ankietę (wkrótce)"})})]})},y3=i=>{const{onLogout:e,games:t,gamesToCheck:n,eventDetails:a,onEventUpdate:l,onGameAdd:c,onGameUpdate:f,onGameDelete:m,onGameToCheckAdd:g,onGameToCheckUpdate:_,onGameToCheckDelete:T,onMoveGameToMain:A,onResetVotes:k,sitePassword:K,onSitePasswordUpdate:G}=i,[W,re]=fe.useState("event"),de=({tabId:we,children:pe})=>w.jsx("button",{onClick:()=>re(we),className:`px-4 md:px-6 py-3 text-sm md:text-base font-semibold transition-colors border-b-2 ${W===we?"border-[#66FF00] text-transparent bg-clip-text bg-gradient-to-r from-[#FFA500] to-[#66FF00]":"border-transparent text-[#F0F0F0]/60 hover:text-white"}`,children:pe}),le=()=>{switch(W){case"event":return w.jsx(f3,{initialDetails:a,onSave:l});case"games":return w.jsx(m3,{games:t,onAdd:c,onUpdate:f,onDelete:m});case"gamesToCheck":return w.jsx(p3,{games:n,onAdd:g,onUpdate:_,onDelete:T,onMove:A});case"voting":return w.jsx(g3,{games:t,onReset:k});case"access":return w.jsx(d3,{initialPassword:K,onSave:G});default:return null}};return w.jsxs("div",{className:"bg-transparent text-white p-2 sm:p-4",children:[w.jsxs("header",{className:"flex justify-between items-center mb-6 px-4 pt-4",children:[w.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-[#FFA500] to-[#66FF00]",children:"Panel Administracyjny"}),w.jsx("button",{onClick:e,className:"hidden sm:block text-sm text-[#F0F0F0]/70 hover:text-[#FF8C00] transition-colors",children:"Wyloguj →"})]}),w.jsx("div",{className:"border-b border-[#32CD32]/20 px-2 sm:px-4",children:w.jsxs("nav",{className:"-mb-px flex space-x-2 sm:space-x-4 overflow-x-auto",children:[w.jsx(de,{tabId:"event",children:"Wydarzenie"}),w.jsx(de,{tabId:"games",children:"Gry Główne"}),w.jsx(de,{tabId:"gamesToCheck",children:"Gry do Spr."}),w.jsx(de,{tabId:"voting",children:"Głosowanie"}),w.jsx(de,{tabId:"access",children:"Dostęp"})]})}),w.jsx("main",{className:"py-6 px-2 sm:px-4",children:w.jsx("div",{className:"animate-fade-in",children:le()})})]})},W1=()=>w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),VA=i=>{const{onClose:e,isLoggedIn:t,...n}=i;return fe.useEffect(()=>{const a=l=>{l.key==="Escape"&&e()};return document.body.style.overflow="hidden",window.addEventListener("keydown",a),()=>{document.body.style.overflow="unset",window.removeEventListener("keydown",a)}},[e]),w.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[100] flex items-center justify-center p-4 animate-fade-in",onClick:e,"aria-modal":"true",role:"dialog",children:w.jsxs("div",{className:"relative w-full max-w-6xl max-h-[90vh] bg-gradient-to-br from-[#2A2A2A] to-[#1A1A1A] rounded-lg shadow-2xl border border-[#32CD32]/20 flex flex-col",onClick:a=>a.stopPropagation(),children:[w.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors z-10","aria-label":"Zamknij panel administracyjny",children:w.jsx(W1,{})}),w.jsx("div",{className:"overflow-y-auto",children:t?w.jsx(y3,{...n}):w.jsx(c3,{auth:m_})})]})})},Iy=["XEZL-GZWX-XQZG-GEGU-EEFC","WUEH-ALAL-67WW-6UQX-A771","WH17U-PSAJ-6QJ3-UQQP-C04A","WH5G-AHAG-6QQ5-6QG5-A461","WHUE-A5SG-6QL6-6QGC-C92C","WULQ-HU7X-67UA-GLZL-46A5","WH5H-LX7F-6QQW-Z3LZ-25F8","WSHE-AJJW-6666-67UH-3D0A","WAXQ-A673-6W3A-AZGJ-574E","WL1Z-WUUG-67U7-5LS4-4379","WHAG-L3QH-6QG5-ZXAW-3FC5","WU1P-LJ7L-67U1-LJUX-0AD3","WAQQ-56LJ-6WSA-WHKP-FD7A","WH63-E2W6-6QHH-QZEI-AHC2","WHXW-L1U6-6Q3H-ZLES-F8S5","WU5H-QZA7-67QW-EFQZ-7016","WH7J-3JX7-6QQP-J3HZ-3BJ4","WHJP-GW4S-6QXJ-IHEQ-603E","WHXJ-XLXW-6QU1-SJLH-I07A","W5E7-3L6S-66WZ-JUEG-32D4","WAQ7-6E5L-6Q5W-W3LA-7529","WU1X-XWWL-677H-7E1X-718E","WUPJ-L5WZ-67ZP-ZQH7-A4AF","PWWJ-EQJG-7AEP-Q5P5-1C87","G6AE-57JJ-Q5G6-WJPP-E1D9","PPX6-6P6Q-7X3E-AZEA-20B0","P7QH-Q5U7-7U5W-EQ3Z-14AF","G3X7-6QZU-Q3Z3-A573-538F","PEJX-AZJH-7G7L-6PPW-5797","PUHP-3QL3-776J-J5XU-3887","PLP7-GAZG-7JZZ-HG75-E677","PUL3-X6UX-77UU-7H3L-E677","WH3A-3AZ7-6QXQ-JG7Z-4ABE","WHXL-PXEW-6Q3X-U36H-5AB2","WUH6-HGEX-676E-GA6L-4C92","WUEQ-5XAP-67WA-W3QJ-530D","WUQH-JEHP-675W-3WWJ-F8CC","35WZ-E3WQ-UUGU-Q7WW-C18C","WZHP-ZGQW-5Q3A-LHHQ-AFE8","EZWX-U7JX-WQ5P-6JUU-1F21","63EX-G7WQ-ZLXH-56ZU-7ADD","63EG-J5LG-WZW5-3QX5-2CED","GXJP-XPPA-QP7J-7ZJQ-A96E","PWP5-36PG-7AZG-JHJ5-A34D","6LWX-5W6X-WJEL-WEEL-97FC","MPC8-MD8P-78P1-75DU-890F","W5E7-6L5Z-66WZ-AUG7-63C3","W5HA-3557-666Q-JQGZ-232E","W5HA-ZHEL-666Q-L66X-CD23","W55E-QE6E-66QQ-EWE6-76DD"],_3=()=>w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),v3=()=>{const[i,e]=fe.useState(""),[t,n]=fe.useState(!1),a=fe.useCallback(()=>{let c="";do c=Iy[Math.floor(Math.random()*Iy.length)];while(c===i&&Iy.length>1);e(c)},[i]);fe.useEffect(()=>{a()},[]);const l=()=>{i&&navigator.clipboard.writeText(i).then(()=>{n(!0),setTimeout(()=>n(!1),2e3)})};return w.jsxs("main",{className:"container mx-auto px-4 py-32 text-center animate-fade-in",children:[w.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold my-8",children:w.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-[#FF8C00] via-[#FFA500] to-[#66FF00]",children:"Klucze aktywacyjne do CoD2"})}),w.jsx("p",{className:"text-lg text-[#F0F0F0]/70 mb-12 max-w-2xl mx-auto",children:"Tutaj znajdziesz losowo generowany klucz CD-Key do Call of Duty 2 z naszej puli. Klucze nie są usuwane po wygenerowaniu, możesz generować wielokrotnie."}),w.jsxs("div",{className:"relative bg-[#2A2A2A] border-2 border-[#32CD32] rounded-lg p-8 max-w-2xl mx-auto shadow-2xl shadow-[#66FF00]/20",children:[w.jsx("p",{className:"font-mono text-2xl md:text-4xl tracking-widest text-white",children:i}),w.jsx("button",{onClick:l,className:"absolute top-1/2 -translate-y-1/2 right-4 text-gray-400 hover:text-white transition-colors h-10 w-20 flex items-center justify-center",children:t?w.jsx("span",{className:"text-sm text-green-400",children:"Skopiowano!"}):w.jsx(_3,{})})]}),w.jsx("div",{className:"mt-12",children:w.jsxs("button",{onClick:a,className:"inline-flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-[#FF8C00] via-[#FFA500] to-[#66FF00] bg-[length:200%_auto] hover:bg-[right_center] text-white font-bold rounded-lg transition-all duration-500 transform hover:scale-105 shadow-lg shadow-[#66FF00]/20",children:[w.jsx(Q1,{}),"Generuj Nowy Klucz"]})})]})},Y1=()=>w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 24 24","aria-hidden":"true",children:[w.jsx("defs",{children:w.jsxs("linearGradient",{id:"cogGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[w.jsx("stop",{offset:"0%",style:{stopColor:"#66FF00"}}),w.jsx("stop",{offset:"100%",style:{stopColor:"#32CD32"}})]})}),w.jsx("path",{stroke:"url(#cogGradient)",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",fill:"none",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),w.jsx("circle",{cx:"12",cy:"12",r:"3",fill:"url(#cogGradient)"})]}),E3=()=>w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6",children:w.jsx("path",{fillRule:"evenodd",d:"M4.5 5.653c0-1.426 1.529-2.33 2.779-1.643l11.54 6.647c1.295.742 1.295 2.545 0 3.286L7.279 20.99c-1.25.717-2.779-.217-2.779-1.643V5.653z",clipRule:"evenodd"})}),T3=()=>w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6",children:w.jsx("path",{fillRule:"evenodd",d:"M6.75 5.25a.75.75 0 01.75.75v12a.75.75 0 01-1.5 0v-12a.75.75 0 01.75-.75zm9 0a.75.75 0 01.75.75v12a.75.75 0 01-1.5 0v-12a.75.75 0 01.75-.75z",clipRule:"evenodd"})}),w3=()=>w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m5.25 4.5 7.5 7.5-7.5 7.5m6-15 7.5 7.5-7.5 7.5"})}),b3=()=>w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m18.75 4.5-7.5 7.5 7.5 7.5m-6-15L5.25 12l7.5 7.5"})}),A3=()=>w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:[w.jsx("path",{d:"M13.5 4.06c0-1.336-1.616-2.005-2.56-1.06l-4.5 4.5H4.508c-1.141 0-2.318.664-2.66 1.905A9.76 9.76 0 001.5 12c0 .898.121 1.768.35 2.595.341 1.24 1.518 1.905 2.66 1.905H6.44l4.5 4.5c.944.945 2.56.276 2.56-1.06V4.06zM18.584 5.106a.75.75 0 011.06 0c3.808 3.807 3.808 9.98 0 13.788a.75.75 0 01-1.06-1.06 8.25 8.25 0 000-11.668a.75.75 0 010-1.06z"}),w.jsx("path",{d:"M15.932 7.757a.75.75 0 011.061 0 6 6 0 010 8.486.75.75 0 01-1.06-1.061 4.5 4.5 0 000-6.364.75.75 0 010-1.06z"})]}),I3=({onAdminClick:i,onNavigate:e,currentView:t,onOpenLocationModal:n})=>{const[a,l]=fe.useState(!1),c=[{title:"LAN Party Anthem #1",url:"https://res.cloudinary.com/dwquqg78y/video/upload/v1754478187/LAN_Party_Anthem_1_izweey.mp3"},{title:"LAN Party Anthem #2",url:"https://res.cloudinary.com/dwquqg78y/video/upload/v1754478180/LAN_Party_Anthem_2_z8vr0c.mp3"},{title:"LAN Party Anthem #3",url:"https://res.cloudinary.com/dwquqg78y/video/upload/v1754478181/LAN_Party_Anthem_3_nybuor.mp3"},{title:"LAN Party Anthem #4",url:"https://res.cloudinary.com/dwquqg78y/video/upload/v1754478182/LAN_Party_Anthem_4_xvavsm.mp3"}],[f,m]=fe.useState(0),[g,_]=fe.useState(!1),[T,A]=fe.useState(.5),[k,K]=fe.useState(!1),G=fe.useRef(null),W=fe.useRef(null);fe.useEffect(()=>{const R=G.current;R&&(g?R.play().catch(S=>console.error(S)):R.pause())},[g]),fe.useEffect(()=>{const R=G.current;R&&(R.volume=T)},[T]),fe.useEffect(()=>{const R=G.current;R&&g&&R.play().catch(S=>{console.error("Nie udało się odtworzyć nowego utworu:",S),_(!1)})},[f]),fe.useEffect(()=>{const R=G.current,S=()=>m(C=>(C+1)%c.length);return R==null||R.addEventListener("ended",S),()=>R==null?void 0:R.removeEventListener("ended",S)},[c.length]),fe.useEffect(()=>{const R=S=>{W.current&&!W.current.contains(S.target)&&K(!1)};return document.addEventListener("mousedown",R),()=>document.removeEventListener("mousedown",R)},[]);const re=()=>{m(R=>(R-1+c.length)%c.length)},de=()=>{m(R=>(R+1)%c.length)},le=()=>{_(R=>!R)},we=R=>{A(parseFloat(R.target.value))};fe.useEffect(()=>{const R=()=>l(window.scrollY>10);return window.addEventListener("scroll",R),()=>window.removeEventListener("scroll",R)},[]);const pe=[{id:"kalendarz",label:"Wydarzenie"},{id:"gry",label:"Gry"},{id:"glosowanie",label:"Głosowanie"},{id:"losowanie",label:"Kolejność"},{id:"dojazd",label:"Dojazd"}],Ie=R=>{var S;t!=="home"?(e("home"),setTimeout(()=>{var C;(C=document.getElementById(R))==null||C.scrollIntoView({behavior:"smooth"})},100)):(S=document.getElementById(R))==null||S.scrollIntoView({behavior:"smooth"})};return w.jsxs("header",{className:`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${a?"bg-[#1A1A1A]/80 backdrop-blur-sm shadow-lg shadow-black/20":"bg-transparent"}`,children:[w.jsx("audio",{ref:G,src:c[f].url}),w.jsxs("div",{className:"container mx-auto px-4 py-4 flex justify-between items-center",children:[w.jsxs("a",{onClick:()=>e("home"),className:"flex items-center gap-3 hover:opacity-80 transition-opacity cursor-pointer",children:[w.jsx("img",{src:"https://iili.io/F4XRcOb.md.png",alt:"NadMaxnet Arena Logo",className:"h-9 w-9 rounded-full object-cover"}),w.jsx("span",{className:"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-[#FF8C00] to-[#FFA500] animate-text-glow",children:"NadMaxnet Arena"})]}),w.jsxs("div",{className:"flex items-center space-x-6",children:[w.jsxs("div",{ref:W,className:"relative hidden md:flex flex-col items-center text-[#F0F0F0]",children:[w.jsxs("div",{className:"flex items-center gap-4 bg-black/30 backdrop-blur-sm p-2 px-4 rounded-full",children:[w.jsxs("button",{onClick:re,className:"hover:text-white transition-colors",children:[" ",w.jsx(b3,{})," "]}),w.jsx("button",{onClick:le,className:"bg-gradient-to-r from-[#FFBF00] to-[#FFD700] text-black rounded-full p-2 shadow-lg hover:brightness-110 transition-all",children:g?w.jsx(T3,{}):w.jsx(E3,{})}),w.jsxs("button",{onClick:de,className:"hover:text-white transition-colors",children:[" ",w.jsx(w3,{})," "]}),w.jsxs("div",{className:"relative",children:[w.jsx("button",{onClick:()=>K(R=>!R),children:w.jsx(A3,{})}),k&&w.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-3 bg-[#2a2a2a] p-4 rounded-lg shadow-2xl",children:w.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:T,onChange:we,className:"w-24 h-1 bg-gray-600 rounded-lg appearance-none cursor-pointer accent-[#FFA500]"})})]})]}),w.jsx("span",{className:"w-48 truncate text-xs text-center mt-2 px-2",title:c[f].title,children:c[f].title})]}),w.jsx("nav",{className:"hidden md:flex items-center space-x-6",children:pe.map(R=>w.jsx("a",{onClick:()=>R.id==="dojazd"?n():Ie(R.id),className:"text-[#F0F0F0] hover:text-transparent hover:bg-clip-text hover:bg-gradient-to-r from-[#FFA500] to-[#66FF00] transition-colors pb-1 cursor-pointer",children:R.label},R.id))}),w.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[w.jsx("a",{onClick:()=>e("cod2keys"),className:"cursor-pointer text-gray-900 font-bold px-5 py-2.5 rounded-full bg-gradient-to-r from-[#FFBF00] to-[#FFD700] hover:brightness-110 transition-all shadow-md animate-pulse-gold text-sm",role:"button","aria-label":"Przejdź do strony z kluczami do Call of Duty 2",children:"CD-Key CoD2"}),w.jsx("button",{onClick:i,className:"text-[#F0F0F0] border-2 border-[#32CD32]/50 rounded-full p-2.5 hover:bg-[#32CD32]/20 hover:border-[#66FF00] transition-all","aria-label":"Panel Admina",children:w.jsx(Y1,{})})]})]})]})]})},S3=({onAdminClick:i})=>w.jsx("footer",{className:"bg-[#1A1A1A] border-t border-[#32CD32]/20 py-8",children:w.jsxs("div",{className:"container mx-auto px-4 text-center text-[#F0F0F0]/60",children:[w.jsxs("p",{children:["© ",new Date().getFullYear()," NadMaxnet Arena. All rights reserved (and no LoL allowed)."]}),w.jsx("p",{className:"mt-2 text-sm",children:"Stworzone z pasji do grania. Created by: Patryk Nowicki"}),w.jsx("div",{className:"mt-4 text-sm",children:w.jsx("button",{onClick:i,className:"text-[#F0F0F0]/80 hover:text-[#66FF00] transition-colors bg-transparent border-none cursor-pointer p-1",children:"Admin Panel"})})]})}),R3=({onClose:i})=>(fe.useEffect(()=>{const e=t=>{t.key==="Escape"&&i()};return document.body.style.overflow="hidden",window.addEventListener("keydown",e),()=>{document.body.style.overflow="unset",window.removeEventListener("keydown",e)}},[i]),w.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-[100] flex items-center justify-center p-4 animate-fade-in",onClick:i,"aria-modal":"true",role:"dialog",children:w.jsxs("div",{className:"relative w-full max-w-3xl bg-gradient-to-br from-[#2A2A2A] to-[#1A1A1A] rounded-lg shadow-2xl border border-[#32CD32]/20 flex flex-col p-6 md:p-8",onClick:e=>e.stopPropagation(),children:[w.jsx("button",{onClick:i,className:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors z-10","aria-label":"Zamknij okno dojazdu",children:w.jsx(W1,{})}),w.jsx("div",{className:"text-center",children:w.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-[#FFA500] to-[#66FF00] mb-4",children:"Jak dojechać do NadMaxnet Arena?"})}),w.jsxs("div",{className:"text-lg text-center text-[#F0F0F0] mt-4",children:[w.jsx("p",{className:"mb-4",children:"Nasza arena znajduje się pod adresem:"}),w.jsx("p",{className:"text-2xl font-semibold text-[#FFA500] mb-6",children:"Pionierów 3, 68-205 Żary"}),w.jsx("p",{className:"mb-8",children:"Łatwy dojazd i dostępny parking dla wszystkich uczestników."}),w.jsx("div",{className:"aspect-w-16 aspect-h-9 rounded-lg overflow-hidden border-2 border-[#66FF00] shadow-2xl shadow-[#66FF00]/10",children:w.jsx("iframe",{src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2503.221580287119!2d15.13284057700259!3d51.62313670188056!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x470671a5c6785161%3A0x6758564e9a318e8!2sPionier%C3%B3w%203%2C%2068-205%20%C5%BBary%2C%20Poland!5e0!3m2!1sen!2sus!4v1719415849511!5m2!1sen!2sus",width:"100%",height:"450",style:{border:0},allowFullScreen:!0,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",title:"Lokalizacja NadMaxnet Arena"})})]}),w.jsx("div",{className:"mt-8 text-center",children:w.jsx("button",{onClick:i,className:"px-8 py-3 bg-gradient-to-r from-[#FF8C00] via-[#FFA500] to-[#66FF00] bg-[length:200%_auto] hover:bg-[right_center] text-white font-bold rounded-lg transition-all duration-500 transform hover:scale-105 shadow-lg shadow-[#66FF00]/20",children:"Zamknij"})})]})})),x3=({correctPassword:i,onLoginSuccess:e,onAdminClick:t})=>{const[n,a]=fe.useState(""),[l,c]=fe.useState(""),f=m=>{m.preventDefault(),n===i?e():(c("Nieprawidłowe hasło."),a(""))};return w.jsxs("div",{className:"bg-[#1A1A1A] text-[#F0F0F0] font-sans min-h-screen flex flex-col items-center justify-center p-4",children:[w.jsx("header",{className:"absolute top-0 right-0 p-6",children:w.jsx("button",{onClick:t,className:"text-[#F0F0F0] border-2 border-[#32CD32]/50 rounded-full p-2.5 hover:bg-[#32CD32]/20 hover:border-[#66FF00] transition-all","aria-label":"Panel Admina",children:w.jsx(Y1,{})})}),w.jsxs("main",{className:"text-center animate-fade-in w-full max-w-md",children:[w.jsx("div",{className:"p-1 rounded-full bg-gradient-to-br from-[#FF8C00] via-[#FFA500] to-[#66FF00] inline-block shadow-2xl shadow-[#66FF00]/20",children:w.jsx("div",{className:"w-48 h-48 rounded-full bg-[#2A2A2A] flex items-center justify-center overflow-hidden",children:w.jsx("img",{src:"https://iili.io/F4XRcOb.md.png",alt:"NadMaxnet Arena Logo",className:"w-full h-full object-cover scale-[1.4]"})})}),w.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold my-8 animate-text-glow",children:w.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-[#FF8C00] via-[#FFA500] to-[#66FF00]",children:"Witamy w NadMaxnet Arena"})}),w.jsx("p",{className:"text-lg text-[#F0F0F0]/80 mb-8",children:"Strona jest chroniona hasłem. Wprowadź hasło, aby kontynuować."}),w.jsxs("form",{onSubmit:f,className:"space-y-6",children:[w.jsxs("div",{children:[w.jsx("label",{htmlFor:"site_password",className:"sr-only",children:"Hasło"}),w.jsx("input",{type:"password",id:"site_password",value:n,onChange:m=>a(m.target.value),className:"w-full bg-[#2A2A2A] text-white text-center text-xl p-4 rounded-lg border-2 border-[#32CD32]/30 focus:border-[#66FF00] focus:ring-2 focus:ring-[#66FF00]/50 outline-none transition-all placeholder:text-gray-500",placeholder:"••••••••••",autoFocus:!0})]}),l&&w.jsx("p",{className:"text-red-500 text-sm",children:l}),w.jsx("button",{type:"submit",className:"w-full inline-flex items-center justify-center gap-2 px-8 py-4 bg-gradient-to-r from-[#FF8C00] to-[#FFA500] text-white font-bold rounded-lg transition-all transform hover:scale-105 hover:brightness-125 shadow-lg shadow-[#FFA500]/20",children:"WEJDŹ"})]})]}),w.jsxs("footer",{className:"absolute bottom-4 p-4 text-center text-[#F0F0F0]/60 text-sm",children:[w.jsxs("p",{children:["© ",new Date().getFullYear()," NadMaxnet Arena. Wszelkie prawa zastrzeżone."]}),w.jsx("p",{className:"mt-1 text-xs",children:"Created by: Patryk Nowicki"})]})]})},C3={apiKey:"AIzaSyAfIdCmRzfFjEY-MzcqNt6VOZnzCKurBLk",authDomain:"nadmaxnet.firebaseapp.com",projectId:"nadmaxnet",storageBucket:"nadmaxnet.firebasestorage.app",messagingSenderId:"203195054547",appId:"1:203195054547:web:9f30570848dd2916e6d726"};gr.apps.length||gr.initializeApp(C3);const vt=gr.firestore(),m_=gr.auth(),Sy=gr.firestore.Timestamp,N3=()=>{const[i,e]=fe.useState(sessionStorage.getItem("isSiteAuthenticated")==="true"),[t,n]=fe.useState("lan"),[a,l]=fe.useState([]),[c,f]=fe.useState([]),[m,g]=fe.useState({name:"NadMaxnet Arena",date:Sy.now(),duration:"Ładowanie...",confirmedPlayers:0,interestedPlayers:0}),[_,T]=fe.useState(null),[A,k]=fe.useState(!1),[K,G]=fe.useState(!1),[W,re]=fe.useState("home"),[de,le]=fe.useState(!0),we=fe.useCallback(async()=>{if((await vt.collection("games").get()).empty){console.log("Database appears to be empty. Seeding with initial data...");const ye=vt.batch();[{name:"Counter-Strike 1.6",description:"Klasyka gatunku FPS.",imageUrl:"https://tse3.mm.bing.net/th/id/OIP.S7RzZCovJQEJX6dtb9qBHgHaJ4?pid=Api",upvotes:12,downvotes:1,downloadUrl:"https://archive.org/download/counter-strike-1.6-full-v7/CS1.6.zip"},{name:"Counter-Strike 2",description:"Nowa era Counter-Strike.",imageUrl:"https://cdn.cloudflare.steamstatic.com/steam/apps/730/header.jpg",upvotes:8,downvotes:3},{name:"Call of Duty 2",description:"Kultowa strzelanka z IIWŚ.",imageUrl:"https://upload.wikimedia.org/wikipedia/en/d/d1/Call_of_Duty_2_Box.jpg",upvotes:15,downvotes:0,downloadUrl:"https://archive.org/download/call-of-duty-2_202111/Call%20of%20Duty%202.zip"},{name:"Call of Duty 4",description:"Nowoczesna wojna, która zmieniła FPSy.",imageUrl:"https://upload.wikimedia.org/wikipedia/en/5/5f/Call_of_Duty_4_Modern_Warfare.jpg",upvotes:14,downvotes:2},{name:"Quake III Arena",description:"Czysta, rakietowa rozrywka.",imageUrl:"https://tse1.mm.bing.net/th/id/OIP.L_C1IbHMUBa5SMXSTzVrXQHaHa?pid=Api",upvotes:18,downvotes:0,downloadUrl:"https://archive.org/download/Quake3arena.zip"},{name:"Savage 2",description:"Unikalne połączenie RTS i FPS.",imageUrl:"https://shared.fastly.steamstatic.com/store_item_assets/steam/apps/13700/header.jpg",upvotes:5,downvotes:5},{name:"Warcraft III",description:"Strategia czasu rzeczywistego w świecie Azeroth.",imageUrl:"https://tse3.mm.bing.net/th/id/OIP.4X_wm4VdzQCuwQpaDjea5gHaI5?pid=Api",upvotes:10,downvotes:4},{name:"Left 4 Dead 2",description:"Kooperacyjna walka z zombie.",imageUrl:"https://tse1.mm.bing.net/th/id/OIP.P37hPfmGucMWvagFkpTetQHaKm?pid=Api",upvotes:16,downvotes:1}].forEach(_r=>{const vr=vt.collection("games").doc();ye.set(vr,_r)}),[{name:"Fallout Tactics",description:"Klasyk do odświeżenia w trybie multiplayer.",imageUrl:"https://cdn.akamai.steamstatic.com/steam/apps/38400/header.jpg?t=1592862483",upvotes:0,downvotes:0,downloadUrl:"https://archive.org/download/fallout_tactics_pc_game/FalloutTactics.iso"},{name:"Red Faction Guerrilla",description:"Nowość warta uwagi - totalna destrukcja!",imageUrl:"https://cdn.akamai.steamstatic.com/steam/apps/667720/header.jpg?t=1667300325",upvotes:0,downvotes:0}].forEach(_r=>{const vr=vt.collection("gamesToCheck").doc();ye.set(vr,_r)});const st={name:"NADMAXNET LANPARTY 2025 Summer edition",date:Sy.fromDate(new Date("2025-08-29T16:00:00")),duration:"29.08.2025 (16:00) - 31.08.2025 (do oporu)",confirmedPlayers:12,interestedPlayers:25},qt=vt.collection("event").doc("details");ye.set(qt,st);const an=vt.collection("config").doc("site");ye.set(an,{password:"lan"}),await ye.commit(),console.log("Database seeded successfully.")}},[]);fe.useEffect(()=>{we(),le(!0);const ae=vt.collection("games").onSnapshot(st=>{const qt=st.docs.map(an=>({...an.data(),id:an.id}));l(qt),le(!1)},st=>{console.error("Error fetching games: ",st),le(!1)}),be=vt.collection("gamesToCheck").onSnapshot(st=>{const qt=st.docs.map(an=>({...an.data(),id:an.id}));f(qt)}),ye=vt.collection("event").doc("details").onSnapshot(st=>{st.exists&&g(st.data())}),yt=vt.collection("config").doc("site").onSnapshot(st=>{const qt=st.data();st.exists&&(qt!=null&&qt.password)&&n(qt.password)}),We=m_.onAuthStateChanged(st=>{T(st)});return()=>{ae(),be(),ye(),yt(),We()}},[we]);const pe=fe.useCallback(()=>{sessionStorage.setItem("isSiteAuthenticated","true"),e(!0)},[]),Ie=fe.useCallback(async ae=>{await vt.collection("config").doc("site").set({password:ae})},[]),R=fe.useCallback(()=>k(!0),[]),S=fe.useCallback(()=>k(!1),[]),C=fe.useCallback(()=>G(!0),[]),V=fe.useCallback(()=>G(!1),[]),O=fe.useCallback(ae=>{re(ae),window.scrollTo(0,0)},[]),L=fe.useCallback(async(ae,be)=>{await vt.collection("games").doc(ae).update({[be==="up"?"upvotes":"downvotes"]:gr.firestore.FieldValue.increment(1)})},[]),N=fe.useCallback(async ae=>{const be=vt.collection("event").doc("details"),ye={...ae,date:ae.date instanceof Date?Sy.fromDate(ae.date):ae.date};await be.set(ye)},[]),Bt=fe.useCallback(async ae=>{await vt.collection("games").add(ae)},[]),ct=fe.useCallback(async ae=>{const{id:be,...ye}=ae;await vt.collection("games").doc(be).update(ye)},[]),Y=fe.useCallback(async ae=>{await vt.collection("games").doc(ae).delete()},[]),ue=fe.useCallback(async ae=>{await vt.collection("games").doc(ae).update({upvotes:0,downvotes:0})},[]),Ee=fe.useCallback(async ae=>{await vt.collection("gamesToCheck").add(ae)},[]),qe=fe.useCallback(async ae=>{const{id:be,...ye}=ae;await vt.collection("gamesToCheck").doc(be).update(ye)},[]),D=fe.useCallback(async ae=>{await vt.collection("gamesToCheck").doc(ae).delete()},[]),ee=fe.useCallback(async ae=>{const be=vt.batch(),{id:ye,...yt}={...ae,upvotes:0,downvotes:0};be.set(vt.collection("games").doc(ye),yt),be.delete(vt.collection("gamesToCheck").doc(ye)),await be.commit()},[]),ce=fe.useCallback(async()=>{await m_.signOut()},[]),ie={games:a,gamesToCheck:c,eventDetails:m,sitePassword:t,onEventUpdate:N,onGameAdd:Bt,onGameUpdate:ct,onGameDelete:Y,onGameToCheckAdd:Ee,onGameToCheckUpdate:qe,onGameToCheckDelete:D,onMoveGameToMain:ee,onResetVotes:ue,onSitePasswordUpdate:Ie,onClose:S,isLoggedIn:!!_,onLogout:ce};return de?w.jsx("div",{className:"min-h-screen flex items-center justify-center text-white text-2xl animate-pulse",children:"Ładowanie danych z Firebase..."}):i?w.jsxs("div",{className:"bg-[#1A1A1A]",children:[w.jsx(I3,{onAdminClick:R,onNavigate:O,currentView:W,onOpenLocationModal:C}),W==="home"?w.jsx(u3,{games:a,gamesToCheck:c,eventDetails:m,onVote:L,onOpenLocationModal:C}):w.jsx(v3,{}),w.jsx(S3,{onAdminClick:R}),A&&w.jsx(VA,{...ie}),K&&w.jsx(R3,{onClose:V})]}):w.jsxs(w.Fragment,{children:[w.jsx(x3,{correctPassword:t,onLoginSuccess:pe,onAdminClick:R}),A&&w.jsx(VA,{...ie})]})},$1=document.getElementById("root");if(!$1)throw new Error("Could not find root element to mount to");const D3=PC.createRoot($1);D3.render(w.jsx(AC.StrictMode,{children:w.jsx(N3,{})}));
